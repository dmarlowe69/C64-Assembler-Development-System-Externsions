;*********************************; WORD DIRECTIVE;*********************************CURWRD .WORD $0000 ;CURRENT WORD;*********************************; WORD DIRECTIVE;*********************************DOWRD=*;      JMP FOOTW;*********************************; BEGIN BUILDING WORD STATEMENTS;*********************************       LDX #$03    ;RESET TO SCREEN       JSR CHKIN   ;INPUT FILE       JSR STOP    ;CHECK STOP       BNE DLOOW   ;IF NOT GO ON.       JMP BREAK   ;BREAK ERROR;*********************************; ZERO DATA COUNTER;*********************************DLOOW  LDA #$00       STA DATCNT;*********************************; LOOP;*********************************RLOOW  NOP       LDX #$08    ;FILE #8       JSR CHKIN   ;INPUT FILE;*********************************; READ IN WORD DATA;*********************************       JSR CHRIN    ;DATA BYTE       STA CURWRD   ;STASH DATA BYTE       JSR READST   ;READ STATUS       STA DSKSTA   ;STASH DISK STATUS       JSR CHRIN    ;DATA BYTE       STA CURWRD+1 ;STASH DATA BYTE       JSR READST   ;READ STATUS       STA DSKSTB   ;STASH DISK STATUS;*********************************; CHECK DATA WORD COUNT IF ZERO; THEN PRINT .WORD DIRECTIVE;*********************************       LDA DATCNT       BNE SUBWRD;*********************************; PRINT WORD DIRECTIVE AND FIRST WORD;*********************************; CHECK SCREEN OUTPUT OPTIONS; 0 = NO SCREEN; 1 = SCREEN OUTPUT;*********************************       LDA SCROPT       BNE PRTFI5;*********************************; SET OUTPUT CHANNEL TO SCREEN;*********************************       LDX #$03      ;FILE #Y       JSR CHKOUT    ;SET TO OUTPUT       JSR PRTDFW    ;PRINT DIRECTIVE;*********************************; SET OUTPUT CHANNEL TO ASM FILE;*********************************PRTFI5 LDX #$07      ;FILE #Y       JSR CHKOUT    ;SET TO OUTPUT       JSR PRTDFW    ;PRINT DIRECTIVE;*********************************; SET OUTPUT CHANNEL TO SCREEN;*********************************       LDX #$03      ;FILE #Y       JSR CHKOUT    ;SET TO OUTPUT       CLV       BVC CHKDSW;*********************************; SUBSEQUENT WORDS;*********************************;*********************************; CHECK SCREEN OUTPUT OPTIONS; 0 = NO SCREEN; 1 = SCREEN OUTPUT;*********************************SUBWRD LDA SCROPT       BNE PRTFI6;*********************************; SET OUTPUT CHANNEL TO SCREEN;*********************************       LDX #$03      ;FILE #Y       JSR CHKOUT    ;SET TO OUTPUT       JSR PRTSW     ;PRINT FOOTER;*********************************; SET OUTPUT CHANNEL TO ASM FILE;*********************************PRTFI6 LDX #$07      ;FILE #Y       JSR CHKOUT    ;SET TO OUTPUT       JSR PRTSW     ;PRINT FOOTER;*********************************; SET OUTPUT CHANNEL TO SCREEN;*********************************       LDX #$03      ;FILE #Y       JSR CHKOUT    ;SET TO OUTPUT;*********************************; CHECK FOR DISK ERROR - LIKE END OF FILE;*********************************CHKDSW=*       LDA DSKSTA   ;CHECK DISK STATUS       ORA DSKSTB   ;CHECK DISK STATUS       BEQ CUROW    ;NEXT BYTE       JMP FOOTW    ;DONE PRINT FOOTER;*********************************; INCREMENT RECORD COUNT;*********************************CUROW  LDX DATCNT       INX       STX DATCNT;*********************************; INCREMENT ADDRESS BY 2;*********************************       CLC       LDA CUADD       ADC #$02       STA CUADD       BCC IN3       LDA CUADD+1       ADC #$00       STA CUADD+1;*********************************; CHECK FOR MAXIMUM $08 WORDS;*********************************IN3    LDX DATCNT       CPX DATLIM       BEQ SRLOW       JMP RLOOW;*********************************; PRINT NEWLINE;*********************************; CHECK SCREEN OUTPUT OPTIONS; 0 = NO SCREEN; 1 = SCREEN OUTPUT;*********************************SRLOW  LDA SCROPT       BNE PRTFI7;*********************************; SET OUTPUT CHANNEL TO SCREEN;*********************************       LDX #$03      ;FILE #Y       JSR CHKOUT    ;SET TO OUTPUT       JSR PRTCR     ;PRINT CR;*********************************; SET OUTPUT CHANNEL TO ASM FILE;*********************************PRTFI7 LDX #$07      ;FILE #Y       JSR CHKOUT    ;SET TO OUTPUT       JSR PRTCR     ;PRINT CR;*********************************; SET OUTPUT CHANNEL TO SCREEN;*********************************       LDX #$03      ;FILE #Y       JSR CHKOUT    ;SET TO OUTPUT;*********************************; NEXT DIRECTIVE LINE;*********************************       JMP DLOOW;*********************************;*********************************;;*********************************FOOTW=*;*********************************; INCREMENT ADDRESS BY 1 PAST LAST WORD;*********************************       CLC       LDA CUADD       ADC #$01       STA CUADD       BCC IN4       LDA CUADD+1       ADC #$00       STA CUADD+1;*********************************;;*********************************IN4    RTS;*********************************;;*********************************;*********************************; PRINT WORD DIRECTIVE AND FIRST WORD;*********************************PRTDFW JSR PRTWRD   ;PRINT ' .WORD '       JSR PRTDOL   ;PRINT '$'       LDA CURWRD+1 ;RETERIVE BYTE       JSR CVTBYT   ;CONVERT BYTE       JSR PRTBYE   ;PRINT BYTE       LDA CURWRD   ;RETERIVE BYTE       JSR CVTBYT   ;CONVERT BYTE       JSR PRTBYE   ;PRINT BYTE       RTS;*********************************; SUBSEQUENT BYTES;*********************************PRTSW  JSR PRTCOM   ;PRINT ','       JSR PRTDOL   ;PRINT '$'       LDA CURWRD+1 ;RETERIVE BYTE       JSR CVTBYT   ;CONVERT BYTE       JSR PRTBYE   ;PRINT BYTE       LDA CURWRD   ;RETERIVE BYTE       JSR CVTBYT   ;CONVERT BYTE       JSR PRTBYE   ;PRINT BYTE       RTS;*********************************; PRINT ' .WORD ';*********************************MSWD .TEXT ' .WORD '     .BYTE 0;*********************************; PRINT " .WORD ";*********************************PRTWRD LDA #<MSWD  ;LOW BYTE MESSAGE       LDY #>MSWD  ;HIGH BYTE MESSAGE       JMP STRPNT  ;OUTPUT MESSAGE;*********************************; WORD DIRECTIVE;*********************************