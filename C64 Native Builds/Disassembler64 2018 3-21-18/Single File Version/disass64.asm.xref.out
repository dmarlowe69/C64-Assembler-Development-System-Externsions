DISASS64.ASM......PAGE 0001

LINE# LOC   CODE        LINE































































DISASSEMBLER64......PAGE 0002

LINE# LOC   CODE        LINE


00003  0000              ;*********************************
00004  0000              *=$0801                ;START OF BASIC
00005  0801              ;*********************************
00006  0801              ; SET BSTUB TO ONE TO ALLOW FOR
00007  0801              ; INSERTION OF BASIC STUB CODE
00008  0801              ;*********************************
00009  0801              BSTUB  = 1
00010  0801              ;*********************************
00011  0801              ;
00012  0801              ;        DISASSEMBLER64
00013  0801              ;    DISASSEMBLER.C64 V080282
00014  0801              ;    SYMBOLIC DISASSEMBLER
00015  0801              ;       BY DENTON MARLOWE
00016  0801              ;
00017  0801              ;  (C)1986 BY DENTON MARLOWE
00018  0801              ;
00019  0801              ; MACRO ASSEMBLER DEVELOPMENT SYSTEM
00020  0801              ;  (C) 1982 BY COMMODORE MACHINES
00021  0801              ;
00022  0801              ;*********************************
00023  0801              ;
00024  0801              ; BASIC FORMAT PROGRAM
00025  0801              ;
00026  0801              ; 10 SYS(2063)
00027  0801              ;
00028  0801              ;*********************************
00030  0801              ;.IF  BSTUB == 1
00031  0801  0D 08              .WORD BASIC     ;NEXT LINE POINTER
00032  0803  0A                 .BYTE $0A,$00   ;LINE NUMBER
00032  0804  00 
00033  0805  9E                 .BYTE $9E       ;SYS COMMAND
00034  0806  28 32              .BYTE '(2063)'  ;ASCII (2063)
00035  080C  00                 .BYTE 0         ;END OF LINE
00036  080D  00          BASIC  .BYTE 0,0       ;END OF BASIC
00036  080E  00 
00038  080F              ;.FI
00039  080F              ;*********************************
00040  080F              ;.LIB DIS.ASM
00041  080F              ;*********************************
00042  080F              ;.LIB OPTION.ASM
00043  080F              ;*********************************
00044  080F              ;.LIB UTIL.ASM
00045  080F              ;*********************************
00046  080F              ;.LIB MODE.ASM
00047  080F              ;*********************************
00048  080F              ;.LIB INTERNAL.ASM
00049  080F              ;*********************************
00050  080F              ;.LIB ASC.ASM
00051  080F              ;*********************************
00052  080F              ;.LIB TABLE.ASM
00053  080F              ;*********************************
00054  080F              ;.LIB SYM.ASM
00055  080F              ;*********************************
00056  080F              ;.END
00057  080F              ;*********************************






DISASSEMBLER64......PAGE 0003

LINE# LOC   CODE        LINE


00058  080F              ; FILE DIS.ASM
00059  080F              ;*********************************
00060  080F              ;
00061  080F              ;        DISASSEMBLER64
00062  080F              ;    SYMBOLIC DISASSEMBLER
00063  080F              ;       BY DENTON MARLOWE
00064  080F              ;
00065  080F              ;  (C)1986 BY DENTON MARLOWE
00066  080F              ;
00067  080F              ;*********************************
00068  080F              ; KERNAL ADDRESS
00069  080F              ;*********************************
00070  080F              VICREG=$D011           ;SCREEN REGISTER
00071  080F              CHROUT=$FFD2           ;OUTPUT CHARACTER
00072  080F              CHKIN  =$FFC6          ;OPEN INPUT FILE
00073  080F              CHRIN  =$FFCF          ;GET KEYBOARD INPUT
00074  080F              GETIN  =$FFE4          ;GET KEYBOARD CHAR
00075  080F              CLRCHN=$FFCC           ;RESET I/O CHANNELS
00076  080F              STOP   =$FFE1          ;CHECK FOR STOP
00077  080F              READST=$FFB7           ;READ ST
00078  080F              SETNAM=$FFBD           ;SET FILENAME
00079  080F              SETLFS=$FFBA           ;SET LOGICAL FILE
00080  080F              OPEN   =$FFC0          ;OPEN FILE
00081  080F              CHKOUT=$FFC9           ;OPEN OUTPUT CHANNEL
00082  080F              CLOSE  =$FFC3          ;CLOSE LOGICAL FILE
00083  080F              WREADY=$E391           ;BASIC RETURN
00084  080F              ZEROUR=$02             ;ZEROPAGE POINTER
00085  080F              MEMSIZ=$37             ;TOP OF FREE RAM+1
00086  080F              ;*********************************
00087  080F              ;        ENTRY POINT
00088  080F              ;*********************************
00089  080F  4C 21 0A    STARTD JMP DISASS
00090  0812              ;*********************************
00091  0812              ;       VARIABLES
00092  0812              ;*********************************
00093  0812  31          PASS   .BYTE '1'       ;PASS INDICATOR
00094  0813  31          IPASS  .BYTE '1'       ;INTERNAL PASS
00095  0814  32          EPASS  .BYTE '2'       ;EXTERNAL PASS
00096  0815  33          CPASS  .BYTE '3'       ;PRINTING PASS
00097  0816  34          SPASS  .BYTE '4'       ;SYMBOL PASS
00098  0817              ;*********************************
00099  0817  AA          XOPT   .BYTE $AA       ;LABEL GENERATION
00100  0818  AA          ROPT   .BYTE $AA       ;REL ADDRESS OPT
00101  0819  AA          DEVICE .BYTE $AA       ;OUTPUT DEVICE
00102  081A  AA          OUTPUT .BYTE $AA       ;OUTPUT FLAG
00103  081B  AA          WINDOW .BYTE $AA       ;WINDOW FLAG
00104  081C  AA          FOROPT .BYTE $AA       ;FORMAT FLAG
00105  081D  AA          COMOPT .BYTE $AA       ;COMMENT FLAG
00106  081E              ;*********************************
00107  081E              ; DISASSEMBLY ADDRESS POINTERS
00108  081E              ;*********************************
00109  081E  AA AA       SA     .WORD $AAAA     ;START ADDRESS
00110  0820  AA AA       EA     .WORD $AAAA     ;END ADDRESS
00111  0822  AA AA       SELECT .WORD $AAAA     ;BYTE POINTER
00112  0824  AA AA       OFFSET .WORD $AAAA     ;ADDRESS OFFSET






DISASSEMBLER64......PAGE 0004

LINE# LOC   CODE        LINE


00113  0826  AA AA       SAGOL  .WORD $AAAA     ;GOLBAL START
00114  0828  AA AA       EAGOL  .WORD $AAAA     ;GOLBAL END
00115  082A  AA AA       SAOUT  .WORD $AAAA     ;START ADDRESS
00116  082C  AA AA       EAOUT  .WORD $AAAA     ;END ADDRESS
00117  082E              ;*********************************
00118  082E              ; INTERNAL ADDRESS TABLE
00119  082E              ;*********************************
00120  082E  AA AA       TABINP .WORD $AAAA     ;TABLE POINTER
00121  0830  AA AA       TABINS .WORD $AAAA     ;TABLE START
00122  0832  AA AA       TABINE .WORD $AAAA     ;TABLE END
00123  0834              ;*********************************
00124  0834              ; SORT TABLE POINTERS
00125  0834              ;*********************************
00126  0834  AA AA       SMALLS .WORD $AAAA     ;TABLE START
00127  0836  AA AA       SMALLP .WORD $AAAA     ;TABLE POINTER
00128  0838              ;*********************************
00129  0838              ; SYMBOL TABLE
00130  0838              ;*********************************
00131  0838  AA          SYMBOL .BYTE $AA       ;SYMBOL OPTION
00132  0839  AA AA       SYMBOP .WORD $AAAA     ;TABLE POINTER
00133  083B  AA AA       SYMBOS .WORD $AAAA     ;TABLE START
00134  083D  AA AA       SYMBOE .WORD $AAAA     ;TABLE END
00135  083F              ;*********************************
00136  083F              ; UNDEFINED SYMBOL TABLE
00137  083F              ;*********************************
00138  083F  AA AA       UYMBOP .WORD $AAAA     ;TABLE POINTER
00139  0841  AA AA       UYMBOS .WORD $AAAA     ;TABLE START
00140  0843  AA AA       UYMBOE .WORD $AAAA     ;TABLE END
00141  0845              ;*********************************
00142  0845              ; TEMP WORKING STORAGE
00143  0845              ;*********************************
00144  0845  AA AA       WORKED .WORD $AAAA     ;TWO BYTE OP
00145  0847  AA AA       WORKER .WORD $AAAA     ;TWO BYTE OP
00146  0849  AA AA       SAVEP  .WORD $AAAA     ;TWO BYTE OP
00147  084B  AA AA       SAVES  .WORD $AAAA     ;TWO BYTE OP
00148  084D  AA AA       SAVEE  .WORD $AAAA     ;TWO BYTE OP
00149  084F              ;*********************************
00150  084F              ; OTHER VARIABLES
00151  084F              ;*********************************
00152  084F  AA AA       ADRS   .WORD $AAAA
00153  0851  AA          TEMP   .BYTE $AA
00154  0852  AA          SAVA   .BYTE $AA
00155  0853  AA          SAVX   .BYTE $AA
00156  0854  AA          SAVY   .BYTE $AA
00157  0855              ;*********************************
00158  0855              ; PRINTER OUTPUT STORAGE
00159  0855              ;*********************************
00160  0855  AA AA       PAGECT .WORD $AAAA     ;PAGE COUNT
00161  0857  AA          LISTCT .BYTE $AA       ;LINE COUNT
00162  0858  AA AA       LINECT .WORD $AAAA     ;LINE COUNT
00163  085A  AA AA       ERRCT  .WORD $AAAA     ;ERROR COUNT
00164  085C              ;*********************************
00165  085C              ; INPUT BUFFER
00166  085C              ;*********************************
00167  085C              BUF    = *






DISASSEMBLER64......PAGE 0005

LINE# LOC   CODE        LINE


00168  085C  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00168  085D  00 
00168  085E  00 
00168  085F  00 
00168  0860  00 
00168  0861  00 
00168  0862  00 
00168  0863  00 
00168  0864  00 
00168  0865  00 
00169  0866  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00169  0867  00 
00169  0868  00 
00169  0869  00 
00169  086A  00 
00169  086B  00 
00169  086C  00 
00169  086D  00 
00169  086E  00 
00169  086F  00 
00170  0870  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00170  0871  00 
00170  0872  00 
00170  0873  00 
00170  0874  00 
00170  0875  00 
00170  0876  00 
00170  0877  00 
00170  0878  00 
00170  0879  00 
00171  087A  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00171  087B  00 
00171  087C  00 
00171  087D  00 
00171  087E  00 
00171  087F  00 
00171  0880  00 
00171  0881  00 
00171  0882  00 
00171  0883  00 
00172  0884  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00172  0885  00 
00172  0886  00 
00172  0887  00 
00172  0888  00 
00172  0889  00 
00172  088A  00 
00172  088B  00 
00172  088C  00 
00172  088D  00 
00173  088E  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00173  088F  00 
00173  0890  00 
00173  0891  00 
00173  0892  00 






DISASSEMBLER64......PAGE 0006

LINE# LOC   CODE        LINE


00173  0893  00 
00173  0894  00 
00173  0895  00 
00173  0896  00 
00173  0897  00 
00174  0898  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00174  0899  00 
00174  089A  00 
00174  089B  00 
00174  089C  00 
00174  089D  00 
00174  089E  00 
00174  089F  00 
00174  08A0  00 
00174  08A1  00 
00175  08A2  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00175  08A3  00 
00175  08A4  00 
00175  08A5  00 
00175  08A6  00 
00175  08A7  00 
00175  08A8  00 
00175  08A9  00 
00175  08AA  00 
00175  08AB  00 
00176  08AC  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00176  08AD  00 
00176  08AE  00 
00176  08AF  00 
00176  08B0  00 
00176  08B1  00 
00176  08B2  00 
00176  08B3  00 
00176  08B4  00 
00176  08B5  00 
00177  08B6  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00177  08B7  00 
00177  08B8  00 
00177  08B9  00 
00177  08BA  00 
00177  08BB  00 
00177  08BC  00 
00177  08BD  00 
00177  08BE  00 
00177  08BF  00 
00178  08C0              ;*********************************
00179  08C0              ; FILE NAME BUFFER
00180  08C0              ;*********************************
00181  08C0  AA AA       LINEFL .WORD $AAAA
00182  08C2  AA          VERSON .BYTE $AA
00183  08C3  AA          NCHARS .BYTE $AA
00184  08C4              NBUF   = *
00185  08C4  30 3A              .BYTE '0:'
00186  08C6  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
00186  08C7  AA 






DISASSEMBLER64......PAGE 0007

LINE# LOC   CODE        LINE


00186  08C8  AA 
00186  08C9  AA 
00186  08CA  AA 
00186  08CB  AA 
00186  08CC  AA 
00186  08CD  AA 
00187  08CE  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
00187  08CF  AA 
00187  08D0  AA 
00187  08D1  AA 
00187  08D2  AA 
00187  08D3  AA 
00187  08D4  AA 
00187  08D5  AA 
00188  08D6  AA                 .BYTE $AA,$AA,$AA,$AA
00188  08D7  AA 
00188  08D8  AA 
00188  08D9  AA 
00189  08DA              ;*********************************
00190  08DA              ; SYMBOL TABLE BUFFER
00191  08DA              ;*********************************
00192  08DA              SYMBUF = *
00193  08DA  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,
$AA
00193  08DB  AA 
00193  08DC  AA 
00193  08DD  AA 
00193  08DE  AA 
00193  08DF  AA 
00193  08E0  AA 
00193  08E1  AA 
00193  08E2  AA 
00193  08E3  AA 
00194  08E4              ;*********************************
00195  08E4              ; DATA TABLE
00196  08E4              ;*********************************
00197  08E4  AA AA       EAS    .WORD $AAAA
00198  08E6  AA          TEXTER .BYTE $AA
00199  08E7  AA AA       CDATA  .WORD $AAAA
00200  08E9  AA AA       NDATA  .WORD $AAAA
00201  08EB  AA AA       DATABP .WORD $AAAA     ;DATA POINT
00202  08ED  AA AA       DATABS .WORD $AAAA     ;DATA START
00203  08EF  AA AA       DATABE .WORD $AAAA     ;DATA END
00204  08F1              ;*********************************
00205  08F1              ; DATA TABLE
00206  08F1              ;*********************************
00207  08F1  AA          TDATA  .BYTE $AA
00208  08F2              ;*********************************
00209  08F2              *=*+$0100
00210  09F2              ;*********************************
00211  09F2  0D          MPASS  .BYTE $0D,'PASS',0
00211  09F3  50 41 
00211  09F7  00 
00212  09F8  0D          PMSG   .BYTE $0D,$12,' PAUSE ',$92,$0D,0
00212  09F9  12 
00212  09FA  20 50 






DISASSEMBLER64......PAGE 0008

LINE# LOC   CODE        LINE


00212  0A01  92 
00212  0A02  0D 
00212  0A03  00 
00213  0A04  45 52       MSGERR .BYTE 'ERRORS = ',0
00213  0A0D  00 
00214  0A0E  45 4E       MSGDIS .BYTE 'END OF DISASSEMBLY',0
00214  0A20  00 
00215  0A21              ;*********************************
00216  0A21              ; INITIALIZE DISASSEMBLER
00217  0A21              ;*********************************
00218  0A21  A2 FF       DISASS LDX #$FF
00219  0A23  9A                 TXS
00220  0A24  D8                 CLD
00221  0A25  20 73 0B           JSR DOP         ;GET OPTIONS
00222  0A28  20 6B 1A           JSR INITIN      ;INIT POINTERS
00223  0A2B  A9 31              LDA #'1'        ;PASS ONE
00224  0A2D  8D 12 08           STA PASS        ;SET PASS INDICATOR
00225  0A30              ;*********************************
00226  0A30              ; DISASSEMBLER LOOP
00227  0A30              ;*********************************
00228  0A30  20 57 19    DISA   JSR INTSA       ;SET SA
00229  0A33  A9 00              LDA #00         ;ZERO BYTE
00230  0A35  8D E7 08           STA CDATA       ;SET TABLE NUMBER
00231  0A38  A9 F2              LDA #<MPASS     ;PASS MSG
00232  0A3A  A0 09              LDY #>MPASS     ;
00233  0A3C  20 C4 13           JSR STRPNT      ;PRINT IT
00234  0A3F  AD 12 08           LDA PASS        ;GET PASS
00235  0A42  20 1A 14           JSR PCHAR       ;PRINT NUMBER
00236  0A45  20 FC 18           JSR CRLF        ;CR
00237  0A48              ;*********************************
00238  0A48  AD 12 08           LDA PASS        ;GET PASS
00239  0A4B  CD 15 08           CMP CPASS       ;IS IT LAST
00240  0A4E  F0 0E              BEQ DISB        ;IF SO PRINT
00241  0A50  CD 14 08           CMP EPASS       ;IS IT EXTERNAL
00242  0A53  D0 40              BNE DLOOP       ;IF NOT GO ON
00243  0A55  20 8A 1A           JSR SAVINT      ;SAVE INTERNAL
00244  0A58  20 3E 23           JSR EQUINT      ;SET EQUATES
00245  0A5B  4C 95 0A           JMP DLOOP       ;GO ON
00246  0A5E              ;*********************************
00247  0A5E  A9 01       DISB   LDA #$01        ;ONE BYTE
00248  0A60  8D 58 08           STA LINECT      ;SET LINE # TO 1
00249  0A63  8D 55 08           STA PAGECT      ;SET PAGE TO 1
00250  0A66  A9 00              LDA #$00        ;ZERO BYTE
00251  0A68  8D 59 08           STA LINECT+1    ;SET LINE # TO 1
00252  0A6B  8D 56 08           STA PAGECT+1    ;SET PAGE TO 1
00253  0A6E  8D 57 08           STA LISTCT      ;SET LIST TO 0
00254  0A71  8D 5A 08           STA ERRCT       ;SET ERROR TO 0
00255  0A74  8D 5B 08           STA ERRCT+1     ;SET ERROR TO 0
00256  0A77  8D C0 08           STA LINEFL      ;SET LINE TO 0
00257  0A7A  8D C1 08           STA LINEFL+1    ;SET LINE TO 0
00258  0A7D  AD 1A 08           LDA OUTPUT      ;GET OUTPUT
00259  0A80  8D 19 08           STA DEVICE      ;SET OUTPUT
00260  0A83              ;*********************************
00261  0A83  20 83 14           JSR HEADER      ;PRINT HEADER
00262  0A86  20 9F 0D           JSR OFILED      ;OPEN DISK FILE






DISASSEMBLER64......PAGE 0009

LINE# LOC   CODE        LINE


00263  0A89              ;
00264  0A89  20 0F 30           JSR OPTPAG      ;PRINT .PAGE 'FILENAME'
00265  0A8C              ;
00266  0A8C  20 41 30           JSR OPTDIR      ;PRINT .OPT LIST
00267  0A8F              ;
00268  0A8F  20 44 18           JSR ORGIN       ;PRINT ORGIN LABEL
00269  0A92  20 49 24           JSR EQUPRT      ;PRINT EQUATE
00270  0A95              ;********************************
00271  0A95  20 86 15    DLOOP  JSR DSLINE      ;DIS ONE LINE
00272  0A98  B0 2C              BCS NEXTP       ;IF EA STOP
00273  0A9A  20 8E 12           JSR LINECK      ;LINE COUNT
00274  0A9D  20 E1 FF           JSR STOP        ;CHECK STOP
00275  0AA0  F0 57              BEQ QUITS       ;IF SO QUIT
00276  0AA2  20 E4 FF           JSR GETIN       ;GET KEY
00277  0AA5  F0 EE              BEQ DLOOP       ;IF NONE NEXT
00278  0AA7  C9 20              CMP #' '          ;IS IT A SPACE
00279  0AA9  D0 EA              BNE DLOOP       ;IF NOT NEXT
00280  0AAB              ;*********************************
00281  0AAB              ; PAUSE LISTING
00282  0AAB              ;********************************
00283  0AAB  AD 19 08           LDA DEVICE
00284  0AAE  48                 PHA
00285  0AAF  A9 03              LDA #$03
00286  0AB1  8D 19 08           STA DEVICE
00287  0AB4  A9 F8              LDA #<PMSG
00288  0AB6  A0 09              LDY #>PMSG
00289  0AB8  20 C4 13           JSR STRPNT
00290  0ABB  68                 PLA
00291  0ABC  8D 19 08           STA DEVICE
00292  0ABF  20 E4 FF    PAUSE  JSR GETIN       ;PAUSE FOR KEY
00293  0AC2  F0 FB              BEQ PAUSE       ;
00294  0AC4  D0 CF              BNE DLOOP       ;NEXT LINE
00295  0AC6              ;********************************
00296  0AC6  EE 12 08    NEXTP  INC PASS        ;INC PASS
00297  0AC9  AD 12 08           LDA PASS        ;GET PASS
00298  0ACC  CD 15 08           CMP CPASS       ;LAST PASS?
00299  0ACF  90 1F              BCC DISFUL      ;IF LESS AGAIN
00300  0AD1  D0 20              BNE DISC        ;FINISH
00301  0AD3  AD 1B 08           LDA WINDOW      ;WINDOW FLAG
00302  0AD6  F0 18              BEQ DISFUL      ;FULL OUTPUT
00303  0AD8              ;*********************************
00304  0AD8              ; WINDOWED OUTPUT
00305  0AD8              ;*********************************
00306  0AD8  AD 2A 08           LDA SAOUT       ;
00307  0ADB  8D 1E 08           STA SA          ;
00308  0ADE  AD 2B 08           LDA SAOUT+1     ;
00309  0AE1  8D 1F 08           STA SA+1        ;
00310  0AE4  AD 2C 08           LDA EAOUT       ;
00311  0AE7  8D 20 08           STA EA          ;
00312  0AEA  AD 2D 08           LDA EAOUT+1     ;
00313  0AED  8D 21 08           STA EA+1        ;
00314  0AF0              ;*********************************
00315  0AF0  4C 30 0A    DISFUL JMP DISA        ;LAST PASS
00316  0AF3  20 2C 19    DISC   JSR INCSL
00317  0AF6  20 5A 18           JSR EFILE       ;END FILE MSG






DISASSEMBLER64......PAGE 0010

LINE# LOC   CODE        LINE


00318  0AF9              ;*********************************
00319  0AF9  AD 19 08    QUITS  LDA DEVICE      ;CHECK DEV
00320  0AFC  29 08              AND #$08        ;DISK FILE?
00321  0AFE  F0 10              BEQ QUTERR      ;IF NOT BRANCH
00322  0B00  A9 08              LDA #$08        ;DISK
00323  0B02  20 C3 FF           JSR CLOSE       ;CLOSE IT
00324  0B05  AD 1A 08           LDA OUTPUT      ;GET OUTPUT
00325  0B08  29 07              AND #07         ;MASK DISK
00326  0B0A  8D 1A 08           STA OUTPUT      ;RESET OUTPUT
00327  0B0D  8D 19 08           STA DEVICE      ;RESET OUTPUT
00328  0B10              ;*********************************
00329  0B10              ; PRINT ERRORS
00330  0B10              ;*********************************
00331  0B10  AD 1A 08    QUTERR LDA OUTPUT
00332  0B13  09 03              ORA #$03
00333  0B15  8D 1A 08           STA OUTPUT
00334  0B18  8D 19 08           STA DEVICE
00335  0B1B  20 07 13           JSR NEWLIN
00336  0B1E  20 07 13           JSR NEWLIN
00337  0B21  A9 04              LDA #<MSGERR
00338  0B23  A0 0A              LDY #>MSGERR
00339  0B25  20 C4 13           JSR STRPNT
00340  0B28  AE 5A 08           LDX ERRCT
00341  0B2B  AD 5B 08           LDA ERRCT+1
00342  0B2E  20 E0 13           JSR PRTNUM
00343  0B31              ;*********************************
00344  0B31  AD 19 08           LDA DEVICE      ;CHECK DEV
00345  0B34  29 04              AND #$04        ;PRINTER?
00346  0B36  F0 13              BEQ DONED       ;IF NOT DONE
00347  0B38  A9 04              LDA #$04        ;DEVICE 4
00348  0B3A  8D 1A 08           STA OUTPUT      ;SET DEVICE
00349  0B3D  8D 19 08           STA DEVICE      ;SET DEVICE
00350  0B40  20 3C 1C           JSR INTPRT      ;PRINT INTABLE
00351  0B43  A9 07              LDA #$07        ;DEVICE 3 AND 4
00352  0B45  8D 19 08           STA DEVICE      ;SET DEVICE
00353  0B48  8D 1A 08           STA OUTPUT      ;SET DEVICE
00354  0B4B  20 07 13    DONED  JSR NEWLIN      ;NEWLINE
00355  0B4E  20 07 13           JSR NEWLIN      ;NEWLINE
00356  0B51  A9 0E              LDA #<MSGDIS    ;END MSG
00357  0B53  A0 0A              LDY #>MSGDIS
00358  0B55  20 C4 13           JSR STRPNT      ;PRINT IT
00359  0B58  20 07 13           JSR NEWLIN      ;NEW LINE
00360  0B5B  AD 19 08           LDA DEVICE      ;CHECK DEVICE
00361  0B5E  29 04              AND #$04        ;PRINTER
00362  0B60  F0 08              BEQ DONE        ;
00363  0B62  20 51 14           JSR FINISH      ;FINISH PAGE
00364  0B65  A9 04              LDA #$04        ;PRINTER
00365  0B67  20 C3 FF           JSR CLOSE       ;CLOSE FILE
00366  0B6A              ;*********************************
00367  0B6A  20 CC FF    DONE   JSR CLRCHN      ;RESET I/O
00368  0B6D  20 11 15           JSR SCRON       ;TURN SCREEN ON
00369  0B70  4C 91 E3           JMP WREADY      ;RETURN
00370  0B73              ;*********************************
00371  0B73              ;.FIL 0:OPTION.ASM
00372  0B73              ;*********************************






DISASSEMBLER64......PAGE 0011

LINE# LOC   CODE        LINE


00373  0B73              ;.END
00374  0B73              ;*********************************
00375  0B73              ; FILE OPTION.ASM
00376  0B73              ;*********************************
00377  0B73              ;
00378  0B73              ;        DISASSEMBLER64
00379  0B73              ;    SYMBOLIC DISASSEMBLER
00380  0B73              ;       BY DENTON MARLOWE
00381  0B73              ;
00382  0B73              ;  (C)1986 BY DENTON MARLOWE
00383  0B73              ;
00384  0B73              ;*********************************
00385  0B73              ; DISASSEMBLER OPTIONS
00386  0B73              ;*********************************
00387  0B73  A9 03       DOP    LDA #$03        ;DEVICE #3 SCREEN
00388  0B75  8D 19 08           STA DEVICE      ;CURRENT OUTPUT
00389  0B78  A9 00              LDA #$00        ;NO DEVICES
00390  0B7A  8D 1A 08           STA OUTPUT      ;FINAL OUTPUT
00391  0B7D  A9 BD              LDA #<MSG       ;START UP MSG
00392  0B7F  A0 0F              LDY #>MSG
00393  0B81  20 C4 13           JSR STRPNT      ;PRINT IT
00394  0B84              ;*********************************
00395  0B84              ; READ IN DISK FILE ?
00396  0B84              ;*********************************
00397  0B84  A9 0A              LDA #<MSF1
00398  0B86  A0 10              LDY #>MSF1
00399  0B88  20 C4 13           JSR STRPNT
00400  0B8B  20 25 13           JSR INSTNG
00401  0B8E  D0 03              BNE PFILE0
00402  0B90  4C CE 0C           JMP STARTS
00403  0B93              ;*********************************
00404  0B93              ; SAVE FILENAME FOR .PAGE DIRECTIVE
00405  0B93              ;*********************************
00406  0B93              PFILE0 = *
00407  0B93  20 F3 2F           JSR PFILEH
00408  0B96              ;*********************************
00409  0B96              ; APPEND ,P,R TO FILENAME
00410  0B96              ;*********************************
00411  0B96  A2 00              LDX #$00
00412  0B98  BD 5B 10    PFILE1 LDA PROGM,X
00413  0B9B  99 5C 08           STA BUF,Y
00414  0B9E  C8                 INY
00415  0B9F  E8                 INX
00416  0BA0  E0 04              CPX #$04
00417  0BA2  D0 F4              BNE PFILE1
00418  0BA4  8C 52 08           STY SAVA
00419  0BA7  20 B4 0C           JSR INITD
00420  0BAA  20 8E 0C           JSR PRFILE
00421  0BAD              ;*********************************
00422  0BAD              ; READ IN FILE FOR SA AND EA
00423  0BAD              ;*********************************
00424  0BAD  A2 08              LDX #$08        ;FILE #8
00425  0BAF  20 C6 FF           JSR CHKIN       ;INPUT FILE
00426  0BB2  20 CF FF           JSR CHRIN       ;GET LOW BYTE SA
00427  0BB5  8D 1E 08           STA SA          ;SET START






DISASSEMBLER64......PAGE 0012

LINE# LOC   CODE        LINE


00428  0BB8  20 CF FF           JSR CHRIN       ;GET HIGH BYTE SA
00429  0BBB  8D 1F 08           STA SA+1        ;SET START
00430  0BBE  20 57 19           JSR INTSA       ;SET END
00431  0BC1              ;*********************************
00432  0BC1  A9 00              LDA #$00        ;ZERO BYTE
00433  0BC3  8D 4F 08           STA ADRS        ;BYTE COUNTER
00434  0BC6  8D 50 08           STA ADRS+1      ;BYTE COUNTER
00435  0BC9  20 CF FF    PROGRD JSR CHRIN       ;INPUT BYTE
00436  0BCC  20 B7 FF           JSR READST      ;READ STATUS
00437  0BCF  D0 0D              BNE PROGED      ;IF NOT ZERO END
00438  0BD1  20 2C 19           JSR INCSL       ;INC END ADDRESS
00439  0BD4  EE 4F 08           INC ADRS        ;INC BYTE COUNT
00440  0BD7  D0 03              BNE *+5         ;
00441  0BD9  EE 50 08           INC ADRS+1      ;
00442  0BDC  D0 EB              BNE PROGRD      ;NEXT BYTE
00443  0BDE  AD 22 08    PROGED LDA SELECT      ;
00444  0BE1  8D 20 08           STA EA          ;
00445  0BE4  AD 23 08           LDA SELECT+1    ;
00446  0BE7  8D 21 08           STA EA+1        ;
00447  0BEA              ;*********************************
00448  0BEA  A9 08              LDA #$08        ;FILE #8
00449  0BEC  20 C3 FF           JSR CLOSE       ;CLOSE IT
00450  0BEF  20 CC FF           JSR CLRCHN      ;RESET I/O
00451  0BF2              ;*********************************
00452  0BF2              ; PRINT PROGRAM LOAD ADDRESS
00453  0BF2              ; AND END ADDRESS
00454  0BF2              ;*********************************
00455  0BF2  A9 26              LDA #<MSF2
00456  0BF4  A0 10              LDY #>MSF2
00457  0BF6  20 C4 13           JSR STRPNT
00458  0BF9  AD 1E 08           LDA SA
00459  0BFC  8D 45 08           STA WORKED
00460  0BFF  AD 1F 08           LDA SA+1
00461  0C02  8D 46 08           STA WORKED+1
00462  0C05  20 CB 18           JSR PWORKD
00463  0C08              ;
00464  0C08  A9 2D              LDA #'-'
00465  0C0A              ;
00466  0C0A  20 1A 14           JSR PCHAR
00467  0C0D  20 D9 18           JSR DOLLAR
00468  0C10  20 BF 18           JSR PSELEC
00469  0C13  20 FC 18           JSR CRLF
00470  0C16              ;*********************************
00471  0C16              ; CALCULATE BUFFER ADDRESS
00472  0C16              ;*********************************
00473  0C16  A5 37              LDA MEMSIZ
00474  0C18  8D 22 08           STA SELECT
00475  0C1B  A5 38              LDA MEMSIZ+1
00476  0C1D  8D 23 08           STA SELECT+1
00477  0C20  20 4B 19           JSR DECSL
00478  0C23  38                 SEC
00479  0C24  AD 22 08           LDA SELECT
00480  0C27  ED 4F 08           SBC ADRS
00481  0C2A  8D 22 08           STA SELECT
00482  0C2D  AD 23 08           LDA SELECT+1






DISASSEMBLER64......PAGE 0013

LINE# LOC   CODE        LINE


00483  0C30  ED 50 08           SBC ADRS+1
00484  0C33  8D 23 08           STA SELECT+1
00485  0C36              ;*********************************
00486  0C36              ; CALCULATE ADDRESS OFFSET
00487  0C36              ;*********************************
00488  0C36  38                 SEC
00489  0C37  AD 22 08           LDA SELECT
00490  0C3A  ED 1E 08           SBC SA
00491  0C3D  8D 24 08           STA OFFSET
00492  0C40  8D 45 08           STA WORKED
00493  0C43  AD 23 08           LDA SELECT+1
00494  0C46  ED 1F 08           SBC SA+1
00495  0C49  8D 25 08           STA OFFSET+1
00496  0C4C  8D 46 08           STA WORKED+1
00497  0C4F  A9 B6              LDA #<MSD4A
00498  0C51  A0 10              LDY #>MSD4A
00499  0C53  20 C4 13           JSR STRPNT
00500  0C56  20 CB 18           JSR PWORKD
00501  0C59  20 FC 18           JSR CRLF
00502  0C5C              ;*********************************
00503  0C5C              ; OPEN FILE AND READ PRG INTO BUF
00504  0C5C              ;*********************************
00505  0C5C  20 8E 0C           JSR PRFILE      ;OPEN FILE
00506  0C5F  A2 08              LDX #$08        ;FILE #8
00507  0C61  20 C6 FF           JSR CHKIN       ;INPUT FILE
00508  0C64  20 CF FF           JSR CHRIN       ;GET LOW BYTE SA
00509  0C67  20 CF FF           JSR CHRIN       ;GET HIGH BYTE SA
00510  0C6A  20 CF FF    PRO2RD JSR CHRIN       ;INPUT BYTE
00511  0C6D  AE 22 08           LDX SELECT      ;LOW BYTE POINTER
00512  0C70  86 02              STX ZEROUR      ;ZERO PAGE
00513  0C72  AE 23 08           LDX SELECT+1    ;HIH BYTE POINTER
00514  0C75  86 03              STX ZEROUR+1    ;ZERO PAGE
00515  0C77  A0 00              LDY #$00        ;OFFSET
00516  0C79  91 02              STA (ZEROUR),Y  ;STORE BYTE
00517  0C7B  20 2C 19           JSR INCSL       ;INC POINTER
00518  0C7E  20 B7 FF           JSR READST      ;READ STATUS
00519  0C81  F0 E7              BEQ PRO2RD      ;NEXT BYTE
00520  0C83  A9 08              LDA #$08        ;FILE #8
00521  0C85  20 C3 FF           JSR CLOSE       ;CLOSE IT
00522  0C88  20 CC FF           JSR CLRCHN      ;RESET I/O
00523  0C8B  4C 10 0D           JMP WINDOP      ;WINDOW OPTION
00524  0C8E              ;*********************************
00525  0C8E              ; OPEN PROGRAM FILE
00526  0C8E              ;*********************************
00527  0C8E  AD 52 08    PRFILE LDA SAVA
00528  0C91  A2 5C              LDX #<BUF
00529  0C93  A0 08              LDY #>BUF
00530  0C95  20 BD FF           JSR SETNAM
00531  0C98  A9 08              LDA #$08
00532  0C9A  A8                 TAY
00533  0C9B  AA                 TAX
00534  0C9C  20 BA FF           JSR SETLFS
00535  0C9F  20 C0 FF           JSR OPEN
00536  0CA2  20 CD 12           JSR DISERR
00537  0CA5  90 0C              BCC PROGOK






DISASSEMBLER64......PAGE 0014

LINE# LOC   CODE        LINE


00538  0CA7  A9 08              LDA #$08
00539  0CA9  20 C3 FF           JSR CLOSE
00540  0CAC  68                 PLA
00541  0CAD  68                 PLA
00542  0CAE  68                 PLA
00543  0CAF  68                 PLA
00544  0CB0  4C 91 E3           JMP WREADY
00545  0CB3              ;*********************************
00546  0CB3  60          PROGOK RTS
00547  0CB4              ;*********************************
00548  0CB4              ; INIT DISK
00549  0CB4              ;*********************************
00550  0CB4  A9 02       INITD  LDA #$02
00551  0CB6  A0 10              LDY #>INIT
00552  0CB8  A2 5F              LDX #<INIT
00553  0CBA  20 BD FF           JSR SETNAM
00554  0CBD  A9 0F              LDA #$0F
00555  0CBF  A2 08              LDX #$08
00556  0CC1  A0 0F              LDY #$0F
00557  0CC3  20 BA FF           JSR SETLFS
00558  0CC6  20 C0 FF           JSR OPEN
00559  0CC9  A9 0F              LDA #$0F
00560  0CCB  4C C3 FF           JMP CLOSE
00561  0CCE              ;*********************************
00562  0CCE              ; GET START ADDRESS
00563  0CCE              ;*********************************
00564  0CCE  A9 7A       STARTS LDA #<MSD1
00565  0CD0  A0 10              LDY #>MSD1
00566  0CD2  20 C4 13           JSR STRPNT
00567  0CD5  20 34 13           JSR GETWRD
00568  0CD8  AD 4F 08           LDA ADRS
00569  0CDB  8D 1E 08           STA SA
00570  0CDE  AD 50 08           LDA ADRS+1
00571  0CE1  8D 1F 08           STA SA+1
00572  0CE4              ;*********************************
00573  0CE4              ; GET END ADDRESS
00574  0CE4              ;*********************************
00575  0CE4  A9 8C              LDA #<MSD2
00576  0CE6  A0 10              LDY #>MSD2
00577  0CE8  20 C4 13           JSR STRPNT
00578  0CEB  20 34 13           JSR GETWRD
00579  0CEE  AD 4F 08           LDA ADRS
00580  0CF1  8D 20 08           STA EA
00581  0CF4  AD 50 08           LDA ADRS+1
00582  0CF7  8D 21 08           STA EA+1
00583  0CFA              ;*********************************
00584  0CFA              ; ADDRRESS OFFSET
00585  0CFA              ;*********************************
00586  0CFA  A9 9C              LDA #<MSD4
00587  0CFC  A0 10              LDY #>MSD4
00588  0CFE  20 C4 13           JSR STRPNT
00589  0D01  20 34 13           JSR GETWRD
00590  0D04  AD 4F 08           LDA ADRS
00591  0D07  8D 24 08           STA OFFSET
00592  0D0A  AD 50 08           LDA ADRS+1






DISASSEMBLER64......PAGE 0015

LINE# LOC   CODE        LINE


00593  0D0D  8D 25 08           STA OFFSET+1
00594  0D10              ;*********************************
00595  0D10              ; OUTPUT WINDOW
00596  0D10              ;*********************************
00597  0D10  A9 C9       WINDOP LDA #<MSD5
00598  0D12  A0 10              LDY #>MSD5
00599  0D14  20 C4 13           JSR STRPNT
00600  0D17  20 99 13           JSR CRNO
00601  0D1A  B0 30              BCS WIND1
00602  0D1C  A9 7A              LDA #<MSD1
00603  0D1E  A0 10              LDY #>MSD1
00604  0D20  20 C4 13           JSR STRPNT
00605  0D23  20 34 13           JSR GETWRD
00606  0D26  AD 4F 08           LDA ADRS
00607  0D29  8D 2A 08           STA SAOUT
00608  0D2C  AD 50 08           LDA ADRS+1
00609  0D2F  8D 2B 08           STA SAOUT+1
00610  0D32  A9 8C              LDA #<MSD2
00611  0D34  A0 10              LDY #>MSD2
00612  0D36  20 C4 13           JSR STRPNT
00613  0D39  20 34 13           JSR GETWRD
00614  0D3C  AD 4F 08           LDA ADRS
00615  0D3F  8D 2C 08           STA EAOUT
00616  0D42  AD 50 08           LDA ADRS+1
00617  0D45  8D 2D 08           STA EAOUT+1
00618  0D48  A9 FF              LDA #$FF
00619  0D4A  30 02              BMI WIND2
00620  0D4C  A9 00       WIND1  LDA #$00
00621  0D4E  8D 1B 08    WIND2  STA WINDOW
00622  0D51              ;*********************************
00623  0D51              ; SETUP GOBAL POINTER
00624  0D51              ;*********************************
00625  0D51  AD 1E 08           LDA SA
00626  0D54  8D 26 08           STA SAGOL
00627  0D57  AD 1F 08           LDA SA+1
00628  0D5A  8D 27 08           STA SAGOL+1
00629  0D5D  AD 20 08           LDA EA
00630  0D60  8D 28 08           STA EAGOL
00631  0D63  AD 21 08           LDA EA+1
00632  0D66  8D 29 08           STA EAGOL+1
00633  0D69              ;*********************************
00634  0D69              ; SOURCE FILE OUTPUT?
00635  0D69              ;*********************************
00636  0D69  A9 3A       OUFILE LDA #<MSG1
00637  0D6B  A0 10              LDY #>MSG1
00638  0D6D  20 C4 13           JSR STRPNT
00639  0D70              ;*********************************
00640  0D70  A9 00              LDA #$00
00641  0D72  8D C3 08           STA NCHARS
00642  0D75  20 25 13           JSR INSTNG
00643  0D78  F0 1A              BEQ NOFILE
00644  0D7A  A9 30              LDA #'0'
00645  0D7C  8D C2 08           STA VERSON
00646  0D7F  8C C3 08           STY NCHARS
00647  0D82  A2 00              LDX #$00






DISASSEMBLER64......PAGE 0016

LINE# LOC   CODE        LINE


00648  0D84  BD 5C 08    GFILE0 LDA BUF,X
00649  0D87  9D C4 08           STA NBUF,X
00650  0D8A  E8                 INX
00651  0D8B  EC C3 08           CPX NCHARS
00652  0D8E  D0 F4              BNE GFILE0
00653  0D90              ;*********************************
00654  0D90  A9 08       FILEOK LDA #$08
00655  0D92  D0 02              BNE FILE
00656  0D94  A9 00       NOFILE LDA #$00
00657  0D96  0D 1A 08    FILE   ORA OUTPUT
00658  0D99  8D 1A 08           STA OUTPUT
00659  0D9C  4C F5 0D           JMP PRTGET
00660  0D9F              ;*********************************
00661  0D9F              ;     OPEN SOURCE DISK FILE
00662  0D9F              ;*********************************
00663  0D9F  AC C3 08    OFILED LDY NCHARS
00664  0DA2  F0 03              BEQ NOID
00665  0DA4  20 B4 0C           JSR INITD
00666  0DA7  20 01 15    NOID   JSR SCROFF
00667  0DAA              ;*********************************
00668  0DAA  AC C3 08    OFILE  LDY NCHARS
00669  0DAD  F0 45              BEQ OFILE4
00670  0DAF  AD C2 08           LDA VERSON
00671  0DB2  C9 30              CMP #'0'
00672  0DB4  F0 07              BEQ OFILE1
00673  0DB6  AD C2 08           LDA VERSON
00674  0DB9  99 C4 08           STA NBUF,Y
00675  0DBC  C8                 INY
00676  0DBD  EE C2 08    OFILE1 INC VERSON
00677  0DC0  A2 00              LDX #$00
00678  0DC2  BD 57 10    OFILE2 LDA WRITE,X
00679  0DC5  99 C4 08           STA NBUF,Y
00680  0DC8  C8                 INY
00681  0DC9  E8                 INX
00682  0DCA  E0 04              CPX #$04
00683  0DCC  D0 F4              BNE OFILE2
00684  0DCE  98                 TYA
00685  0DCF  A0 08              LDY #>NBUF
00686  0DD1  A2 C4              LDX #<NBUF
00687  0DD3  20 BD FF           JSR SETNAM
00688  0DD6  A9 08              LDA #$08
00689  0DD8  AA                 TAX
00690  0DD9  A8                 TAY
00691  0DDA  20 BA FF           JSR SETLFS
00692  0DDD  20 C0 FF           JSR OPEN
00693  0DE0  20 CD 12           JSR DISERR
00694  0DE3  90 0F              BCC OFILE4
00695  0DE5              ;*********************************
00696  0DE5              ;  CLOSE OUT FILE ON ERROR
00697  0DE5              ;*********************************
00698  0DE5  A9 08       OFILE3 LDA #$08
00699  0DE7  20 C3 FF           JSR CLOSE
00700  0DEA  20 CC FF           JSR CLRCHN
00701  0DED  68                 PLA
00702  0DEE  68                 PLA






DISASSEMBLER64......PAGE 0017

LINE# LOC   CODE        LINE


00703  0DEF  68                 PLA
00704  0DF0  68                 PLA
00705  0DF1  4C 91 E3           JMP WREADY
00706  0DF4  60          OFILE4 RTS
00707  0DF5              ;*********************************
00708  0DF5              ; GET PRINTER OPTION
00709  0DF5              ;*********************************
00710  0DF5  A9 61       PRTGET LDA #<MSG2
00711  0DF7  A0 10              LDY #>MSG2
00712  0DF9  20 C4 13           JSR STRPNT
00713  0DFC  20 8C 13           JSR CRYS
00714  0DFF  B0 26              BCS NOPRT
00715  0E01  A9 00              LDA #$00
00716  0E03  20 BD FF           JSR SETNAM
00717  0E06  A9 04              LDA #$04
00718  0E08  A2 04              LDX #$04
00719  0E0A  A0 00              LDY #$00
00720  0E0C  20 BA FF           JSR SETLFS
00721  0E0F  20 C0 FF           JSR OPEN
00722  0E12  A2 04              LDX #$04
00723  0E14  20 C9 FF           JSR CHKOUT
00724  0E17  20 B7 FF           JSR READST
00725  0E1A  29 80              AND #$80
00726  0E1C  08                 PHP
00727  0E1D  20 CC FF           JSR CLRCHN
00728  0E20  28                 PLP
00729  0E21  30 04              BMI NOPRT
00730  0E23  A9 04              LDA #$04
00731  0E25  D0 02              BNE PRINT
00732  0E27  A9 03       NOPRT  LDA #$03
00733  0E29  0D 1A 08    PRINT  ORA OUTPUT
00734  0E2C  8D 1A 08           STA OUTPUT
00735  0E2F              ;*********************************
00736  0E2F              ; GO GET SYMBOLIC OPTION
00737  0E2F              ;*********************************
00738  0E2F  20 C9 22           JSR SOP
00739  0E32              ;*********************************
00740  0E32              ; GET RELATIVE ADDRESS OPTION
00741  0E32              ;*********************************
00742  0E32  A9 E5              LDA #<MSR1
00743  0E34  A0 10              LDY #>MSR1
00744  0E36  20 C4 13           JSR STRPNT
00745  0E39  20 8C 13           JSR CRYS
00746  0E3C  90 04              BCC DOP2
00747  0E3E  A9 01              LDA #$01
00748  0E40  D0 02              BNE DOP3
00749  0E42  A9 00       DOP2   LDA #$00
00750  0E44  8D 18 08    DOP3   STA ROPT
00751  0E47              ;*********************************
00752  0E47              ; GET BIT INSTRUCTION CODING OPTION
00753  0E47              ;*********************************
00754  0E47  20 4B 2F           JSR BITOPT
00755  0E4A              ;*********************************
00756  0E4A              ; DATA TABLE OPTION
00757  0E4A              ;*********************************






DISASSEMBLER64......PAGE 0018

LINE# LOC   CODE        LINE


00758  0E4A  AD 3D 08    AOP    LDA SYMBOE
00759  0E4D  8D EB 08           STA DATABP
00760  0E50  8D ED 08           STA DATABS
00761  0E53  8D EF 08           STA DATABE
00762  0E56  85 02              STA ZEROUR
00763  0E58  AD 3E 08           LDA SYMBOE+1
00764  0E5B  8D EC 08           STA DATABP+1
00765  0E5E  8D EE 08           STA DATABS+1
00766  0E61  8D F0 08           STA DATABE+1
00767  0E64  85 03              STA ZEROUR+1
00768  0E66              ;*********************************
00769  0E66  A9 73              LDA #<MSAOP
00770  0E68  A0 11              LDY #>MSAOP
00771  0E6A  20 C4 13           JSR STRPNT
00772  0E6D  20 25 13           JSR INSTNG
00773  0E70  D0 03              BNE BOP
00774  0E72  4C F5 0E           JMP NOTABS
00775  0E75              ;*********************************
00776  0E75  98          BOP    TYA
00777  0E76  48                 PHA
00778  0E77  20 B4 0C           JSR INITD
00779  0E7A  68                 PLA
00780  0E7B  A8                 TAY
00781  0E7C  A2 00              LDX #$00
00782  0E7E  BD 32 26    AFILE  LDA NAMS,X
00783  0E81  99 5C 08           STA BUF,Y
00784  0E84  C8                 INY
00785  0E85  E8                 INX
00786  0E86  E0 04              CPX #$04
00787  0E88  D0 F4              BNE AFILE
00788  0E8A  98                 TYA
00789  0E8B  A0 08              LDY #>BUF
00790  0E8D  A2 5C              LDX #<BUF
00791  0E8F  20 BD FF           JSR SETNAM
00792  0E92  A9 03              LDA #$03
00793  0E94  A2 08              LDX #$08
00794  0E96  A0 03              LDY #$03
00795  0E98  20 BA FF           JSR SETLFS
00796  0E9B  20 C0 FF           JSR OPEN
00797  0E9E  20 CD 12           JSR DISERR
00798  0EA1  B0 1B              BCS AGET1
00799  0EA3  A2 03              LDX #$03
00800  0EA5  20 C6 FF           JSR CHKIN
00801  0EA8              ;*********************************
00802  0EA8              ; READ IN DATA TABLE
00803  0EA8              ;*********************************
00804  0EA8  A0 00              LDY #$00
00805  0EAA  20 CF FF           JSR CHRIN
00806  0EAD  8D E9 08           STA NDATA
00807  0EB0  F0 0C              BEQ AGET1
00808  0EB2  20 CF FF    AGET   JSR CHRIN
00809  0EB5  99 F1 08           STA TDATA,Y
00810  0EB8  C8                 INY
00811  0EB9  20 B7 FF           JSR READST
00812  0EBC  F0 F4              BEQ AGET






DISASSEMBLER64......PAGE 0019

LINE# LOC   CODE        LINE


00813  0EBE  A9 03       AGET1  LDA #$03
00814  0EC0  20 C3 FF           JSR CLOSE
00815  0EC3  20 CC FF           JSR CLRCHN
00816  0EC6              ;*********************************
00817  0EC6              ; PRINT DATA TABLE
00818  0EC6              ;*********************************
00819  0EC6  AD E9 08    PRTDAS LDA NDATA
00820  0EC9  8D E7 08           STA CDATA
00821  0ECC  A0 00              LDY #$00
00822  0ECE  8C 54 08           STY SAVY
00823  0ED1  20 FC 18    PRTNEX JSR CRLF
00824  0ED4  A2 05              LDX #$05
00825  0ED6  8E 53 08           STX SAVX
00826  0ED9  AC 54 08    PRTDAL LDY SAVY
00827  0EDC  B9 F1 08           LDA TDATA,Y
00828  0EDF  20 AE 13           JSR PRBYT
00829  0EE2  20 0E 19           JSR SPACE
00830  0EE5  EE 54 08           INC SAVY
00831  0EE8  CE 53 08           DEC SAVX
00832  0EEB  D0 EC              BNE PRTDAL
00833  0EED  CE E7 08           DEC CDATA
00834  0EF0  D0 DF              BNE PRTNEX
00835  0EF2              ;*********************************
00836  0EF2  4C 92 0F           JMP XOP0
00837  0EF5              ;*********************************
00838  0EF5              ; READ DATA FOR KEYBOARD
00839  0EF5              ;*********************************
00840  0EF5  A9 92       NOTABS LDA #<MSA1      ;NUMBER OF DATA
00841  0EF7  A0 11              LDY #>MSA1
00842  0EF9  20 C4 13           JSR STRPNT
00843  0EFC  20 34 13           JSR GETWRD      ;INPUT HEX BYTE
00844  0EFF  AD 4F 08           LDA ADRS        ;GET BYTE
00845  0F02  8D E9 08           STA NDATA       ;SET NUM TABLES
00846  0F05  D0 03              BNE AOPX        ;0 DATA THEN END
00847  0F07  4C 92 0F           JMP XOP0        ;RETURN
00848  0F0A  A9 00       AOPX   LDA #$00        ;ZERO OFFSET
00849  0F0C  8D E7 08           STA CDATA       ;FIRST TABLE
00850  0F0F              ;*********************************
00851  0F0F              ; CALCULATE TABLE OFFSET
00852  0F0F              ;*********************************
00853  0F0F  AD E7 08    AOP1   LDA CDATA       ;GET TABLE NUMBER
00854  0F12  0A                 ASL A           ;*2
00855  0F13  0A                 ASL A           ;*4
00856  0F14  18                 CLC             ;C=0
00857  0F15  6D E7 08           ADC CDATA       ;*5
00858  0F18  8D 54 08           STA SAVY        ;STORE AS OFFSET
00859  0F1B              ;*********************************
00860  0F1B  A9 B4              LDA #<MSA2
00861  0F1D  A0 11              LDY #>MSA2
00862  0F1F  20 C4 13           JSR STRPNT      ;PRINT MSG
00863  0F22  20 34 13           JSR GETWRD      ;GET ADDRESS
00864  0F25  AC 54 08           LDY SAVY        ;GET OFFSET
00865  0F28  AD 4F 08           LDA ADRS
00866  0F2B  99 F1 08           STA TDATA,Y
00867  0F2E  C8                 INY






DISASSEMBLER64......PAGE 0020

LINE# LOC   CODE        LINE


00868  0F2F  AD 50 08           LDA ADRS+1
00869  0F32  99 F1 08           STA TDATA,Y
00870  0F35  C8                 INY
00871  0F36  8C 54 08           STY SAVY
00872  0F39              ;*********************************
00873  0F39              ; END OF DATA TABLE
00874  0F39              ;*********************************
00875  0F39  A9 CC       AOP2   LDA #<MSA3
00876  0F3B  A0 11              LDY #>MSA3
00877  0F3D  20 C4 13           JSR STRPNT
00878  0F40  20 34 13           JSR GETWRD      ;GET ADDRESS
00879  0F43  AC 54 08           LDY SAVY
00880  0F46  AD 4F 08           LDA ADRS
00881  0F49  99 F1 08           STA TDATA,Y
00882  0F4C  C8                 INY
00883  0F4D  AD 50 08           LDA ADRS+1
00884  0F50  99 F1 08           STA TDATA,Y
00885  0F53  C8                 INY
00886  0F54  8C 54 08           STY SAVY
00887  0F57              ;*********************************
00888  0F57              ; GET TYPE OF TABLE
00889  0F57              ;*********************************
00890  0F57  A9 E2              LDA #<MSG5      ;TABLE TYPE
00891  0F59  A0 11              LDY #>MSG5
00892  0F5B  20 C4 13           JSR STRPNT
00893  0F5E  20 E4 FF    AOP3   JSR GETIN
00894  0F61  F0 FB              BEQ AOP3
00895  0F63  C9 30              CMP #'0'
00896  0F65  F0 14              BEQ ASC
00897  0F67  C9 31              CMP #'1'
00898  0F69  F0 10              BEQ ASC
00899  0F6B  C9 32              CMP #'2'
00900  0F6D  F0 0C              BEQ ASC
00901  0F6F  C9 33              CMP #'3'
00902  0F71  F0 08              BEQ ASC
00903  0F73  C9 34              CMP #'4'
00904  0F75  F0 04              BEQ ASC
00905  0F77  C9 53              CMP #'S'
00906  0F79  D0 E3              BNE AOP3
00907  0F7B  20 D2 FF    ASC    JSR CHROUT
00908  0F7E  AC 54 08           LDY SAVY
00909  0F81  99 F1 08           STA TDATA,Y
00910  0F84              ;*********************************
00911  0F84  EE E7 08           INC CDATA       ;INC TABLE COUNT
00912  0F87  AD E7 08           LDA CDATA       ;GET TABLE COUNT
00913  0F8A  CD E9 08           CMP NDATA       ;ALL TABLES?
00914  0F8D  F0 03              BEQ XOP0        ;IF NOT GET MORE
00915  0F8F  4C 0F 0F           JMP AOP1        ;IF NOT GET MORE
00916  0F92              ;*********************************
00917  0F92              ; GET LABEL GENERATION OPTION
00918  0F92              ;*********************************
00919  0F92  A9 4E       XOP0   LDA #<MSB4
00920  0F94  A0 12              LDY #>MSB4
00921  0F96  20 C4 13           JSR STRPNT
00922  0F99  20 8C 13           JSR CRYS






DISASSEMBLER64......PAGE 0021

LINE# LOC   CODE        LINE


00923  0F9C  B0 04              BCS XOP1
00924  0F9E  A9 01              LDA #$01
00925  0FA0  D0 02              BNE XOP2
00926  0FA2  A9 00       XOP1   LDA #$00
00927  0FA4  8D 17 08    XOP2   STA XOPT
00928  0FA7              ;*********************************
00929  0FA7              ; OUTPUT FORMAT OPTION
00930  0FA7              ;*********************************
00931  0FA7  A9 6E              LDA #<MSB5
00932  0FA9  A0 12              LDY #>MSB5
00933  0FAB  20 C4 13           JSR STRPNT
00934  0FAE  20 8C 13           JSR CRYS
00935  0FB1  B0 04              BCS FOP1
00936  0FB3  A9 00              LDA #$00
00937  0FB5  F0 02              BEQ FOP2
00938  0FB7  A9 FF       FOP1   LDA #$FF
00939  0FB9  8D 1C 08    FOP2   STA FOROPT
00940  0FBC              ;*********************************
00941  0FBC  60                 RTS
00942  0FBD              ;*********************************
00943  0FBD              ;   COMMAND MESSAGES
00944  0FBD              ;*********************************
00945  0FBD  0D          MSG    .BYTE $0D,$0D
00945  0FBE  0D 
00946  0FBF  43 42       .BYTE  'CBM RESIDENT DISASSEMBLER'
00947  0FD8  20 56       .BYTE  ' V080282'
00948  0FE0  0D          .BYTE  $0D
00949  0FE1  28 43       .BYTE  '(C) 1982 BY COMMODORE '
00950  0FF7  42 55       .BYTE  'BUSINESS MACHINES'
00951  1008  0D          .BYTE  $0D
00952  1009  00          .BYTE  0
00953  100A              ;*********************************
00954  100A  0D          MSF1   .BYTE $0D
00955  100B  50 52       .BYTE  'PROGRAM FILE (CR OR NAME):'
00956  1025  00          .BYTE  0
00957  1026  0D          MSF2   .BYTE $0D
00958  1027  50 52       .BYTE  'PROGRAM ADDRESS: $'
00959  1039  00          .BYTE  0
00960  103A              ;*********************************
00961  103A  0D          MSG1   .BYTE $0D
00962  103B  45 44       .BYTE  'EDITOR64 FILE (CR OR NAME):'
00963  1056  00          .BYTE  0
00964  1057              ;*********************************
00965  1057  2C 53       WRITE  .BYTE ',S,W'
00966  105B  2C 50       PROGM  .BYTE ',P,R'
00967  105F  49 30       INIT   .BYTE 'I0'
00968  1061              ;*********************************
00969  1061  0D          MSG2   .BYTE $0D
00970  1062  48 41       .BYTE  'HARD COPY (Y/CR OR N)? '
00971  1079  00          .BYTE  0
00972  107A              ;*********************************
00973  107A  0D          MSD1   .BYTE $0D
00974  107B  53 54       .BYTE  'START ADDRESS :$'
00975  108B  00          .BYTE  0
00976  108C              ;*********************************






DISASSEMBLER64......PAGE 0022

LINE# LOC   CODE        LINE


00977  108C  0D          MSD2   .BYTE $0D
00978  108D  45 4E       .BYTE  'END ADDRESS :$'
00979  109B  00          .BYTE  0
00980  109C              ;*********************************
00981  109C  0D          MSD4   .BYTE $0D
00982  109D  41 44       .BYTE  'ADDRESS OFFSET (OR CR):$'
00983  10B5  00          .BYTE  0
00984  10B6              ;*********************************
00985  10B6  0D          MSD4A  .BYTE $0D
00986  10B7  41 44       .BYTE  'ADDRESS OFFSET :$'
00987  10C8  00          .BYTE  0
00988  10C9              ;*********************************
00989  10C9  0D          MSD5   .BYTE $0D
00990  10CA  57 49       .BYTE  'WINDOW OUTPUT(Y OR N/CR)? '
00991  10E4  00          .BYTE  0
00992  10E5              ;*********************************
00993  10E5  0D          MSR1   .BYTE $0D
00994  10E6  52 45       .BYTE  'RELATIVE BRANCH TO LABEL '
00995  10FF  28 59       .BYTE  '(Y/CR OR N)? '
00996  110C  00          .BYTE  0
00997  110D              ;*********************************
00998  110D  0D          MSB1   .BYTE $0D
00999  110E  42 49              .BYTE 'BIT INSTRUCTION CODING'
01000  1124  0D                 .BYTE $0D,$0D
01000  1125  0D 
01001  1126  30 2F              .BYTE '0/CR STANDARD',$0D
01001  1133  0D 
01002  1134  31 20              .BYTE '1     $2C ABS',$0D
01002  1141  0D 
01003  1142  32 20              .BYTE '2     $24 ZP',$0D
01003  114E  0D 
01004  114F  33 20              .BYTE '3     $2C AND $24',$0D
01004  1160  0D 
01005  1161  0D                 .BYTE $0D
01006  1162  45 4E              .BYTE 'ENTER BIT CODE: '
01007  1172  00                 .BYTE 0
01008  1173              ;*********************************
01009  1173  0D          MSAOP  .BYTE $0D
01010  1174  44 41       .BYTE  'DATA TABLE FILE (CR OR NAME):'
01011  1191  00          .BYTE  0
01012  1192  0D          MSA1   .BYTE $0D
01013  1193  4E 55       .BYTE  'NUMBER OF DATA TABLES (OR CR) :$'
01014  11B3  00          .BYTE  0
01015  11B4  0D          MSA2   .BYTE $0D
01016  11B5  54 41       .BYTE  'TABLE START ADDRESS :$'
01017  11CB  00          .BYTE  0
01018  11CC  0D          MSA3   .BYTE $0D
01019  11CD  54 41       .BYTE  'TABLE END ADDRESS :$'
01020  11E1  00          .BYTE  0
01021  11E2  0D          MSG5   .BYTE $0D,$0D
01021  11E3  0D 
01022  11E4  44 49              .BYTE 'DISASSEMBLY OPTIONS'
01023  11F7  0D                 .BYTE $0D,$0D
01023  11F8  0D 
01024  11F9  30 20              .BYTE '0 ASCII',$0D






DISASSEMBLER64......PAGE 0023

LINE# LOC   CODE        LINE


01024  1200  0D 
01025  1201  31 20              .BYTE '1 BYTE',$0D
01025  1207  0D 
01026  1208  32 20              .BYTE '2 WORD',$0D
01026  120E  0D 
01027  120F  33 20              .BYTE '3 DBYTE',$0D
01027  1216  0D 
01028  1217  34 20              .BYTE '4 WORD-1',$0D
01028  121F  0D 
01029  1220  53 20              .BYTE 'S SKIP ADDRESS RANGE',$0D
01029  1234  0D 
01030  1235  45 4E              .BYTE 'ENTER DISASSEMBLY CODE: '
01031  124D  00                 .BYTE 0
01032  124E              ;*********************************
01033  124E  0D          MSB4   .BYTE $0D
01034  124F  4C 41       .BYTE  'LABLE GENERATION (Y/CR OR N)? '
01035  126D  00          .BYTE  0
01036  126E              ;*********************************
01037  126E  0D          MSB5   .BYTE $0D
01038  126F  46 4F       .BYTE  'FORMATED LISTING (Y/CR OR N)? '
01039  128D  00          .BYTE  0
01040  128E              ;*********************************
01041  128E              ;.FIL 0:UTIL.ASM
01042  128E              ;*********************************
01043  128E              ;.END
01044  128E              ;*********************************
01045  128E              ; FILE UTIL.ASM
01046  128E              ;*********************************
01047  128E              ;
01048  128E              ;        DISASSEMBLER64
01049  128E              ;    SYMBOLIC DISASSEMBLER
01050  128E              ;       BY DENTON MARLOWE
01051  128E              ;
01052  128E              ;  (C)1986 BY DENTON MARLOWE
01053  128E              ;
01054  128E              ;*********************************
01055  128E              ;      *** UTILITIES ***
01056  128E              ;*********************************
01057  128E              ; CHECK LINE COUNT FOR OUTPUT FILE
01058  128E              ;*********************************
01059  128E  AD 12 08    LINECK LDA PASS
01060  1291  CD 15 08           CMP CPASS
01061  1294  D0 36              BNE LINECO
01062  1296  AD 19 08           LDA DEVICE
01063  1299  29 08              AND #$08
01064  129B  F0 2F              BEQ LINECO
01065  129D              ;*********************************
01066  129D              ; CLOSE SOURCE FILE AND OPEN NEXT
01067  129D              ;*********************************
01068  129D  38                 SEC
01069  129E  AD C0 08           LDA LINEFL
01070  12A1  E9 20              SBC #$20
01071  12A3  8D 51 08           STA TEMP
01072  12A6  AD C1 08           LDA LINEFL+1
01073  12A9  E9 03              SBC #$03






DISASSEMBLER64......PAGE 0024

LINE# LOC   CODE        LINE


01074  12AB  0D 51 08           ORA TEMP
01075  12AE  90 1C              BCC LINECO
01076  12B0              ; NOP
01077  12B0              ; NOP
01078  12B0              ; NOP
01079  12B0  20 95 2F           JSR OUTFIL
01080  12B3              ;
01081  12B3  20 5A 18           JSR EFILE
01082  12B6  A9 08              LDA #$08
01083  12B8  20 C3 FF           JSR CLOSE
01084  12BB  20 AA 0D           JSR OFILE
01085  12BE  A9 00              LDA #$00
01086  12C0  8D C0 08           STA LINEFL
01087  12C3  8D C1 08           STA LINEFL+1
01088  12C6  20 44 18           JSR ORGIN
01089  12C9  20 6A 18           JSR COMENT
01090  12CC  60          LINECO RTS
01091  12CD              ;*********************************
01092  12CD              ;  DISK ERROR CHECK
01093  12CD              ;*********************************
01094  12CD  A9 08       DISERR LDA #$08        ;DEV #8
01095  12CF  85 BA              STA $BA         ;PUT IN DEV TABLE
01096  12D1  20 B4 FF           JSR $FFB4       ;SEND TALK
01097  12D4  A9 6F              LDA #$6F        ;SECONDARY ADDRESS
01098  12D6  85 B9              STA $B9         ;PUT IN TABLE
01099  12D8  20 96 FF           JSR $FF96       ;SEND SEC
01100  12DB  20 A5 FF           JSR $FFA5       ;GET FIRST BYTE
01101  12DE  C9 30              CMP #$30        ;IS IT A ZERO
01102  12E0  D0 0C              BNE DLOOC       ;IF NOT ZERO ERROR
01103  12E2  20 A5 FF    DLOOE  JSR $FFA5       ;GET BYTE
01104  12E5  C9 0D              CMP #$0D        ;IS IT CR?
01105  12E7  D0 F9              BNE DLOOE       ;GET NEXT BYTE
01106  12E9  20 AB FF           JSR $FFAB       ;UNTALK
01107  12EC  18                 CLC             ;NO ERROR FLAG
01108  12ED  60                 RTS             ;RETURN
01109  12EE              ;*********************************
01110  12EE              ; PRINT DISK ERROR
01111  12EE              ;*********************************
01112  12EE  48          DLOOC  PHA             ;STACK BYTE
01113  12EF  A9 0D              LDA #$0D        ;ASCII CR
01114  12F1  20 D2 FF           JSR CHROUT      ;PRINT IT
01115  12F4  68                 PLA             ;GET BYTE
01116  12F5  20 D2 FF           JSR CHROUT      ;PRINT IT
01117  12F8  20 A5 FF    DLOOA  JSR $FFA5       ;GET NEXT BYTE
01118  12FB  20 D2 FF           JSR CHROUT      ;PRINT IT
01119  12FE  C9 0D              CMP #$0D        ;IS IT CR
01120  1300  D0 F6              BNE DLOOA       ;GET NEXT BYTE
01121  1302  20 AB FF           JSR $FFAB       ;UNTALK
01122  1305  38                 SEC             ;SET ERROR FLAG
01123  1306  60                 RTS             ;RETURN
01124  1307              ;*********************************
01125  1307              ; START NEW LINE AND INC COUNT
01126  1307              ;*********************************
01127  1307  EE 58 08    NEWLIN INC LINECT
01128  130A  D0 03              BNE *+5






DISASSEMBLER64......PAGE 0025

LINE# LOC   CODE        LINE


01129  130C  EE 59 08           INC LINECT+1
01130  130F  EE C0 08           INC LINEFL
01131  1312  D0 03              BNE *+5
01132  1314  EE C1 08           INC LINEFL+1
01133  1317  20 FC 18           JSR CRLF
01134  131A  AD 19 08           LDA DEVICE
01135  131D  29 04              AND #$04
01136  131F  F0 03              BEQ NEWEXT
01137  1321  20 76 14           JSR NEXLIN
01138  1324  60          NEWEXT RTS
01139  1325              ;*********************************
01140  1325              ; INPUT UTILITIES
01141  1325              ;*********************************
01142  1325              ; INPUT STRING ROUTINE
01143  1325              ;*********************************
01144  1325  A0 00       INSTNG LDY #$00
01145  1327  20 CF FF    INSTN1 JSR CHRIN
01146  132A  99 5C 08           STA BUF,Y
01147  132D  C8                 INY
01148  132E  C9 0D              CMP #$0D
01149  1330  D0 F5              BNE INSTN1
01150  1332  88                 DEY
01151  1333  60                 RTS
01152  1334              ;*********************************
01153  1334              ; INPUT HEX CHAR STRING
01154  1334              ;*********************************
01155  1334  A9 00       GETWRD LDA #$00
01156  1336  8D 4F 08           STA ADRS
01157  1339  8D 50 08           STA ADRS+1
01158  133C  20 25 13           JSR INSTNG
01159  133F  88                 DEY
01160  1340  30 15              BMI INEND
01161  1342              ;*********************************
01162  1342              ; PROCESS INPUT
01163  1342              ;*********************************
01164  1342  20 58 13           JSR GETBYT
01165  1345  AD 51 08           LDA TEMP
01166  1348  8D 4F 08           STA ADRS
01167  134B  88                 DEY
01168  134C  30 09              BMI INEND
01169  134E  20 58 13           JSR GETBYT
01170  1351  AD 51 08           LDA TEMP
01171  1354  8D 50 08           STA ADRS+1
01172  1357  60          INEND  RTS
01173  1358              ;*********************************
01174  1358              ; COVERT BUFFER INTO BYTES
01175  1358              ;*********************************
01176  1358  B9 5C 08    GETBYT LDA BUF,Y
01177  135B  20 75 13           JSR BINARY
01178  135E  8D 51 08           STA TEMP
01179  1361  88                 DEY
01180  1362  30 10              BMI INENX
01181  1364  B9 5C 08           LDA BUF,Y
01182  1367  20 75 13           JSR BINARY
01183  136A  0A                 ASL A






DISASSEMBLER64......PAGE 0026

LINE# LOC   CODE        LINE


01184  136B  0A                 ASL A
01185  136C  0A                 ASL A
01186  136D  0A                 ASL A
01187  136E  0D 51 08           ORA TEMP
01188  1371  8D 51 08           STA TEMP
01189  1374  60          INENX  RTS
01190  1375              ;*********************************
01191  1375              ; CONVERT A INTO HEX NIBBLE
01192  1375              ;*********************************
01193  1375  38          BINARY SEC
01194  1376  E9 30              SBC #'0'
01195  1378  90 0E              BCC NOHEX
01196  137A  C9 0A              CMP #$0A
01197  137C  90 0C              BCC YSHEX
01198  137E  E9 07              SBC #$07
01199  1380  C9 10              CMP #$10
01200  1382  B0 04              BCS NOHEX
01201  1384  C9 0A              CMP #$0A
01202  1386  B0 02              BCS YSHEX
01203  1388  38          NOHEX  SEC
01204  1389  60                 RTS
01205  138A  18          YSHEX  CLC
01206  138B  60                 RTS
01207  138C              ;*********************************
01208  138C              ; GET OPTION (CR/Y OR N): Y=C=0
01209  138C              ;*********************************
01210  138C  20 CF FF    CRYS   JSR CHRIN
01211  138F  C9 59              CMP #'Y'
01212  1391  F0 11              BEQ CRYS1
01213  1393  C9 0D              CMP #$0D
01214  1395  F0 0D              BEQ CRYS1
01215  1397  D0 0D              BNE CRNO1
01216  1399              ;*********************************
01217  1399              ; GET OPTION (Y OR CR/N): Y=C=0
01218  1399              ;*********************************
01219  1399  20 CF FF    CRNO   JSR CHRIN
01220  139C  C9 4E              CMP #'N'
01221  139E  F0 06              BEQ CRNO1
01222  13A0  C9 0D              CMP #$0D
01223  13A2  F0 02              BEQ CRNO1
01224  13A4  18          CRYS1  CLC
01225  13A5  60                 RTS
01226  13A6  38          CRNO1  SEC
01227  13A7  60                 RTS
01228  13A8              ;*********************************
01229  13A8              ; PRINT UTILITES
01230  13A8              ;*********************************
01231  13A8              ; PRINT WORD MSB IN Y LSB IN A
01232  13A8              ;*********************************
01233  13A8  48          PRBYTS PHA             ;PUT A ON STACK
01234  13A9  98                 TYA             ;PUT HIH BYTE IN A
01235  13AA  20 AE 13           JSR PRBYT       ;PRINT MSB
01236  13AD  68                 PLA             ;GET LSB
01237  13AE              ;*********************************
01238  13AE              ; PRINT BYTE IN A






DISASSEMBLER64......PAGE 0027

LINE# LOC   CODE        LINE


01239  13AE              ;*********************************
01240  13AE  48          PRBYT  PHA             ;PUT BYTE ON STACK
01241  13AF  4A                 LSR A           ;4 RIGHT SHIFTS
01242  13B0  4A                 LSR A           ;TO MOVE HIGH
01243  13B1  4A                 LSR A           ;NIBBLE TO LOW
01244  13B2  4A                 LSR A           ;NIB WITH HIGH 0'S
01245  13B3  A8                 TAY             ;USE AS POINTER
01246  13B4  B9 1A 15           LDA HEXA,Y      ;GET ASCII
01247  13B7  20 1A 14           JSR PCHAR       ;PRINT
01248  13BA  68                 PLA             ;PULL BYTE OUT
01249  13BB  29 0F              AND #$0F        ;MASK HIGH NIBBLE
01250  13BD  A8                 TAY             ;USE AS POINTER
01251  13BE  B9 1A 15           LDA HEXA,Y      ;GET ASCII
01252  13C1  4C 1A 14           JMP PCHAR       ;PRINT
01253  13C4              ;*********************************
01254  13C4              ; STRING OUTPUT ROUTINE
01255  13C4              ;*********************************
01256  13C4  85 02       STRPNT STA ZEROUR      ;POINTER TO
01257  13C6  84 03              STY ZEROUR+1    ;MESSAGE
01258  13C8  A0 00              LDY #$00        ;OFFSET
01259  13CA  B1 02       SOUT   LDA (ZEROUR),Y  ;GET CHAR
01260  13CC  F0 06              BEQ SEXIT       ;IF ZERO EXIT
01261  13CE  20 1A 14           JSR PCHAR       ;PRINT
01262  13D1  C8                 INY             ;INC OFFSET
01263  13D2  D0 F6              BNE SOUT        ;LOOP
01264  13D4  60          SEXIT  RTS             ;RETURN
01265  13D5              ;*********************************
01266  13D5              ; PRINT DEC NUMBER (0000)
01267  13D5              ;*********************************
01268  13D5  86 02       PRTPAG STX ZEROUR      ;LOW  BYTE NUM
01269  13D7  85 03              STA ZEROUR+1    ;HIGH BYTE NUM
01270  13D9  A2 03              LDX #$03        ;4 CHARS
01271  13DB  8E 53 08           STX SAVX        ;SAVE COUNT
01272  13DE  D0 09              BNE PRTNU1      ;BRANCH
01273  13E0              ;*********************************
01274  13E0              ; PRINT DEC NUMBER (00000)
01275  13E0              ;*********************************
01276  13E0  86 02       PRTNUM STX ZEROUR      ;LOW  BYTE NUM
01277  13E2  85 03              STA ZEROUR+1    ;HIGH BYTE NUM
01278  13E4  A2 04              LDX #$04        ;5 CHARS
01279  13E6  8E 53 08           STX SAVX        ;SAVE COUNT
01280  13E9              ;*********************************
01281  13E9              ; PRINT DEC NUMBER AND LEADING 0
01282  13E9              ;*********************************
01283  13E9  AE 53 08    PRTNU1 LDX SAVX
01284  13EC  A0 30              LDY #$30
01285  13EE  D0 01              BNE PRTNU3
01286  13F0  C8          PRTNU2 INY 
01287  13F1  38          PRTNU3 SEC 
01288  13F2  A5 02              LDA ZEROUR
01289  13F4  FD 2A 15           SBC CONST0,X
01290  13F7  85 02              STA ZEROUR
01291  13F9  A5 03              LDA ZEROUR+1
01292  13FB  FD 2F 15           SBC CONST1,X
01293  13FE  85 03              STA ZEROUR+1






DISASSEMBLER64......PAGE 0028

LINE# LOC   CODE        LINE


01294  1400  B0 EE              BCS PRTNU2
01295  1402  A5 02              LDA ZEROUR
01296  1404  7D 2A 15           ADC CONST0,X
01297  1407  85 02              STA ZEROUR
01298  1409  A5 03              LDA ZEROUR+1
01299  140B  7D 2F 15           ADC CONST1,X
01300  140E  85 03              STA ZEROUR+1
01301  1410  98                 TYA
01302  1411  20 1A 14           JSR PCHAR
01303  1414  CE 53 08           DEC SAVX
01304  1417  10 D0              BPL PRTNU1
01305  1419  60                 RTS
01306  141A              ;*********************************
01307  141A              ;  OUTPUT CHAR TO OPEN CHANNEL
01308  141A              ;*********************************
01309  141A  48          PCHAR  PHA             ;SAVE CHAR
01310  141B  AD 19 08           LDA DEVICE      ;GET FILE FLAG
01311  141E  29 08              AND #$08        ;CHECK FOR DISK
01312  1420  F0 0D              BEQ PRIN        ;IF NONE BRANCH
01313  1422  A2 08              LDX #$08        ;DISK FILE #1
01314  1424  20 C9 FF           JSR CHKOUT      ;FILE IS OUTPUT
01315  1427  68                 PLA             ;GET CHAR
01316  1428  48                 PHA             ;RESAVE CHAR
01317  1429  20 D2 FF           JSR CHROUT      ;OUTPUT TO DISK
01318  142C  20 CC FF           JSR CLRCHN      ;RESET OUTPUT
01319  142F  AD 19 08    PRIN   LDA DEVICE      ;GET DEVICE FLAG
01320  1432  29 04              AND #$04        ;CHECK FOR PRINTER
01321  1434  F0 0D              BEQ SCREN       ;IF NOT BRANCH
01322  1436  A2 04              LDX #$04        ;PRINT FILE #4
01323  1438  20 C9 FF           JSR CHKOUT      ;FILE IS OUTPUT
01324  143B  68                 PLA             ;GET CHAR
01325  143C  48                 PHA             ;RESAVE CHAR
01326  143D  20 D2 FF           JSR CHROUT      ;OUTPUT TO PRINTER
01327  1440  20 CC FF           JSR CLRCHN      ;RESET OUTPUT
01328  1443  AD 19 08    SCREN  LDA DEVICE      ;GET DEVICE FLAG
01329  1446  29 03              AND #$03        ;CHECK FOR SCREEN
01330  1448  F0 05              BEQ PEXIT       ;IF NOT BRANCH
01331  144A  68                 PLA             ;GET CHAR
01332  144B  48                 PHA             ;RESAVE CHAR
01333  144C  20 D2 FF           JSR CHROUT      ;OUTPUT TO SCREEN
01334  144F  68          PEXIT  PLA             ;GET CHAR
01335  1450  60                 RTS             ;RETURN
01336  1451              ;*********************************
01337  1451              ; PRINTER OUTPUT ROUTINES
01338  1451              ;*********************************
01339  1451              ; FINISH OUT PAGE WITH CR
01340  1451              ;*********************************
01341  1451  20 64 14    FINISH JSR CRLFPR      ;PRINT CR
01342  1454  EE 57 08           INC LISTCT      ;INC LINE COUNT
01343  1457  AD 57 08           LDA LISTCT      ;GET COUNT
01344  145A  C9 42              CMP #$42        ;66 LINES
01345  145C  D0 F3              BNE FINISH      ;IF NOT MORE
01346  145E  A9 00              LDA #$00        ;ZERO BYTE
01347  1460  8D 57 08           STA LISTCT      ;RESET COUNT
01348  1463  60                 RTS             ;RETURN






DISASSEMBLER64......PAGE 0029

LINE# LOC   CODE        LINE


01349  1464              ;*********************************
01350  1464              ; PRINT CR TO PRINTER
01351  1464              ;*********************************
01352  1464  A9 04       CRLFPR LDA #$04        ;DEVICE #4
01353  1466  8D 19 08           STA DEVICE      ;SET PRINTER
01354  1469  20 FC 18           JSR CRLF        ;CR
01355  146C  AD 1A 08           LDA OUTPUT      ;GET DEVICE
01356  146F  8D 19 08           STA DEVICE      ;RESET DEVICE
01357  1472  60                 RTS             ;RETURN
01358  1473              ;*********************************
01359  1473              ; START NEWLINE AND CHECK COUNT
01360  1473              ;*********************************
01361  1473  20 64 14    NEXPTR JSR CRLFPR      ;PRINT CR
01362  1476  EE 57 08    NEXLIN INC LISTCT      ;INC LINE COUNT
01363  1479  AD 57 08           LDA LISTCT      ;GET COUNT
01364  147C  C9 3C              CMP #$3C        ;48 LINES
01365  147E  D0 45              BNE LINEOK      ;IF NOT BRANCH
01366  1480  20 51 14           JSR FINISH      ;FINISH PAGE
01367  1483              ;*********************************
01368  1483              ; START NEW PAGE WITH HEADING
01369  1483              ;*********************************
01370  1483  AD 19 08    HEADER LDA DEVICE      ;CHECK DEVICE
01371  1486  29 04              AND #$04        ;PRINTER?
01372  1488  F0 3B              BEQ LINEOK      ;IF NOT EXIT
01373  148A  20 73 14           JSR NEXPTR      ;NEXT LINE
01374  148D  A9 04              LDA #$04        ;DEVICE #4
01375  148F  8D 19 08           STA DEVICE      ;SET DEVICE
01376  1492  A9 34              LDA #<XTITLE    ;HEADER
01377  1494  A0 15              LDY #>XTITLE    ;
01378  1496  20 C4 13           JSR STRPNT      ;PRINT IT
01379  1499              ;*********************************
01380  1499              ; PRINT PAGE COUNT AND HEADER
01381  1499              ;*********************************
01382  1499  AE 55 08           LDX PAGECT
01383  149C  AD 56 08           LDA PAGECT+1
01384  149F  20 D5 13           JSR PRTPAG
01385  14A2  20 73 14           JSR NEXPTR
01386  14A5  20 73 14           JSR NEXPTR
01387  14A8  A9 04              LDA #$04
01388  14AA  8D 19 08           STA DEVICE
01389  14AD  A9 4F              LDA #<LTITLE
01390  14AF  A0 15              LDY #>LTITLE
01391  14B1  20 C4 13           JSR STRPNT
01392  14B4  20 73 14           JSR NEXPTR
01393  14B7              ;*********************************
01394  14B7              ; INC PAGE COUNT
01395  14B7              ;*********************************
01396  14B7  EE 55 08           INC PAGECT
01397  14BA  D0 03              BNE PAGER1
01398  14BC  EE 56 08           INC PAGECT+1
01399  14BF  20 73 14    PAGER1 JSR NEXPTR
01400  14C2  20 73 14           JSR NEXPTR
01401  14C5  60          LINEOK RTS 
01402  14C6              ;*********************************
01403  14C6              ; SYMBOL TABLE ROUTINES






DISASSEMBLER64......PAGE 0030

LINE# LOC   CODE        LINE


01404  14C6              ;*********************************
01405  14C6              ; START NEWLINE AND CHECK COUNT
01406  14C6              ;*********************************
01407  14C6  20 64 14    NEXPTS JSR CRLFPR      ;PRINT CR
01408  14C9  EE 57 08           INC LISTCT      ;INC LINE COUNT
01409  14CC  AD 57 08           LDA LISTCT      ;GET COUNT
01410  14CF  C9 3C              CMP #$3C        ;48 LINES
01411  14D1  D0 1D              BNE HEADOK      ;IF NOT BRANCH
01412  14D3  20 51 14           JSR FINISH      ;FINISH PAGE
01413  14D6              ;*********************************
01414  14D6              ; START NEW PAGE WITH HEADING
01415  14D6              ;*********************************
01416  14D6  20 C6 14    HEADES JSR NEXPTS      ;NEXT LINE
01417  14D9  A9 6C              LDA #<XTITLS    ;HEADER
01418  14DB  A0 15              LDY #>XTITLS    ;
01419  14DD  20 C4 13           JSR STRPNT      ;PRINT IT
01420  14E0  20 C6 14           JSR NEXPTS
01421  14E3  20 C6 14           JSR NEXPTS
01422  14E6  A9 79              LDA #<LTITLS
01423  14E8  A0 15              LDY #>LTITLS
01424  14EA  20 C4 13           JSR STRPNT
01425  14ED  20 C6 14           JSR NEXPTS
01426  14F0  60          HEADOK RTS
01427  14F1              ;*********************************
01428  14F1              ; CHECK FOR NEW PAGE FOR SYMBOL
01429  14F1              ;*********************************
01430  14F1  AD 57 08    HEADSY LDA LISTCT
01431  14F4  C9 35              CMP #$35
01432  14F6  B0 06              BCS HEADFX
01433  14F8  20 C6 14           JSR NEXPTS
01434  14FB  4C C6 14           JMP NEXPTS
01435  14FE  4C 51 14    HEADFX JMP FINISH
01436  1501              ;*********************************
01437  1501              ; SCREEN UTILITES
01438  1501              ;*********************************
01439  1501  AD 19 08    SCROFF LDA DEVICE
01440  1504  29 04              AND #$04
01441  1506  F0 08              BEQ SCRNO1
01442  1508  AD 11 D0           LDA VICREG
01443  150B  29 EF              AND #$EF
01444  150D  8D 11 D0           STA VICREG
01445  1510  60          SCRNO1 RTS
01446  1511              ;*********************************
01447  1511  AD 11 D0    SCRON  LDA VICREG
01448  1514  09 10              ORA #$10
01449  1516  8D 11 D0           STA VICREG
01450  1519  60                 RTS
01451  151A              ;*********************************
01452  151A              ; HEX-TO-ASCII TABLE
01453  151A              ;*********************************
01454  151A  30 31       HEXA   .BYTE '0123456789ABCDEF'
01455  152A              ;*********************************
01456  152A              ; CONSTANTS FOR PRTNUM ROUTINE
01457  152A              ;*********************************
01458  152A  01          CONST0 .BYTE $01,$0A,$64,$E8,$10






DISASSEMBLER64......PAGE 0031

LINE# LOC   CODE        LINE


01458  152B  0A 
01458  152C  64 
01458  152D  E8 
01458  152E  10 
01459  152F  00          CONST1 .BYTE $00,$00,$00,$03,$27
01459  1530  00 
01459  1531  00 
01459  1532  03 
01459  1533  27 
01460  1534              ;*********************************
01461  1534              ; PAGE TITLE
01462  1534              ;*********************************
01463  1534  44 49       XTITLE .BYTE 'DISASSEMBLER64.......PAGE '
01464  154E  00                 .BYTE $00
01465  154F  4C 49       LTITLE .BYTE 'LINE# LOC   CODE        LINE'
01466  156B  00                 .BYTE $00
01467  156C              ;********************************
01468  156C              ; SYMBOL PAGE TITLE
01469  156C              ;********************************
01470  156C  53 59       XTITLS .BYTE 'SYMBOL TABLE',0
01470  1578  00 
01471  1579  53 59       LTITLS .BYTE 'SYMBOL VALUE',0
01471  1585  00 
01472  1586              ;*********************************
01473  1586              ;.FIL 0:MODE.ASM
01474  1586              ;*********************************
01475  1586              ;.END
01476  1586              ;*********************************
01477  1586              ; FILE MODE.ASM
01478  1586              ;*********************************
01479  1586              ;
01480  1586              ;        DISASSEMBLER64
01481  1586              ;    SYMBOLIC DISASSEMBLER
01482  1586              ;       BY DENTON MARLOWE
01483  1586              ;
01484  1586              ;  (C)1986 BY DENTON MARLOWE
01485  1586              ;
01486  1586              ;*********************************
01487  1586              ; ADDRESSING MODE UTILITIES
01488  1586              ;*********************************
01489  1586              ;      DISASSEMBLE ONE LINE
01490  1586              ;*********************************
01491  1586  20 B2 1C    DSLINE JSR DATAOP      ;CHECK FOR DATA
01492  1589  30 3D              BMI BYTT        ;N=1 THEN FOUND
01493  158B              ;*********************************
01494  158B              ; CHECK BIT ZP DECODING OPTIONS
01495  158B              ;*********************************
01496  158B  AD 78 2F           LDA BITFLG      ;CHECK BIT FLAG
01497  158E  F0 0D              BEQ DISL        ;IF ZERO NO BIT
01498  1590                     
01499  1590  20 35 19           JSR GETSL       ;GET BYTE
01500  1593  C9 24              CMP #$24        ;ZEROPAGE BIT
01501  1595  F0 34              BEQ BYZBIT      ;
01502  1597  C9 2C              CMP #$2C        ;ZEROPAGE BIT
01503  1599  F0 55              BEQ BYABIT      ;






DISASSEMBLER64......PAGE 0032

LINE# LOC   CODE        LINE


01504  159B  D0 00              BNE DISL        ;
01505  159D              ;*********************************
01506  159D              ; CHECK BIT ABS DECODING OPTIONS
01507  159D              ;*********************************
01508  159D              
01509  159D              ;********************************
01510  159D              ; PROCESS LINE OF CODE
01511  159D              ;********************************
01512  159D              DISL   = *
01513  159D  20 35 19           JSR GETSL       ;GET BYTE
01514  15A0  AE 12 08           LDX PASS        ;GET PASS COUNT
01515  15A3  EC 15 08           CPX CPASS       ;LAST
01516  15A6  F0 06              BEQ DISL1       ;IF LAST BRANCH
01517  15A8  20 7A 1F           JSR OPERN1      ;IF LAST BRANCH
01518  15AB  4C C8 15           JMP BYTT        ;NEXT INSTRUCTION
01519  15AE              ;********************************
01520  15AE              ; PRINT DISASSEMBLY ADDRESS
01521  15AE              ;********************************
01522  15AE  20 6D 1F    DISL1  JSR PRTASS      ;PRINT LINE DATA
01523  15B1  20 93 18           JSR PRAD        ;PRINT ADDRESS
01524  15B4  20 0E 19           JSR SPACE       ;SPACE OVER
01525  15B7              ;********************************
01526  15B7              ; PRINT INSTRUCTION
01527  15B7              ;********************************
01528  15B7  20 35 19           JSR GETSL       ;GET BYTE
01529  15BA  48                 PHA             ;STORE
01530  15BB  20 4E 1F           JSR MNEMON      ;PRINT MNEMONIC
01531  15BE  20 0E 19           JSR SPACE       ;SPACE OVER
01532  15C1  68                 PLA             ;GET BYTE
01533  15C2  20 82 1F           JSR OPERND      ;PRINT OPERAND
01534  15C5  20 07 13    FINAL  JSR NEWLIN      ;START NEW LINE
01535  15C8  4C 13 19    BYTT   JMP NEXTSL      ;NEXT INSTRUCTION
01536  15CB              ;********************************
01537  15CB              ;      BIT ZP SKIP TRICK
01538  15CB              ;
01539  15CB              ; THE SKIP WILL ALWAYS INVOLVE
01540  15CB              ; A FOLLWING OPCODE THAT IS EITHER
01541  15CB              ; AN OPCODE WITH NO OPERAND OR
01542  15CB              ; OR ONE BYTE OPERAND LIKE A BRANCH
01543  15CB              ; OR ZERO PAGE INSTRUCTION
01544  15CB              ;*********************************
01545  15CB              BYZBIT = *
01546  15CB  AD 78 2F           LDA BITFLG
01547  15CE  29 02              AND #$02
01548  15D0  F0 CB              BEQ DISL
01549  15D2              ;********************************
01550  15D2              ;      TO SKIP OR NOT
01551  15D2              ;*********************************
01552  15D2  20 2C 19           JSR INCSL       ;INC TO OPERAND
01553  15D5  20 35 19           JSR GETSL       ;GET OPERAND
01554  15D8  48                 PHA
01555  15D9  20 4B 19           JSR DECSL
01556  15DC  68                 PLA
01557  15DD                                     ;CHECK FOR SKIP
01558  15DD  C9 10              CMP #$10        ;BPL SKIP






DISASSEMBLER64......PAGE 0033

LINE# LOC   CODE        LINE


01559  15DF  F0 40              BEQ B0000
01560  15E1  C9 18              CMP #$18        ;CLC SKIP
01561  15E3  F0 3C              BEQ B0000
01562  15E5  C9 30              CMP #$30        ;BMI
01563  15E7  F0 38              BEQ B0000
01564  15E9  C9 38              CMP #$38        ;SEC
01565  15EB  F0 34              BEQ B0000
01566  15ED              ;
01567  15ED  4C 9D 15           JMP DISL
01568  15F0              ;********************************
01569  15F0              ;      BIT ABS SKIP TRICK
01570  15F0              ;*********************************
01571  15F0              BYABIT = *
01572  15F0  AD 78 2F           LDA BITFLG
01573  15F3  29 01              AND #$01
01574  15F5  F0 A6              BEQ DISL
01575  15F7              ;********************************
01576  15F7              ;      TO SKIP OR NOT
01577  15F7              ;*********************************
01578  15F7  20 2C 19           JSR INCSL       ;INC TO OPERAND
01579  15FA  20 35 19           JSR GETSL       ;GET OPERAND
01580  15FD  48                 PHA
01581  15FE  20 4B 19           JSR DECSL
01582  1601  68                 PLA
01583  1602                                     ;CHECK FOR SKIP
01584  1602  C9 A1              CMP #$A1        ;LDY A IMMEDIATE SKIP
01585  1604  F0 1B              BEQ B0000
01586  1606  C9 A2              CMP #$A2        ;LDA A IMMEDIATE SKIP
01587  1608  F0 17              BEQ B0000
01588  160A  C9 A9              CMP #$A9        ;LDX A IMMEDIATE SKIP
01589  160C  F0 13              BEQ B0000
01590  160E                     
01591  160E  C9 65              CMP #$65        ;ADC ZP
01592  1610  F0 0F              BEQ B0000
01593  1612                     
01594  1612  C9 85              CMP #$85        ;STA ZP
01595  1614  F0 0B              BEQ B0000
01596  1616                     
01597  1616  C9 B1              CMP #$B1        ;LDA (ZP),Y
01598  1618  F0 07              BEQ B0000
01599  161A                     
01600  161A  C9 E6              CMP #$E6        ;INC
01601  161C  F0 03              BEQ B0000
01602  161E              ;
01603  161E  4C 9D 15           JMP DISL
01604  1621              ;********************************
01605  1621              ;      PRINTING PASS?
01606  1621              ;*********************************
01607  1621              B0000  = *
01608  1621  AD 12 08           LDA PASS        ;GET PASS COUNT
01609  1624  CD 15 08           CMP CPASS       ;LAST
01610  1627  D0 9F              BNE BYTT        ;IF NOT NEXT BYTE
01611  1629              ;*********************************
01612  1629              ;  PRINT LINE DATA FOR .BYTE
01613  1629              ;*********************************






DISASSEMBLER64......PAGE 0034

LINE# LOC   CODE        LINE


01614  1629  20 6A 18           JSR COMENT      ;COMENT LINE
01615  162C              ;
01616  162C  20 0E 1A           JSR PRTDAT      ;PRINT LINE DATA
01617  162F  20 9B 19           JSR PRTONE      ;ONE BYTE
01618  1632  20 93 18           JSR PRAD        ;PRINT ADDRESS
01619  1635  20 0E 19           JSR SPACE       ;SPACE OVER
01620  1638  A9 64              LDA #<MSGBIT    ;.BYTE $
01621  163A  A0 19              LDY #>MSGBIT    ;
01622  163C  20 C4 13           JSR STRPNT      ;PRINT IT
01623  163F              ;
01624  163F  20 35 19           JSR GETSL       ;GET BYTE
01625  1642  20 AE 13           JSR PRBYT       ;PRINT BYTE
01626  1645              ;
01627  1645  A9 6C              LDA #<MSGBZP    ;BIT COMMENT
01628  1647  A0 19              LDY #>MSGBZP    ;
01629  1649  20 C4 13           JSR STRPNT      ;PRINT IT
01630  164C              ;
01631  164C  20 07 13           JSR NEWLIN      ;PRINT BYTE
01632  164F                                     ;JSR INCSL    ;INC SELECT
01633  164F  20 70 18           JSR COMET       ;COMENT LINE
01634  1652                                     ;JSR DECSL    ;REASET SELE
CT
01635  1652  4C C5 15           JMP FINAL       ;CR AND NEXT BYTE
01636  1655              ;*********************************
01637  1655              ;BYTEXT JMP DISL1
01638  1655              ;*********************************
01639  1655              ; ADDRESSING MODE UTILITIES
01640  1655              ;*********************************
01641  1655              ;
01642  1655              ;*********************************
01643  1655              ; ANALYSIS OPERAND ROUTINES
01644  1655              ;*********************************
01645  1655              ;    BIT ZP ONE-BYTE OPERAND
01646  1655              ; ZERO PAGE BIT IS ALMOST ALWAYS
01647  1655              ;   A BIT TRICK TO SKIP THE NEXT
01648  1655              ;          OPCODE
01649  1655              ;********************************
01650  1655  EA          ONEBIT NOP
01651  1656              ;*********************************
01652  1656              ;      ONE-BYTE OPERAND
01653  1656              ;********************************
01654  1656  20 2C 19    ONEBYT JSR INCSL       ;INC TO BYTE
01655  1659  20 35 19           JSR GETSL       ;GET BYTE
01656  165C  8D 45 08           STA WORKED      ;STORE OPERAND
01657  165F  A9 00              LDA #$00        ;ZERO BYTE
01658  1661  8D 46 08           STA WORKED+1    ;ZERO HIGH BYTE
01659  1664  AD 12 08           LDA PASS        ;GET PASS COUNT
01660  1667  CD 13 08           CMP IPASS       ;INTERNAL
01661  166A  F0 54              BEQ OPCPUT      ;TABLE OPERAND
01662  166C  CD 14 08           CMP EPASS       ;EXTERNAL
01663  166F  F0 52              BEQ OPCSYM      ;EXTERNAL EQUATE
01664  1671              ;*********************************
01665  1671              ; OUTPUT OPERAND
01666  1671              ;*********************************
01667  1671  20 65 23           JSR SYMOP       ;CHECK FOR SYMBOL
01668  1674  B0 50              BCS TWOB        ;SYMBOL FOUND






DISASSEMBLER64......PAGE 0035

LINE# LOC   CODE        LINE


01669  1676  20 45 1A           JSR RANGE       ;IS IT INTERNAL
01670  1679  90 06              BCC ONEBY       ;GENERATE LABEL
01671  167B  20 D9 18           JSR DOLLAR      ;EXTERNAL
01672  167E  4C 84 16           JMP ONEBX       ;PRINT ADDRESS
01673  1681  20 89 18    ONEBY  JSR PRLA        ;PRINT XX
01674  1684  AD 45 08    ONEBX  LDA WORKED      ;GET OPERAND
01675  1687  4C AE 13           JMP PRBYT       ;PRINT BYTE
01676  168A              ;********************************
01677  168A              ;      BIT ABS TWO-BYTE OPERAND
01678  168A              ;********************************
01679  168A  EA          TWOBIT NOP
01680  168B              ;********************************
01681  168B              ;      TWO-BYTE OPERAND
01682  168B              ;********************************
01683  168B  20 2C 19    TWOBYT JSR INCSL       ;INC TO BYTE
01684  168E  20 35 19           JSR GETSL       ;GET BYTE
01685  1691  8D 45 08           STA WORKED      ;STORE LOW BYTE
01686  1694  20 2C 19           JSR INCSL       ;INC TO BYTE
01687  1697  20 35 19           JSR GETSL       ;GET BYTE
01688  169A  8D 46 08           STA WORKED+1    ;STORE HIGH BYTE
01689  169D  AD 12 08           LDA PASS        ;GET PASS COUNT
01690  16A0  CD 13 08           CMP IPASS       ;INTERNAL
01691  16A3  F0 1B              BEQ OPCPUT      ;TABLE OPERNAD
01692  16A5  CD 14 08           CMP EPASS       ;EXTERNAL
01693  16A8  F0 19              BEQ OPCSYM      ;EXTERNAL EQUATE
01694  16AA              ;********************************
01695  16AA              ;  OUTPUT OPERAND
01696  16AA              ;********************************
01697  16AA  20 65 23           JSR SYMOP       ;CHECK SYMBOL
01698  16AD  B0 17              BCS TWOB        ;C=1 FOUND ONE
01699  16AF  20 45 1A           JSR RANGE       ;IS IT INTERNAL
01700  16B2  90 06              BCC TWOBY       ;GERNERATE LABEL
01701  16B4  20 D9 18           JSR DOLLAR      ;EXTERNAL
01702  16B7  4C BD 16           JMP TWOBX       ;
01703  16BA              ;********************************
01704  16BA              ;  OUTPUT OPERAND
01705  16BA              ;********************************
01706  16BA              TWOBY  =*
01707  16BA  20 89 18           JSR PRLA        ;PRINT XX
01708  16BD              TWOBX  = *
01709  16BD  4C CB 18           JMP PWORKD      ;PRINT ADDRESS
01710  16C0              OPCPUT = *
01711  16C0  4C BC 1A           JMP PUTI        ;PUT IN TABLE
01712  16C3              OPCSYM = *
01713  16C3  4C 65 23           JMP SYMOP       ;CHECK EXT EQUATE
01714  16C6              TWOB   = *
01715  16C6  60                 RTS             ;RETURN
01716  16C7              ;*********************************
01717  16C7              ; ILLEGAL MODES, UNUSED OPCODES
01718  16C7              ;
01719  16C7              ; ZZZZ XX .BYTE $XX ;'Y' ;??? ILLEGAL OPCODE
01720  16C7              ;
01721  16C7              ;*********************************
01722  16C7  EE 5A 08    ILLEGL INC ERRCT       ;INC ERROR COUNT
01723  16CA  D0 03              BNE *+5         ;SKIP NEXT LINE






DISASSEMBLER64......PAGE 0036

LINE# LOC   CODE        LINE


01724  16CC  EE 5B 08           INC ERRCT+1     ;INC ERROR COUNT
01725  16CF  A0 1F              LDY #>MBYTE     ;.BYTE
01726  16D1  A9 35              LDA #<MBYTE     ;
01727  16D3  20 C4 13           JSR STRPNT      ;PRINT STRING
01728  16D6  20 D9 18           JSR DOLLAR      ;PRINT $
01729  16D9  20 35 19           JSR GETSL       ;GET ILLEGAL BYTE
01730  16DC                     
01731  16DC              ;BEGIN REV 2017-3
01732  16DC  48                 PHA             ;PUT BYTE ON STACK
01733  16DD              ;
01734  16DD  20 AE 13           JSR PRBYT       ;PRINT IT
01735  16E0  20 0E 19           JSR SPACE       ;SPACE OVER
01736  16E3              ;
01737  16E3  68                 PLA             ;POP BYTE OFF STACK
01738  16E4  20 3D 1E           JSR CASCII      ;IS IT PRINTABLE ASCII
01739  16E7  B0 18              BCS ISKIP       ;IF NOT EXIT
01740  16E9  48                 PHA             ;STACK IT
01741  16EA  20 0E 19           JSR SPACE       ;SPACE OVER
01742  16ED  20 D4 18           JSR SEMIC       ;COMMENT
01743  16F0  A9 27              LDA #'''        ;QUOTE
01744  16F2  20 1A 14           JSR PCHAR       ;PRINT IT
01745  16F5  68                 PLA             ;POP IT
01746  16F6  20 1A 14           JSR PCHAR       ;PRINT IT
01747  16F9  A9 27              LDA #'''        ;QUOTE
01748  16FB  20 1A 14           JSR PCHAR       ;PRINT IT
01749  16FE  20 0E 19           JSR SPACE       ;SPACE OVER
01750  1701              ;
01751  1701              ISKIP  = *
01752  1701              ;END REV 2017-3
01753  1701  A0 19              LDY #>ILLMSG
01754  1703  A9 87              LDA #<ILLMSG
01755  1705  4C C4 13           JMP STRPNT
01756  1708              ;********************************
01757  1708              ;      ACCUMULATOR MODE
01758  1708              ;********************************
01759  1708  A9 41       ACC    LDA #'A'        ;ASCII A
01760  170A  4C 1A 14           JMP PCHAR       ;PRINT IT
01761  170D              ;********************************
01762  170D              ;       IMMEDIATE MODE
01763  170D              ;********************************
01764  170D  20 2C 19    IMMEDT JSR INCSL       ;INC TO DATA BYTE
01765  1710  AE 12 08           LDX PASS        ;GET PASS
01766  1713  EC 15 08           CPX CPASS       ;LAST PASS
01767  1716  D0 2A              BNE IMEXIT      ;EXIT
01768  1718  A9 23              LDA #'#'        ;ASCII #
01769  171A  20 1A 14           JSR PCHAR       ;PRINT IT
01770  171D  20 D9 18           JSR DOLLAR      ;PRINT $
01771  1720  20 35 19           JSR GETSL       ;GET BYTE
01772  1723  48                 PHA             ;STACK IT
01773  1724  20 AE 13           JSR PRBYT       ;PRINT IT
01774  1727  68                 PLA             ;POP IT
01775  1728  20 3D 1E           JSR CASCII      ;PRINTABLE ASCII
01776  172B  B0 15              BCS IMEXIT      ;IF NOT EXIT
01777  172D  48                 PHA             ;STACK IT
01778  172E  20 01 19           JSR SPAC6       ;SPACE OVER






DISASSEMBLER64......PAGE 0037

LINE# LOC   CODE        LINE


01779  1731  20 D4 18           JSR SEMIC       ;COMMENT
01780  1734  A9 27              LDA #'''        ;QUOTE
01781  1736  20 1A 14           JSR PCHAR       ;PRINT IT
01782  1739  68                 PLA             ;POP IT
01783  173A  20 1A 14           JSR PCHAR       ;PRINT IT
01784  173D  A9 27              LDA #'''        ;QUOTE
01785  173F  20 1A 14           JSR PCHAR       ;PRINT IT
01786  1742  60          IMEXIT RTS             ;EXIT
01787  1743              ;*********************************
01788  1743              ;      BIT ZERO PAGE MODE
01789  1743              ;*********************************
01790  1743  EA          ZERBIT NOP
01791  1744              ;*********************************
01792  1744              ;      ZERO PAGE MODE
01793  1744              ;*********************************
01794  1744  4C 56 16    ZEROPG JMP ONEBYT      ;PRINT ONE BYTE
01795  1747              ;*********************************
01796  1747              ;      ZERO PAGE,X MODE
01797  1747              ;********************************
01798  1747  20 56 16    ZEROX  JSR ONEBYT      ;PRINT ONE BYTE
01799  174A  4C E8 18           JMP XINDEX      ;PRINT ,X
01800  174D              ;********************************
01801  174D              ;       ZERO PAGE,Y MODE
01802  174D              ;********************************
01803  174D  20 56 16    ZEROY  JSR ONEBYT      ;PRINT ONE BYTE
01804  1750  4C F2 18           JMP YINDEX      ;PRINT ,Y
01805  1753              ;*********************************
01806  1753              ;         BIT ABSOLUTE MODE
01807  1753              ;*********************************
01808  1753  EA          ABSBIT NOP
01809  1754              ;*********************************
01810  1754              ;         ABSOLUTE MODE
01811  1754              ;*********************************
01812  1754  20 8B 16    ABSLUT JSR TWOBYT      ;PRINT TWO BYTE
01813  1757  20 4B 19           JSR DECSL       ;DEC TO SECOND
01814  175A  20 4B 19           JSR DECSL       ;DEC TO OPCODE
01815  175D  20 35 19           JSR GETSL       ;GET BYTE
01816  1760  48                 PHA
01817  1761  20 2C 19           JSR INCSL
01818  1764  20 2C 19           JSR INCSL
01819  1767  68                 PLA
01820  1768  C9 4C              CMP #$4C        ;IS IT JMP
01821  176A  D0 0C              BNE ABSEXT      ;IF NOT EXIT
01822  176C  20 07 13           JSR NEWLIN      ;NEXT LINE
01823  176F  20 2C 19           JSR INCSL
01824  1772  20 70 18           JSR COMET       ;COMMENT LINE
01825  1775  20 4B 19           JSR DECSL
01826  1778  60          ABSEXT RTS             ;RETURN
01827  1779              ;*********************************
01828  1779              ;       ABSOLUTE,X MODE
01829  1779              ;********************************
01830  1779  20 8B 16    ABSX   JSR TWOBYT      ;PRINT TWO BYTE
01831  177C  4C E8 18           JMP XINDEX      ;PRINT ,X
01832  177F              ;********************************
01833  177F              ;       ABSOLUTE,Y MODE






DISASSEMBLER64......PAGE 0038

LINE# LOC   CODE        LINE


01834  177F              ;********************************
01835  177F  20 8B 16    ABSY   JSR TWOBYT      ;PRINT TWO BYTE
01836  1782  4C F2 18           JMP YINDEX      ;PRINT ,Y
01837  1785              ;********************************
01838  1785              ;       IMPLIED MODE
01839  1785              ;********************************
01840  1785  20 35 19    IMPLID JSR GETSL       ;GET BYTE
01841  1788  F0 09              BEQ IMPLI1      ;BRK
01842  178A  C9 60              CMP #$60        ;CHECK CODE
01843  178C  F0 05              BEQ IMPLI1      ;RTS
01844  178E  C9 40              CMP #$40        ;CHECK CODE
01845  1790  F0 01              BEQ IMPLI1      ;RTI
01846  1792  60          IMPONE RTS             ;RETURN
01847  1793  20 07 13    IMPLI1 JSR NEWLIN      ;PRINT NEW LINE
01848  1796  20 2C 19           JSR INCSL
01849  1799  20 70 18           JSR COMET       ;COMMENT LINE
01850  179C  4C 4B 19           JMP DECSL
01851  179F              ;********************************
01852  179F              ;       INDIRECT MODE
01853  179F              ;********************************
01854  179F  20 DE 18    INDRCT JSR LPAREN      ;PRINT (
01855  17A2  20 8B 16           JSR TWOBYT      ;PRINT TWO BYTE
01856  17A5  20 E3 18           JSR RPAREN      ;PRINT )
01857  17A8  20 07 13           JSR NEWLIN      ;NEXT LINE
01858  17AB  20 2C 19           JSR INCSL
01859  17AE  20 70 18           JSR COMET       ;COMMENT LINE
01860  17B1  4C 4B 19           JMP DECSL
01861  17B4              ;********************************
01862  17B4              ;     INDIRECT,X MODE
01863  17B4              ;********************************
01864  17B4  20 DE 18    INDX   JSR LPAREN      ;PRINT (
01865  17B7  20 47 17           JSR ZEROX       ;PRINT $HH,X
01866  17BA  4C E3 18           JMP RPAREN      ;PRINT )
01867  17BD              ;********************************
01868  17BD              ;     INDIRECT,Y MODE
01869  17BD              ;********************************
01870  17BD  20 DE 18    INDY   JSR LPAREN      ;PRINT (
01871  17C0  20 56 16           JSR ONEBYT      ;PRINT ONE BYTE
01872  17C3  20 E3 18           JSR RPAREN      ;PRINT )
01873  17C6  4C F2 18           JMP YINDEX      ;PRINT ,Y
01874  17C9              ;*********************************
01875  17C9              ;      RELATIVE MODE
01876  17C9              ;*********************************
01877  17C9  20 2C 19    RELATV JSR INCSL       ;INC BYTE POINTER
01878  17CC  AD 12 08           LDA PASS        ;GET PASS COUNT
01879  17CF  CD 14 08           CMP EPASS       ;EXTERNAL
01880  17D2  F0 44              BEQ RELSYM      ;EXIT ON EXTERNAL
01881  17D4              ;
01882  17D4  AD 22 08           LDA SELECT      ;GET LOW POINTER
01883  17D7  8D 45 08           STA WORKED      ;STORE TEMP
01884  17DA  AD 23 08           LDA SELECT+1    ;GET HIGH POINTER
01885  17DD  8D 46 08           STA WORKED+1    ;STORE TEMP
01886  17E0  EE 45 08           INC WORKED      ;ADD 1 TO ADDRESS
01887  17E3  D0 03              BNE *+5         ;ZERO MEANS CARRY
01888  17E5  EE 46 08           INC WORKED+1    ;INC HIGH ADDRESS






DISASSEMBLER64......PAGE 0039

LINE# LOC   CODE        LINE


01889  17E8              ;
01890  17E8  20 35 19           JSR GETSL       ;GET BYTE BRANCH OFFSET
01891  17EB  C9 00              CMP #$00        ;IS IT ZERO
01892  17ED  10 03              BPL FORWRD      ;IF SO BRANCH
01893  17EF  CE 46 08           DEC WORKED+1    ;DEC HIGH POINTER
01894  17F2  18          FORWRD CLC             ;CLEAR CARRY FLAG
01895  17F3  6D 45 08           ADC WORKED      ;ADD IN OPERAND
01896  17F6  90 03              BCC RELND       ;TO SELECT ADDRES
01897  17F8  EE 46 08           INC WORKED+1    ;AND NOW POINTS
01898  17FB  8D 45 08    RELND  STA WORKED      ;TARGET ADDRESS
01899  17FE              ;
01900  17FE  AD 12 08           LDA PASS        ;GET PASS COUNT
01901  1801  CD 13 08           CMP IPASS       ;INTERNAL
01902  1804  F0 0F              BEQ RELPUT      ;ADDRESS TABLE
01903  1806              ;
01904  1806  20 65 23           JSR SYMOP       ;CHECK FOR SYMBOL
01905  1809  B0 0D              BCS RELSYM      ;C=1 SYMBOL
01906  180B              ;
01907  180B  AD 18 08           LDA ROPT        ;CHECK OPTION
01908  180E  C9 01              CMP #$01        ;REL TO * ?
01909  1810  F0 07              BEQ RELPC       ;IF SO DO IT
01910  1812              ;
01911  1812  4C C8 18           JMP PWORK       ;PRINT ADDRESS
01912  1815              ;
01913  1815              RELPUT = *
01914  1815  4C BC 1A           JMP PUTI        ;PUT IN TABLE
01915  1818              ;
01916  1818  60          RELSYM RTS             ;RETURN
01917  1819              ;*********************************
01918  1819              ; PRINT RELATIVE TO PC
01919  1819              ;*********************************
01920  1819  20 35 19    RELPC  JSR GETSL       ;GET BRANCH DATA
01921  181C  48                 PHA             ;SAVE ON STACK
01922  181D  30 07              BMI RELNEG      ;BACKWARD ?
01923  181F  A9 7A              LDA #<POSREL
01924  1821  A0 19              LDY #>POSREL
01925  1823  4C 2A 18           JMP RELPM
01926  1826  A9 7E       RELNEG LDA #<NEGREL
01927  1828  A0 19              LDY #>NEGREL
01928  182A  20 C4 13    RELPM  JSR STRPNT
01929  182D  68                 PLA             ;GET BRANCH DATA
01930  182E  18                 CLC             ;CLEAR CARRY
01931  182F  69 02              ADC #$02        ;ADD 2 FOR BRANCH
01932  1831  10 05              BPL RELP        ;FORWARD ?
01933  1833  18                 CLC             ;CLEAR CARRY
01934  1834  49 FF              EOR #$FF        ;COMPLMENT
01935  1836  69 01              ADC #$01        ;ADD 1 FOR 2'S
01936  1838  20 AE 13    RELP   JSR PRBYT       ;PRINT BRANCH
01937  183B  20 01 19           JSR SPAC6       ;SPACE
01938  183E  20 D4 18           JSR SEMIC       ;COMMENT CHAR
01939  1841  4C C8 18           JMP PWORK       ;PRINT ADDRESS
01940  1844              ;*********************************
01941  1844              ;  ORGIN LABEL
01942  1844              ;*********************************
01943  1844  20 32 1A    ORGIN  JSR PRTOTH      ;PRINT LINE DATA






DISASSEMBLER64......PAGE 0040

LINE# LOC   CODE        LINE


01944  1847  A9 2A              LDA #'*'        ;PC
01945  1849  20 1A 14           JSR PCHAR       ;PRINT IT
01946  184C  A9 3D              LDA #'='        ;EQUALS
01947  184E  20 1A 14           JSR PCHAR       ;PRINT IT
01948  1851  20 D9 18           JSR DOLLAR      ;ASCII $
01949  1854  20 BF 18           JSR PSELEC      ;PRINT ADDRESS
01950  1857  4C 07 13           JMP NEWLIN      ;START NEWLINE
01951  185A              ;*********************************
01952  185A              ; END OF FILE LABLE
01953  185A              ;*********************************
01954  185A  20 6A 18    EFILE  JSR COMENT      ;COMMENT LINE
01955  185D  20 32 1A           JSR PRTOTH      ;PRINT LINE DATA
01956  1860  A9 82              LDA #<MSGEND    ;END MESSAGE
01957  1862  A0 19              LDY #>MSGEND
01958  1864  20 C4 13           JSR STRPNT      ;PRINT IT
01959  1867  4C 07 13           JMP NEWLIN      ;NEW LINE
01960  186A              ;*********************************
01961  186A              ; PRINT COMMENT LINE
01962  186A              ;*********************************
01963  186A  20 70 18    COMENT JSR COMET       ;PRINT COMMENT
01964  186D  4C 07 13           JMP NEWLIN      ;NEXT LINE
01965  1870              ;*********************************
01966  1870  20 32 1A    COMET  JSR PRTOTH      ;PRINT LINE DATA
01967  1873  20 D4 18           JSR SEMIC       ;PRINT COMMENT
01968  1876  AD 1C 08           LDA FOROPT
01969  1879  D0 03              BNE CSHORT
01970  187B  A0 20              LDY #$20        ;COUNTER
01971  187D  2C                 .BYTE $2C
01972  187E  A0 10       CSHORT LDY #$10
01973  1880  A9 2A       COMPT  LDA #'*'        ;STAR
01974  1882  20 1A 14           JSR PCHAR       ;PRINT CHAR
01975  1885  88                 DEY             ;DEC COUNTER
01976  1886  D0 F8              BNE COMPT       ;20 OR 10 STARS
01977  1888  60                 RTS             ;RETURN
01978  1889              ;*********************************
01979  1889              ;     PRINT SELECTED ADDRESS
01980  1889              ;*********************************
01981  1889  A9 58       PRLA   LDA #'X'        ;XX LABEL
01982  188B  20 1A 14           JSR PCHAR       ;
01983  188E  A9 58              LDA #'X'        ;
01984  1890  4C 1A 14           JMP PCHAR       ;
01985  1893              ;*********************************
01986  1893              ; PRINT CODE ADDRESS
01987  1893              ;*********************************
01988  1893  20 51 23    PRAD   JSR SYM         ;CHECK FOR SYMBOLIC
01989  1896  B0 1F              BCS NPRAD1      ;C=1 SYMBOLIC LABEL
01990  1898  AD 17 08           LDA XOPT        ;CHECK GENERATION
01991  189B  F0 10              BEQ P1          ;NO LABELS
01992  189D  20 1B 1B           JSR INTCHA      ;IS ADDRESS IN TAB
01993  18A0  B0 0B              BCS P1          ;C=1 YES
01994  18A2  AD 1C 08           LDA FOROPT      ;CHECK FORMAT
01995  18A5  F0 03              BEQ POVER       ;STD FORMAT
01996  18A7  4C 0E 19           JMP SPACE       ;ONE SPACE
01997  18AA  4C 01 19    POVER  JMP SPAC6       ;SPACE OVER
01998  18AD              ;*********************************






DISASSEMBLER64......PAGE 0041

LINE# LOC   CODE        LINE


01999  18AD              ; PRINT ADDRESS AS LABEL
02000  18AD              ;*********************************
02001  18AD  20 89 18    P1     JSR PRLA        ;PRINT XX
02002  18B0  20 BF 18           JSR PSELEC      ;PRINT ADDRESS
02003  18B3  EA                 NOP
02004  18B4  EA                 NOP
02005  18B5  EA                 NOP
02006  18B6  60          NPRAD  RTS             ;RETURN
02007  18B7              ;*********************************
02008  18B7  AD 1C 08    NPRAD1 LDA FOROPT
02009  18BA  D0 FA              BNE NPRAD
02010  18BC  4C 02 24           JMP FIXSYM
02011  18BF              ;*********************************
02012  18BF              ; PRINT SELECT ADDRESS
02013  18BF              ;*********************************
02014  18BF  AD 22 08    PSELEC LDA SELECT      ;LOW BYTE
02015  18C2  AC 23 08           LDY SELECT+1    ;HIGH BYTE
02016  18C5  4C A8 13           JMP PRBYTS      ;PRINT THEM
02017  18C8              ;*********************************
02018  18C8              ; PRINT WORKED ADDRESS WITH XX
02019  18C8              ;*********************************
02020  18C8  20 89 18    PWORK  JSR PRLA        ;PRINT XX
02021  18CB              ;*********************************
02022  18CB              ; PRINT WORKED ADDRESS
02023  18CB              ;*********************************
02024  18CB  AD 45 08    PWORKD LDA WORKED      ;LOW BYTE
02025  18CE  AC 46 08           LDY WORKED+1    ;HIGH BYTE
02026  18D1  4C A8 13           JMP PRBYTS      ;PRINT THEM
02027  18D4              ;********************************
02028  18D4              ; PRINT SEMICOLON FOR COMMENT
02029  18D4              ;********************************
02030  18D4  A9 3B       SEMIC  LDA #';'
02031  18D6  4C 1A 14           JMP PCHAR
02032  18D9              ;********************************
02033  18D9              ; PRINT DOLLAR SIGN FOR HEX
02034  18D9              ;********************************
02035  18D9  A9 24       DOLLAR LDA #'$'
02036  18DB  4C 1A 14           JMP PCHAR
02037  18DE              ;********************************
02038  18DE              ; PRINT LEFT PARENTTHESES
02039  18DE              ;********************************
02040  18DE  A9 28       LPAREN LDA #'('
02041  18E0  4C 1A 14           JMP PCHAR
02042  18E3              ;********************************
02043  18E3              ; PRINT RIGHT PARENTTHESES
02044  18E3              ;********************************
02045  18E3  A9 29       RPAREN LDA #')'
02046  18E5  4C 1A 14           JMP PCHAR
02047  18E8              ;********************************
02048  18E8              ; PRINT A COMMA AND AN "X"
02049  18E8              ;********************************
02050  18E8  A9 2C       XINDEX LDA #','
02051  18EA  20 1A 14           JSR PCHAR
02052  18ED  A9 58              LDA #'X'
02053  18EF  4C 1A 14           JMP PCHAR






DISASSEMBLER64......PAGE 0042

LINE# LOC   CODE        LINE


02054  18F2              ;********************************
02055  18F2              ; PRINT A COMMA AND A "Y"
02056  18F2              ;********************************
02057  18F2  A9 2C       YINDEX LDA #','
02058  18F4  20 1A 14           JSR PCHAR
02059  18F7  A9 59              LDA #'Y'
02060  18F9  4C 1A 14           JMP PCHAR
02061  18FC              ;********************************
02062  18FC              ; PRINT CARRAIGE RETURN
02063  18FC              ;*********************************
02064  18FC  A9 0D       CRLF   LDA #$0D        ;ASCII CR
02065  18FE  4C 1A 14           JMP PCHAR       ;PRINT
02066  1901              ;*********************************
02067  1901              ; PRINT SIX SPACES
02068  1901              ;*********************************
02069  1901  A9 05       SPAC6  LDA #$05
02070  1903  8D 51 08    SPACM  STA TEMP
02071  1906  20 0E 19    SPAC   JSR SPACE
02072  1909  CE 51 08           DEC TEMP
02073  190C  D0 F8              BNE SPAC
02074  190E              ;*********************************
02075  190E              ; PRINT SPACE
02076  190E              ;*********************************
02077  190E  A9 20       SPACE  LDA #$20        ;ASCII SPACE
02078  1910  4C 1A 14           JMP PCHAR       ;PRINT
02079  1913              ;*********************************
02080  1913              ; SELECT NEXT BYTE
02081  1913              ;*********************************
02082  1913  AD 23 08    NEXTSL LDA SELECT+1
02083  1916  CD 21 08           CMP EA+1
02084  1919  90 0A              BCC SLOK
02085  191B  D0 0D              BNE NOINC
02086  191D  AD 22 08           LDA SELECT
02087  1920  CD 20 08           CMP EA
02088  1923  B0 05              BCS NOINC
02089  1925  20 2C 19    SLOK   JSR INCSL
02090  1928  18                 CLC
02091  1929  60                 RTS
02092  192A  38          NOINC  SEC
02093  192B  60                 RTS
02094  192C              ;*********************************
02095  192C              ; INC SELECTED BYTE
02096  192C              ;*********************************
02097  192C  EE 22 08    INCSL  INC SELECT
02098  192F  D0 03              BNE *+5
02099  1931  EE 23 08           INC SELECT+1
02100  1934  60                 RTS
02101  1935              ;*********************************
02102  1935              ; GET SELECTED BYTE
02103  1935              ;*********************************
02104  1935  18          GETSL  CLC
02105  1936  AD 22 08           LDA SELECT
02106  1939  6D 24 08           ADC OFFSET
02107  193C  85 02              STA ZEROUR
02108  193E  AD 23 08           LDA SELECT+1






DISASSEMBLER64......PAGE 0043

LINE# LOC   CODE        LINE


02109  1941  6D 25 08           ADC OFFSET+1
02110  1944  85 03              STA ZEROUR+1
02111  1946  A0 00              LDY #$00
02112  1948  B1 02              LDA (ZEROUR),Y
02113  194A  60                 RTS
02114  194B              ;*********************************
02115  194B              ; DEC SLECTED BYTE
02116  194B              ;*********************************
02117  194B  AD 22 08    DECSL  LDA SELECT
02118  194E  D0 03              BNE *+5
02119  1950  CE 23 08           DEC SELECT+1
02120  1953  CE 22 08           DEC SELECT
02121  1956  60                 RTS
02122  1957              ;*********************************
02123  1957              ; INITIALIZE SELECT
02124  1957              ;*********************************
02125  1957  AD 1E 08    INTSA  LDA SA
02126  195A  8D 22 08           STA SELECT
02127  195D  AD 1F 08           LDA SA+1
02128  1960  8D 23 08           STA SELECT+1
02129  1963  60                 RTS
02130  1964              ;*********************************
02131  1964              ; ASCII STRING DATA
02132  1964              ;*********************************
02133  1964  2E 42       MSGBIT .BYTE '.BYTE $',0
02133  196B  00 
02134  196C  20 3B       MSGBZP .BYTE '         ;BIT ZP SKIP',0
02134  1979  00 
02135  197A  2A 2B 24    POSREL .BYTE '*+$',0
02135  197D  00 
02136  197E  2A 2D 24    NEGREL .BYTE '*-$',0
02136  1981  00 
02137  1982  2E 45       MSGEND .BYTE '.END',0
02137  1986  00 
02138  1987  3B 3F       ILLMSG .BYTE ';??? ILLEGAL OPCODE',0
02138  199A  00 
02139  199B              ;*********************************
02140  199B              ; PRINT ONE BYTE OPCODE DATA
02141  199B              ;*********************************
02142  199B  20 35 19    PRTONE JSR GETSL       ;GET BYTE
02143  199E  20 AE 13           JSR PRBYT       ;PRINT BYTE
02144  19A1  AD 1C 08           LDA FOROPT
02145  19A4  F0 03              BEQ PRTON1
02146  19A6  A9 07              LDA #$07
02147  19A8  2C                 .BYTE $2C
02148  19A9  A9 09       PRTON1 LDA #$09        ;10 SPACES
02149  19AB  20 03 19           JSR SPACM       ;
02150  19AE  4C 07 1A           JMP PRTEST      ;RESET I/O DEVICE
02151  19B1              ;*********************************
02152  19B1              ; PRINT TWO BYTE OPCODE DATA
02153  19B1              ;*********************************
02154  19B1  20 35 19    PRTTWO JSR GETSL       ;GET BYTE
02155  19B4  20 AE 13           JSR PRBYT       ;PRINT BYTE
02156  19B7  20 0E 19           JSR SPACE       ;
02157  19BA  20 2C 19           JSR INCSL       ;INC TO OPERAND






DISASSEMBLER64......PAGE 0044

LINE# LOC   CODE        LINE


02158  19BD  20 35 19           JSR GETSL       ;GET BYTE
02159  19C0  20 AE 13           JSR PRBYT       ;PRINT IT
02160  19C3  AD 1C 08           LDA FOROPT
02161  19C6  F0 03              BEQ PRTTW1
02162  19C8  A9 04              LDA #$04
02163  19CA  2C                 .BYTE $2C
02164  19CB  A9 06       PRTTW1 LDA #$06        ;7 SPACES
02165  19CD  20 03 19           JSR SPACM       ;
02166  19D0  20 4B 19           JSR DECSL       ;RESET POINTER
02167  19D3  4C 07 1A           JMP PRTEST      ;RESET I/O DEVICE
02168  19D6              ;*********************************
02169  19D6              ; PRINT THREE BYTE OPCODE DATA
02170  19D6              ;*********************************
02171  19D6  20 35 19    PRTTHE JSR GETSL       ;GET BYTE
02172  19D9  20 AE 13           JSR PRBYT       ;PRINT BYTE
02173  19DC  20 0E 19           JSR SPACE       ;
02174  19DF  20 2C 19           JSR INCSL       ;INC TO OPERAND
02175  19E2  20 35 19           JSR GETSL       ;GET BYTE
02176  19E5  20 AE 13           JSR PRBYT       ;PRINT IT
02177  19E8  20 0E 19           JSR SPACE       ;
02178  19EB  20 2C 19           JSR INCSL       ;INC TO LAST BYTE
02179  19EE  20 35 19           JSR GETSL       ;GET BYTE
02180  19F1  20 AE 13           JSR PRBYT       ;PRINT IT
02181  19F4  AD 1C 08           LDA FOROPT
02182  19F7  F0 03              BEQ PRTTH1
02183  19F9  A9 01              LDA #$01
02184  19FB  2C                 .BYTE $2C
02185  19FC  A9 03       PRTTH1 LDA #$03        ;4 SPACES
02186  19FE  20 03 19           JSR SPACM       ;
02187  1A01  20 4B 19           JSR DECSL       ;DEC POINTER
02188  1A04  20 4B 19           JSR DECSL       ;DEC POINTER
02189  1A07              ;*********************************
02190  1A07              ; RESET I/O DEVICE (DISK IF USED)
02191  1A07              ;*********************************
02192  1A07  AD 1A 08    PRTEST LDA OUTPUT      ;GET I/O DEVICE
02193  1A0A  8D 19 08           STA DEVICE      ;RESET I/O
02194  1A0D  60                 RTS             ;RETURN
02195  1A0E              ;*********************************
02196  1A0E              ; PRINT LINE DATA FOR OPCODE
02197  1A0E              ;*********************************
02198  1A0E  AD 19 08    PRTDAT LDA DEVICE      ;OUTPUT DEVICE
02199  1A11  29 07              AND #$07        ;MASK DISK
02200  1A13  8D 19 08           STA DEVICE      ;RESET
02201  1A16  AD 1C 08           LDA FOROPT      ;CHECK FORMAT
02202  1A19  D0 0F              BNE PRTDAF      ;SKIP LINE #
02203  1A1B  AD 59 08           LDA LINECT+1    ;HIH BYTE LINE
02204  1A1E  AE 58 08           LDX LINECT      ;LOW BYTE LINE
02205  1A21  20 E0 13           JSR PRTNUM      ;PRINT NUMBER
02206  1A24  20 0E 19           JSR SPACE       ;
02207  1A27  20 0E 19           JSR SPACE       ;
02208  1A2A  20 BF 18    PRTDAF JSR PSELEC      ;PRINT ADDRESS
02209  1A2D  A9 01              LDA #$01        ;2 SPACES
02210  1A2F  4C 03 19           JMP SPACM       ;
02211  1A32              ;*********************************
02212  1A32              ; PRINT LINE DATA FOR OTHER LINES






DISASSEMBLER64......PAGE 0045

LINE# LOC   CODE        LINE


02213  1A32              ;*********************************
02214  1A32  20 0E 1A    PRTOTH JSR PRTDAT      ;PRINT LINE
02215  1A35  AD 1C 08           LDA FOROPT
02216  1A38  F0 03              BEQ PRTOT1
02217  1A3A  A9 09              LDA #$09
02218  1A3C  2C                 .BYTE $2C
02219  1A3D  A9 0B       PRTOT1 LDA #$0B        ;12 SPACES
02220  1A3F  20 03 19           JSR SPACM       ;
02221  1A42  4C 07 1A           JMP PRTEST      ;RESET I/O
02222  1A45              ;********************************
02223  1A45              ;.FIL 0:INTERNAL.ASM
02224  1A45              ;********************************
02225  1A45              ;.END
02226  1A45              ;*********************************
02227  1A45              ; FILE INTERNAL.ASM
02228  1A45              ;*********************************
02229  1A45              ;
02230  1A45              ;        DISASSEMBLER64
02231  1A45              ;    SYMBOLIC DISASSEMBLER
02232  1A45              ;       BY DENTON MARLOWE
02233  1A45              ;
02234  1A45              ;  (C)1986 BY DENTON MARLOWE
02235  1A45              ;
02236  1A45              ;*********************************
02237  1A45              ; INTERNAL ADDRESS TABLE ROUTINES
02238  1A45              ;*********************************
02239  1A45              ; CHECK FOR OUT OF RANGE ADDRESS
02240  1A45              ;*********************************
02241  1A45  AD 46 08    RANGE  LDA WORKED+1    ;GET HIGH
02242  1A48  CD 29 08           CMP EAGOL+1     ;COMPARE
02243  1A4B  90 0A              BCC RANG        ;< CHECK START
02244  1A4D  D0 1A              BNE ROUT        ;> OUT OF RANGE
02245  1A4F  AD 45 08           LDA WORKED      ;GET LOW
02246  1A52  CD 28 08           CMP EAGOL       ;COMPARE
02247  1A55  B0 12              BCS ROUT        ;> OUT OF RANGE
02248  1A57              ;*********************************
02249  1A57  AD 46 08    RANG   LDA WORKED+1    ;GET HIGH
02250  1A5A  CD 27 08           CMP SAGOL+1     ;COMPARE
02251  1A5D  90 0A              BCC ROUT        ;< OUT OF RANGE
02252  1A5F  AD 45 08           LDA WORKED      ;GET LOW
02253  1A62  CD 26 08           CMP SAGOL       ;COMPARE
02254  1A65  90 02              BCC ROUT        ;< OUT OF RANGE
02255  1A67              ;*********************************
02256  1A67  18                 CLC             ;C=0 IN RANGE
02257  1A68  60                 RTS
02258  1A69  38          ROUT   SEC             ;C=1 OUT RANGE
02259  1A6A  60                 RTS
02260  1A6B              ;*********************************
02261  1A6B              ; INITIALIZE INTERNAL TABLE
02262  1A6B              ;*********************************
02263  1A6B  AD EF 08    INITIN LDA DATABE
02264  1A6E  8D 30 08           STA TABINS
02265  1A71  8D 32 08           STA TABINE
02266  1A74  AD F0 08           LDA DATABE+1
02267  1A77  8D 31 08           STA TABINS+1






DISASSEMBLER64......PAGE 0046

LINE# LOC   CODE        LINE


02268  1A7A  8D 33 08           STA TABINE+1
02269  1A7D              ;*********************************
02270  1A7D              ; INITIALIZE INTERNAL TABLE POINT
02271  1A7D              ;*********************************
02272  1A7D  AD 30 08    INTSET LDA TABINS
02273  1A80  8D 2E 08           STA TABINP
02274  1A83  AD 31 08           LDA TABINS+1
02275  1A86  8D 2F 08           STA TABINP+1
02276  1A89  60                 RTS
02277  1A8A              ;*********************************
02278  1A8A              ; SAVE INTERNAL TABLE POINTERS
02279  1A8A              ;*********************************
02280  1A8A  AD 30 08    SAVINT LDA TABINS
02281  1A8D  8D 4B 08           STA SAVES
02282  1A90  AD 31 08           LDA TABINS+1
02283  1A93  8D 4C 08           STA SAVES+1
02284  1A96  AD 32 08           LDA TABINE
02285  1A99  8D 4D 08           STA SAVEE
02286  1A9C  AD 33 08           LDA TABINE+1
02287  1A9F  8D 4E 08           STA SAVEE+1
02288  1AA2  60                 RTS
02289  1AA3              ;*********************************
02290  1AA3              ; RESTORE INTERNAL TABLE POINTERS
02291  1AA3              ;*********************************
02292  1AA3  AD 4B 08    RESINT LDA SAVES
02293  1AA6  8D 30 08           STA TABINS
02294  1AA9  AD 4C 08           LDA SAVES+1
02295  1AAC  8D 31 08           STA TABINS+1
02296  1AAF  AD 4D 08           LDA SAVEE
02297  1AB2  8D 32 08           STA TABINE
02298  1AB5  AD 4E 08           LDA SAVEE+1
02299  1AB8  8D 33 08           STA TABINE+1
02300  1ABB  60                 RTS
02301  1ABC              ;*********************************
02302  1ABC              ; PUT ADDRESS IN INTERNAL TABLE
02303  1ABC              ;*********************************
02304  1ABC  38          PUTI   SEC
02305  1ABD  AD 30 08           LDA TABINS
02306  1AC0  ED 32 08           SBC TABINE
02307  1AC3  8D 51 08           STA TEMP
02308  1AC6  AD 31 08           LDA TABINS+1
02309  1AC9  ED 33 08           SBC TABINE+1
02310  1ACC  0D 51 08           ORA TEMP
02311  1ACF  F0 05              BEQ PUIT
02312  1AD1              ;
02313  1AD1  20 27 1B           JSR INTCHK      ;IS ADDRESS IN TAB
02314  1AD4  B0 23              BCS INTEXT      ;IF SO EXIT
02315  1AD6              ;
02316  1AD6  AD 32 08    PUIT   LDA TABINE      ;GET LOW END
02317  1AD9  85 02              STA ZEROUR      ;STORE
02318  1ADB  AD 33 08           LDA TABINE+1    ;GET HIGH END
02319  1ADE  85 03              STA ZEROUR+1    ;STORE
02320  1AE0  A0 00              LDY #$00        ;OFFSET
02321  1AE2  AD 45 08           LDA WORKED      ;GET LOW ADDRESS
02322  1AE5  91 02              STA (ZEROUR),Y  ;PUT IN TABLE






DISASSEMBLER64......PAGE 0047

LINE# LOC   CODE        LINE


02323  1AE7  C8                 INY             ;OFFSET TO HIGH
02324  1AE8  AD 46 08           LDA WORKED+1    ;GET HIGH ADDRESS
02325  1AEB  91 02              STA (ZEROUR),Y  ;PUT IN TABLE
02326  1AED              ;
02327  1AED  20 D4 18           JSR SEMIC       ;PRINT ;
02328  1AF0  20 CB 18           JSR PWORKD      ;PRINT ADDRESS
02329  1AF3              ;*********************************
02330  1AF3  20 FB 1A           JSR INCIE       ;INC TO HIGH & LOW
02331  1AF6  4C FB 1A           JMP INCIE       ;INC TO HIGH & LOW
02332  1AF9              ;
02333  1AF9              INTEXT = *
02334  1AF9  18                 CLC             ;C=0 FOR NO MATCH
02335  1AFA  60                 RTS             ;RETURN
02336  1AFB              ;*********************************
02337  1AFB              ; INC INTERNAL END TABLE POINTER
02338  1AFB              ;*********************************
02339  1AFB  EE 32 08    INCIE  INC TABINE
02340  1AFE  D0 03              BNE *+5
02341  1B00  EE 33 08           INC TABINE+1
02342  1B03              ;*********************************
02343  1B03              ; INC INTERNAL ADDRESS POINTER
02344  1B03              ;*********************************
02345  1B03  EE 2E 08    INCI   INC TABINP
02346  1B06  D0 03              BNE *+5
02347  1B08  EE 2F 08           INC TABINP+1
02348  1B0B  60                 RTS
02349  1B0C              ;*********************************
02350  1B0C              ; GET BYTE FROM INTERNAL TABLE
02351  1B0C              ;*********************************
02352  1B0C  AD 2E 08    GETI   LDA TABINP
02353  1B0F  85 02              STA ZEROUR
02354  1B11  AD 2F 08           LDA TABINP+1
02355  1B14  85 03              STA ZEROUR+1
02356  1B16  A0 00              LDY #$00
02357  1B18  B1 02              LDA (ZEROUR),Y
02358  1B1A  60                 RTS
02359  1B1B              ;*********************************
02360  1B1B              ; CHECK IF ADDRESS IN TABLE
02361  1B1B              ;*********************************
02362  1B1B  AD 22 08    INTCHA LDA SELECT
02363  1B1E  8D 45 08           STA WORKED
02364  1B21  AD 23 08           LDA SELECT+1
02365  1B24  8D 46 08           STA WORKED+1
02366  1B27              ;*********************************
02367  1B27  20 7D 1A    INTCHK JSR INTSET
02368  1B2A  20 0C 1B    INTCH  JSR GETI
02369  1B2D  8D 47 08           STA WORKER
02370  1B30  20 03 1B           JSR INCI
02371  1B33  20 0C 1B           JSR GETI
02372  1B36  8D 48 08           STA WORKER+1
02373  1B39  38                 SEC
02374  1B3A  AD 46 08           LDA WORKED+1
02375  1B3D  ED 48 08           SBC WORKER+1
02376  1B40  8D 51 08           STA TEMP
02377  1B43  AD 45 08           LDA WORKED






DISASSEMBLER64......PAGE 0048

LINE# LOC   CODE        LINE


02378  1B46  ED 47 08           SBC WORKER
02379  1B49  0D 51 08           ORA TEMP
02380  1B4C  F0 17              BEQ INTMAT
02381  1B4E              ;*********************************
02382  1B4E  20 03 1B           JSR INCI
02383  1B51  AD 2F 08           LDA TABINP+1
02384  1B54  CD 33 08           CMP TABINE+1
02385  1B57  90 D1              BCC INTCH
02386  1B59  D0 08              BNE INTEND
02387  1B5B  AD 2E 08           LDA TABINP
02388  1B5E  CD 32 08           CMP TABINE
02389  1B61  90 C7              BCC INTCH
02390  1B63              ;*********************************
02391  1B63  18          INTEND CLC
02392  1B64  60                 RTS
02393  1B65  38          INTMAT SEC
02394  1B66  60                 RTS
02395  1B67              ;*********************************
02396  1B67              ; 2 BYTE TABLE SORT ROUTINE
02397  1B67              ;*********************************
02398  1B67  20 7D 1A    SORT   JSR INTSET      ;SET POINTERS
02399  1B6A  AD 30 08           LDA TABINS
02400  1B6D  8D 34 08           STA SMALLS
02401  1B70  8D 36 08           STA SMALLP
02402  1B73  AD 31 08           LDA TABINS+1
02403  1B76  8D 35 08           STA SMALLS+1
02404  1B79  8D 37 08           STA SMALLP+1
02405  1B7C              ;*********************************
02406  1B7C              ; PUT FIRST WORD INTO TEMP
02407  1B7C              ;*********************************
02408  1B7C  20 0C 1B    SORT1  JSR GETI
02409  1B7F  8D 51 08           STA TEMP
02410  1B82  20 03 1B           JSR INCI
02411  1B85  20 0C 1B           JSR GETI
02412  1B88  8D 52 08           STA TEMP+1
02413  1B8B              ;*********************************
02414  1B8B              ; INC TO NEXT WORD AND COMPARE
02415  1B8B              ; SMALLP POINTS TO LOW BYTE
02416  1B8B              ;*********************************
02417  1B8B  20 03 1B    SORT2  JSR INCI
02418  1B8E  AD 2E 08           LDA TABINP
02419  1B91  8D 36 08           STA SMALLP
02420  1B94  AD 2F 08           LDA TABINP+1
02421  1B97  8D 37 08           STA SMALLP+1
02422  1B9A  20 0C 1B           JSR GETI
02423  1B9D  8D 45 08           STA WORKED
02424  1BA0  20 03 1B           JSR INCI
02425  1BA3  AD 2F 08           LDA TABINP+1
02426  1BA6  CD 33 08           CMP TABINE+1
02427  1BA9  90 0D              BCC T2
02428  1BAB  D0 08              BNE S3
02429  1BAD  AD 2E 08           LDA TABINP
02430  1BB0  CD 32 08           CMP TABINE
02431  1BB3  90 03              BCC T2
02432  1BB5  4C 0D 1C    S3     JMP SORT3






DISASSEMBLER64......PAGE 0049

LINE# LOC   CODE        LINE


02433  1BB8  20 0C 1B    T2     JSR GETI
02434  1BBB  8D 46 08           STA WORKED+1
02435  1BBE  CD 52 08           CMP TEMP+1
02436  1BC1  90 0D              BCC SMALL
02437  1BC3  D0 08              BNE LARGE
02438  1BC5  AD 45 08           LDA WORKED
02439  1BC8  CD 51 08           CMP TEMP
02440  1BCB  90 03              BCC SMALL
02441  1BCD  4C 8B 1B    LARGE  JMP SORT2
02442  1BD0              ;*********************************
02443  1BD0              ; WORD IS SMALL THAN TEMP PUT IT
02444  1BD0              ; WHERE TEMP CAME FROM (SMALLS)
02445  1BD0              ;*********************************
02446  1BD0  AD 34 08    SMALL  LDA SMALLS
02447  1BD3  85 02              STA ZEROUR
02448  1BD5  AD 35 08           LDA SMALLS+1
02449  1BD8  85 03              STA ZEROUR+1
02450  1BDA  A0 00              LDY #$00
02451  1BDC  AD 45 08           LDA WORKED
02452  1BDF  91 02              STA (ZEROUR),Y
02453  1BE1  C8                 INY
02454  1BE2  AD 46 08           LDA WORKED+1
02455  1BE5  91 02              STA (ZEROUR),Y
02456  1BE7              ;*********************************
02457  1BE7              ; PUT TEMP IN PLACE OF WORD
02458  1BE7              ; SMALLP POINTS TO LO ADDRESS
02459  1BE7              ;*********************************
02460  1BE7  AD 36 08           LDA SMALLP
02461  1BEA  85 02              STA ZEROUR
02462  1BEC  AD 37 08           LDA SMALLP+1
02463  1BEF  85 03              STA ZEROUR+1
02464  1BF1  A0 00              LDY #$00
02465  1BF3  AD 51 08           LDA TEMP
02466  1BF6  91 02              STA (ZEROUR),Y
02467  1BF8  C8                 INY
02468  1BF9  AD 52 08           LDA TEMP+1
02469  1BFC  91 02              STA (ZEROUR),Y
02470  1BFE              ;*********************************
02471  1BFE  AD 34 08           LDA SMALLS
02472  1C01  8D 2E 08           STA TABINP
02473  1C04  AD 35 08           LDA SMALLS+1
02474  1C07  8D 2F 08           STA TABINP+1
02475  1C0A  4C 7C 1B           JMP SORT1
02476  1C0D              ;*********************************
02477  1C0D              ; IF AFTER SCAN TO TABLE GOTO NEXT
02478  1C0D              ; WORD IN TABLE FOR CHECK
02479  1C0D              ;*********************************
02480  1C0D  18          SORT3  CLC
02481  1C0E  AD 34 08           LDA SMALLS
02482  1C11  69 02              ADC #$02
02483  1C13  8D 34 08           STA SMALLS
02484  1C16  8D 2E 08           STA TABINP
02485  1C19  AD 35 08           LDA SMALLS+1
02486  1C1C  69 00              ADC #$00
02487  1C1E  8D 35 08           STA SMALLS+1






DISASSEMBLER64......PAGE 0050

LINE# LOC   CODE        LINE


02488  1C21  8D 2F 08           STA TABINP+1
02489  1C24  AD 35 08           LDA SMALLS+1
02490  1C27  CD 33 08           CMP TABINE+1
02491  1C2A  90 0A              BCC SORTOK
02492  1C2C  D0 0B              BNE SORT4
02493  1C2E  AD 34 08           LDA SMALLS
02494  1C31  CD 32 08           CMP TABINE
02495  1C34  B0 03              BCS SORT4
02496  1C36  4C 7C 1B    SORTOK JMP SORT1
02497  1C39              ;*********************************
02498  1C39  4C 7D 1A    SORT4  JMP INTSET
02499  1C3C              ;*********************************
02500  1C3C              ; PRINT INTERNAL ADDRESS TABLE
02501  1C3C              ;*********************************
02502  1C3C  38          INTPRT SEC
02503  1C3D  AD 30 08           LDA TABINS
02504  1C40  ED 32 08           SBC TABINE
02505  1C43  8D 51 08           STA TEMP
02506  1C46  AD 31 08           LDA TABINS+1
02507  1C49  ED 33 08           SBC TABINE+1
02508  1C4C  0D 51 08           ORA TEMP
02509  1C4F  D0 01              BNE INTOUT
02510  1C51  60                 RTS
02511  1C52              ;*********************************
02512  1C52  20 F1 14    INTOUT JSR HEADSY
02513  1C55  20 67 1B           JSR SORT
02514  1C58              ;*********************************
02515  1C58  A9 03       LOOP1  LDA #$03
02516  1C5A  8D 52 08           STA SAVA
02517  1C5D  20 0C 1B    INTPR  JSR GETI
02518  1C60  8D 45 08           STA WORKED
02519  1C63  20 03 1B           JSR INCI
02520  1C66  20 0C 1B           JSR GETI
02521  1C69  8D 46 08           STA WORKED+1
02522  1C6C  20 0E 19           JSR SPACE
02523  1C6F  20 65 23           JSR SYMOP
02524  1C72  90 0B              BCC INTPRS
02525  1C74  20 02 24           JSR FIXSYM
02526  1C77  A9 02              LDA #$02
02527  1C79  20 03 19           JSR SPACM
02528  1C7C  4C 84 1C           JMP INTPRM
02529  1C7F  A9 08       INTPRS LDA #$08
02530  1C81  20 03 19           JSR SPACM
02531  1C84  20 CB 18    INTPRM JSR PWORKD
02532  1C87  20 03 1B           JSR INCI
02533  1C8A  AD 2F 08           LDA TABINP+1
02534  1C8D  CD 33 08           CMP TABINE+1
02535  1C90  90 0A              BCC PRTOK
02536  1C92  D0 15              BNE PREND
02537  1C94  AD 2E 08           LDA TABINP
02538  1C97  CD 32 08           CMP TABINE
02539  1C9A  B0 0D              BCS PREND
02540  1C9C  CE 52 08    PRTOK  DEC SAVA
02541  1C9F  30 0B              BMI LOOP2
02542  1CA1  A9 02              LDA #$02






DISASSEMBLER64......PAGE 0051

LINE# LOC   CODE        LINE


02543  1CA3  20 03 19           JSR SPACM
02544  1CA6  4C 5D 1C           JMP INTPR
02545  1CA9  4C C6 14    PREND  JMP NEXPTS
02546  1CAC  20 C6 14    LOOP2  JSR NEXPTS
02547  1CAF  4C 58 1C           JMP LOOP1
02548  1CB2              ;*********************************
02549  1CB2              ;.FIL 0:ASC.ASM
02550  1CB2              ;*********************************
02551  1CB2              ;.END
02552  1CB2              ;*********************************
02553  1CB2              ; FILE ASC.ASM
02554  1CB2              ;*********************************
02555  1CB2              ;
02556  1CB2              ;        DISASSEMBLER64
02557  1CB2              ;    SYMBOLIC DISASSEMBLER
02558  1CB2              ;       BY DENTON MARLOWE
02559  1CB2              ;
02560  1CB2              ;  (C)1986 BY DENTON MARLOWE
02561  1CB2              ;
02562  1CB2              ;*********************************
02563  1CB2              ; DATA TABLE HANDLER
02564  1CB2              ;*********************************
02565  1CB2  AD E9 08    DATAOP LDA NDATA       ;GET NUM TABLES
02566  1CB5  F0 07              BEQ ENDAX       ;IF ZERO EXIT
02567  1CB7  A9 00              LDA #$00        ;ZERO BYTE
02568  1CB9  8D E7 08           STA CDATA       ;SET FIRST TABLE
02569  1CBC  F0 03              BEQ DATAO1      ;
02570  1CBE  4C A2 1D    ENDAX  JMP ENDDAT      ;
02571  1CC1              ;*********************************
02572  1CC1  AD E7 08    DATAO1 LDA CDATA       ;CURRENT TABLE
02573  1CC4  CD E9 08           CMP NDATA       ;LAST TABLE DONE
02574  1CC7  F0 F5              BEQ ENDAX       ;IF SO EXIT
02575  1CC9  0A                 ASL A           ;CDATA*2
02576  1CCA  0A                 ASL A           ;CDATA*4
02577  1CCB  18                 CLC
02578  1CCC  6D E7 08           ADC CDATA       ;CDATA*5
02579  1CCF  A8                 TAY             ;PUT INTO INDEX
02580  1CD0  B9 F1 08           LDA TDATA,Y     ;START LOW
02581  1CD3  8D 47 08           STA WORKER      ;STORE
02582  1CD6  C8                 INY             ;INC OFFSET
02583  1CD7  B9 F1 08           LDA TDATA,Y     ;START HIGH
02584  1CDA  8D 48 08           STA WORKER+1    ;STORE
02585  1CDD  38                 SEC             ;C=1
02586  1CDE  AD 47 08           LDA WORKER      ;
02587  1CE1  ED 22 08           SBC SELECT      ;
02588  1CE4  8D 51 08           STA TEMP        ;
02589  1CE7  AD 48 08           LDA WORKER+1    ;
02590  1CEA  ED 23 08           SBC SELECT+1    ;
02591  1CED  0D 51 08           ORA TEMP        ;
02592  1CF0  F0 05              BEQ DATAO2      ;MATCH
02593  1CF2  EE E7 08           INC CDATA       ;NEXT TABLE
02594  1CF5  D0 CA              BNE DATAO1      ;CHECK FOR MATCH
02595  1CF7              ;*********************************
02596  1CF7              ; GET TABLE DATA
02597  1CF7              ;*********************************






DISASSEMBLER64......PAGE 0052

LINE# LOC   CODE        LINE


02598  1CF7  C8          DATAO2 INY             ;INC OFFSET
02599  1CF8  B9 F1 08           LDA TDATA,Y     ;END LOW
02600  1CFB  8D E4 08           STA EAS         ;STORE
02601  1CFE  C8                 INY             ;INC OFFSET
02602  1CFF  B9 F1 08           LDA TDATA,Y     ;END HIGH
02603  1D02  8D E5 08           STA EAS+1       ;STORE
02604  1D05  C8                 INY             ;INC OFFSET
02605  1D06  B9 F1 08           LDA TDATA,Y     ;DATA TYPE
02606  1D09  8D E6 08           STA TEXTER      ;STORE
02607  1D0C  C9 53              CMP #'S'        ;IS IT SKIPPER
02608  1D0E  D0 23              BNE ASCCCC      ;
02609  1D10              ;*********************************
02610  1D10              ; SKIP RANGE OF ADDRESSES
02611  1D10              ;*********************************
02612  1D10  AD 12 08           LDA PASS
02613  1D13  CD 15 08           CMP CPASS
02614  1D16  D0 1B              BNE ASCCCC
02615  1D18  AD E4 08           LDA EAS
02616  1D1B  8D 22 08           STA SELECT
02617  1D1E  AD E5 08           LDA EAS+1
02618  1D21  8D 23 08           STA SELECT+1
02619  1D24  20 2C 19           JSR INCSL
02620  1D27  20 44 18           JSR ORGIN
02621  1D2A  20 4B 19           JSR DECSL
02622  1D2D  20 6A 18           JSR COMENT
02623  1D30  4C 9F 1D           JMP DATUT
02624  1D33              ;*********************************
02625  1D33              ; CHECK PASS
02626  1D33              ;*********************************
02627  1D33  AD 12 08    ASCCCC LDA PASS
02628  1D36  CD 14 08           CMP EPASS       ;EXTERNAL
02629  1D39  D0 0F              BNE ASCKK
02630  1D3B  AD E4 08    SKIPER LDA EAS
02631  1D3E  8D 22 08           STA SELECT
02632  1D41  AD E5 08           LDA EAS+1
02633  1D44  8D 23 08           STA SELECT+1
02634  1D47  4C 9F 1D           JMP DATUT
02635  1D4A              ;*********************************
02636  1D4A              ; DISASSEMBLER LOOP FOR DATA
02637  1D4A              ;*********************************
02638  1D4A  AD 12 08    ASCKK  LDA PASS        ;GET PASS
02639  1D4D  CD 15 08           CMP CPASS       ;IS IT LAST
02640  1D50  D0 0E              BNE ASCI1       ;NO PRINT
02641  1D52  20 6A 18           JSR COMENT      ;COMMENT LINE
02642  1D55  AD 12 08    ASCII  LDA PASS        ;GET PASS
02643  1D58  CD 15 08           CMP CPASS       ;IS IT LAST
02644  1D5B  D0 03              BNE ASCI1       ;NO PRINT
02645  1D5D  20 0E 1A           JSR PRTDAT      ;PRINT LINE
02646  1D60  20 A5 1D    ASCI1  JSR ACHECK      ;DIS ONE LINE
02647  1D63  B0 29              BCS ASCIIQ      ;IF EA STOP
02648  1D65              ;*********************************
02649  1D65  20 E1 FF           JSR STOP
02650  1D68  F0 24              BEQ ASCIIQ
02651  1D6A  20 E4 FF           JSR GETIN
02652  1D6D  F0 E6              BEQ ASCII






DISASSEMBLER64......PAGE 0053

LINE# LOC   CODE        LINE


02653  1D6F  C9 20              CMP #' '
02654  1D71  D0 E2              BNE ASCII
02655  1D73  AD 19 08           LDA DEVICE
02656  1D76  48                 PHA
02657  1D77  A9 03              LDA #$03
02658  1D79  8D 19 08           STA DEVICE
02659  1D7C  A9 F8              LDA #<PMSG
02660  1D7E  A0 09              LDY #>PMSG
02661  1D80  20 C4 13           JSR STRPNT
02662  1D83  68                 PLA
02663  1D84  8D 19 08           STA DEVICE
02664  1D87  20 E4 FF    PAUS1  JSR GETIN
02665  1D8A  F0 FB              BEQ PAUS1
02666  1D8C  D0 C7              BNE ASCII
02667  1D8E              ;*********************************
02668  1D8E  AD 12 08    ASCIIQ LDA PASS        ;GET PASS
02669  1D91  CD 15 08           CMP CPASS       ;IS IT LAST
02670  1D94  D0 09              BNE DATUT       ;EXIT
02671  1D96  20 2C 19           JSR INCSL
02672  1D99  20 6A 18           JSR COMENT      ;COMMENT LINE
02673  1D9C  20 4B 19           JSR DECSL
02674  1D9F              ;*********************************
02675  1D9F              ; EXIT TO NEXTSL
02676  1D9F              ;*********************************
02677  1D9F  A9 FF       DATUT  LDA #$FF        ;SET N=1
02678  1DA1  60                 RTS             ;RETURN
02679  1DA2  A9 00       ENDDAT LDA #$00        ;SET N=0
02680  1DA4  60                 RTS             ;RETURN
02681  1DA5              ;*********************************
02682  1DA5              ; CHECK OPTIONS
02683  1DA5              ;*********************************
02684  1DA5  AD E6 08    ACHECK LDA TEXTER      ;GET DATA TYPE
02685  1DA8  C9 34              CMP #'4'         ;WORD-1
02686  1DAA  F0 0B              BEQ AC0
02687  1DAC  C9 33              CMP #'3'         ;DBYTE
02688  1DAE  F0 0A              BEQ AC1
02689  1DB0  C9 32              CMP #'2'         ;WORD
02690  1DB2  F0 03              BEQ AC0
02691  1DB4  4C BD 1D           JMP BYTES       ;BYTE OR ASCII
02692  1DB7  4C 79 1E    AC0    JMP WORDS       ;WORD OR WORD-1
02693  1DBA  4C 49 1E    AC1    JMP DBYTES      ;DBYTES
02694  1DBD              ;*********************************
02695  1DBD              ; .BYTE DIRECTIVE
02696  1DBD              ;*********************************
02697  1DBD  AD 12 08    BYTES  LDA PASS        ;GET PASS
02698  1DC0  CD 15 08           CMP CPASS       ;IS IT LAST
02699  1DC3  D0 20              BNE BYTESX      ;IF NOT EXIT
02700  1DC5  20 9B 19           JSR PRTONE      ;PRINT BYTE
02701  1DC8  20 93 18           JSR PRAD        ;PRINT ADDRESS
02702  1DCB  A0 1F              LDY #>MBYTE     ;.BYTE
02703  1DCD  A9 35              LDA #<MBYTE     ;
02704  1DCF  20 C4 13           JSR STRPNT      ;PRINT IT
02705  1DD2  AD E6 08           LDA TEXTER      ;GET TYPE
02706  1DD5  C9 30              CMP #'0'          ;ASCII
02707  1DD7  F0 0F              BEQ ALINE       ;ASCII BYTES






DISASSEMBLER64......PAGE 0054

LINE# LOC   CODE        LINE


02708  1DD9  20 D9 18           JSR DOLLAR      ;PRINT $
02709  1DDC  20 35 19           JSR GETSL       ;GET BYTE
02710  1DDF  20 AE 13           JSR PRBYT       ;PRINT BYTE
02711  1DE2  20 07 13           JSR NEWLIN      ;NEXT LINE
02712  1DE5  4C 1C 1F    BYTESX JMP NEXTBY      ;NEXT BYTE
02713  1DE8              ;*********************************
02714  1DE8              ; ASCII TEXT
02715  1DE8              ;*********************************
02716  1DE8  A9 00       ALINE  LDA #$00        ;ZERO BYTE
02717  1DEA  8D 51 08           STA TEMP        ;STORE IN COUNT
02718  1DED              ;*********************************
02719  1DED              ; CHECK FIRST BYTE OF LINE
02720  1DED              ;*********************************
02721  1DED  20 35 19           JSR GETSL       ;GET BYTE
02722  1DF0  20 3D 1E           JSR CASCII      ;CHECK FOR ASCII
02723  1DF3  B0 39              BCS NASCII      ;IF NOT BRANCH
02724  1DF5  A9 27              LDA #'''        ;PRINT ONE QUOTE
02725  1DF7  20 1A 14           JSR PCHAR       ;PRINT IT
02726  1DFA              ;*********************************
02727  1DFA  20 35 19    ALOP   JSR GETSL       ;GET BYTE
02728  1DFD  20 3D 1E           JSR CASCII      ;IS IT ASCII
02729  1E00  B0 24              BCS EASCII      ;IF NOT END LINE
02730  1E02  20 1A 14           JSR PCHAR       ;PRINT ASCII
02731  1E05              ; REV 2-12-2018 START
02732  1E05              ; IF CHAR = ' THEN PRINT SECOND '
02733  1E05  20 35 19           JSR GETSL       ; GET BYTE AGAIN
02734  1E08  C9 27              CMP #$27        ;'''
02735  1E0A  D0 03              BNE Q00000
02736  1E0C  20 1A 14           JSR PCHAR       ;PRINT ASCII
02737  1E0F              Q00000 = *
02738  1E0F              ; REV 2-12-2018 END
02739  1E0F  20 1C 1F           JSR NEXTBY      ;INC SELECT
02740  1E12  B0 0D              BCS EASCI1      ;C=1 IF END
02741  1E14  EE 51 08           INC TEMP        ;INC COUNT
02742  1E17  AD 51 08           LDA TEMP        ;LOAD COUNT
02743  1E1A  C9 28              CMP #$28        ;40 CHAR
02744  1E1C  F0 08              BEQ EASCII      ;IF SO END
02745  1E1E  4C FA 1D           JMP ALOP        ;NEXT
02746  1E21              ;*********************************
02747  1E21  20 26 1E    EASCI1 JSR EASCII
02748  1E24  38                 SEC
02749  1E25  60                 RTS
02750  1E26              ;*********************************
02751  1E26  A9 27       EASCII LDA #'''        ;PRINT ONE QUOTE
02752  1E28  20 1A 14           JSR PCHAR       ;
02753  1E2B  4C 07 13           JMP NEWLIN      ;PRINT CR
02754  1E2E              ;*********************************
02755  1E2E  20 D9 18    NASCII JSR DOLLAR      ;PRINT $
02756  1E31  20 35 19           JSR GETSL       ;GET BYTE
02757  1E34  20 AE 13           JSR PRBYT       ;PRINT IT
02758  1E37  20 07 13           JSR NEWLIN      ;PRINT CR
02759  1E3A  4C 1C 1F           JMP NEXTBY      ;NEXT SL
02760  1E3D              ;*********************************
02761  1E3D              ; CHECK ACCUM FOR PRINTABLE ASCII
02762  1E3D              ;*********************************






DISASSEMBLER64......PAGE 0055

LINE# LOC   CODE        LINE


02763  1E3D  C9 20       CASCII CMP #$20        ;< SPACE
02764  1E3F  30 06              BMI NOASC       ;IF LESS NOASCII
02765  1E41  C9 60              CMP #$60        ;> _
02766  1E43  B0 02              BCS NOASC       ;IF GREATER NO
02767  1E45  18                 CLC             ;CLEAR CARRY OK
02768  1E46  60                 RTS             ;RETURN
02769  1E47  38          NOASC  SEC             ;SET CARRY BAD
02770  1E48  60                 RTS             ;RETURN
02771  1E49              ;*********************************
02772  1E49              ; .DBYTE DIRECTIVE
02773  1E49              ;*********************************
02774  1E49  AD 12 08    DBYTES LDA PASS        ;CHECK PASS
02775  1E4C  CD 15 08           CMP CPASS       ;LAST PASS
02776  1E4F  D0 25              BNE DBYTEX      ;EXIT
02777  1E51  20 B1 19           JSR PRTTWO      ;PRINT 2 BYTES
02778  1E54  20 93 18           JSR PRAD        ;PRINT ADDRESS
02779  1E57  A0 1F              LDY #>MDBYTE    ;.DBYTE
02780  1E59  A9 45              LDA #<MDBYTE    ;
02781  1E5B  20 C4 13           JSR STRPNT      ;PRINT IT
02782  1E5E  20 35 19           JSR GETSL       ;GET BYTE
02783  1E61  8D 46 08           STA WORKED+1    ;STORE
02784  1E64  20 2C 19           JSR INCSL       ;GET BYTE
02785  1E67  20 35 19           JSR GETSL       ;GET BYTE
02786  1E6A  8D 45 08           STA WORKED      ;STORE
02787  1E6D  20 D9 18           JSR DOLLAR      ;PRINT $
02788  1E70  20 CB 18           JSR PWORKD      ;PRINT WORD
02789  1E73  20 07 13           JSR NEWLIN      ;PRINT CR
02790  1E76  4C 1C 1F    DBYTEX JMP NEXTBY      ;NEXT SL
02791  1E79              ;*********************************
02792  1E79              ; .WORD DIRECTIVE
02793  1E79              ;*********************************
02794  1E79  AD 12 08    WORDS  LDA PASS        ;GET PASS
02795  1E7C  CD 15 08           CMP CPASS         ;LAST
02796  1E7F  D0 0D              BNE WORD1       ;IF NOT BRANCH
02797  1E81  20 B1 19           JSR PRTTWO      ;PRINT 2 BYTES
02798  1E84  20 93 18           JSR PRAD        ;PRINT ADDRESS
02799  1E87  A0 1F              LDY #>MWORD     ;.WORD
02800  1E89  A9 3D              LDA #<MWORD     ;
02801  1E8B  20 C4 13           JSR STRPNT      ;PRINT IT
02802  1E8E              ;*********************************
02803  1E8E              ; GET WORD INTO WORKED
02804  1E8E              ;*********************************
02805  1E8E  20 35 19    WORD1  JSR GETSL       ;GET BYTE
02806  1E91  8D 45 08           STA WORKED      ;STORE BYTE
02807  1E94  8D 36 08           STA SMALLP      ;STORE BYTE
02808  1E97  20 2C 19           JSR INCSL       ;GET BYTE
02809  1E9A  20 35 19           JSR GETSL       ;GET BYTE
02810  1E9D  8D 46 08           STA WORKED+1    ;STORE BYTE
02811  1EA0  8D 37 08           STA SMALLP+1    ;STORE BYTE
02812  1EA3  AD E6 08           LDA TEXTER      ;GET OPTION
02813  1EA6  C9 34              CMP #'4'          ;.WORD ADRS-1
02814  1EA8  F0 2A              BEQ WORDM       ;BRANCH
02815  1EAA              ;*********************************
02816  1EAA              ; CHECK PASS
02817  1EAA              ;*********************************






DISASSEMBLER64......PAGE 0056

LINE# LOC   CODE        LINE


02818  1EAA  AD 12 08           LDA PASS        ;CHECK PASS
02819  1EAD  CD 13 08           CMP IPASS       ;INTERNAL
02820  1EB0  F0 16              BEQ WORDPT      ;TABLE WORD
02821  1EB2  CD 14 08           CMP EPASS
02822  1EB5  F0 17              BEQ WORDSY
02823  1EB7              ;*********************************
02824  1EB7              ; PRINT WORD
02825  1EB7              ;*********************************
02826  1EB7  20 65 23           JSR SYMOP       ;CHECK SYMBOL
02827  1EBA  B0 5A              BCS WORDS3      ;C=1 SYMBOL
02828  1EBC  20 D9 18           JSR DOLLAR      ;PRINT $
02829  1EBF  20 CB 18           JSR PWORKD      ;PRINT WORD
02830  1EC2  20 07 13           JSR NEWLIN      ;PRINT CR
02831  1EC5  4C 1C 1F    WORDSX JMP NEXTBY      ;NEXT SL
02832  1EC8  20 BC 1A    WORDPT JSR PUTI        ;PUT IN TABLE
02833  1ECB  4C 1C 1F           JMP NEXTBY      ;NEXT SL
02834  1ECE  20 65 23    WORDSY JSR SYMOP
02835  1ED1  4C 1C 1F           JMP NEXTBY
02836  1ED4              ;*********************************
02837  1ED4              ; .WORD ADDRESS-1
02838  1ED4              ;*********************************
02839  1ED4  18          WORDM  CLC
02840  1ED5  AD 45 08           LDA WORKED
02841  1ED8  69 01              ADC #$01
02842  1EDA  8D 45 08           STA WORKED
02843  1EDD  AD 46 08           LDA WORKED+1
02844  1EE0  69 00              ADC #$00
02845  1EE2  8D 46 08           STA WORKED+1
02846  1EE5              ;*********************************
02847  1EE5              ; CHECK PASS
02848  1EE5              ;*********************************
02849  1EE5  AD 12 08           LDA PASS        ;CHECK PASS
02850  1EE8  CD 13 08           CMP IPASS       ;INTERNAL
02851  1EEB  F0 DB              BEQ WORDPT      ;TABLE WORD
02852  1EED  CD 14 08           CMP EPASS       ;EXTERNAL
02853  1EF0  F0 DC              BEQ WORDSY      ;TABLE WORD
02854  1EF2              ;*********************************
02855  1EF2              ; PRINT WORD
02856  1EF2              ;*********************************
02857  1EF2  20 65 23           JSR SYMOP       ;CHECK SYMBOL
02858  1EF5  90 0D              BCC WORDS2      ;C=0 NO SYMBOL
02859  1EF7  A9 2D              LDA #'-'
02860  1EF9  20 1A 14           JSR PCHAR
02861  1EFC  A9 31              LDA #'1'
02862  1EFE  20 1A 14           JSR PCHAR
02863  1F01  4C 16 1F           JMP WORDS3
02864  1F04              ;*********************************
02865  1F04  20 D9 18    WORDS2 JSR DOLLAR      ;PRINT $
02866  1F07  AD 36 08           LDA SMALLP
02867  1F0A  8D 45 08           STA WORKED
02868  1F0D  AD 37 08           LDA SMALLP+1
02869  1F10  8D 46 08           STA WORKED+1
02870  1F13  20 CB 18           JSR PWORKD      ;PRINT WORD
02871  1F16  20 07 13    WORDS3 JSR NEWLIN      ;PRINT CR
02872  1F19  4C 1C 1F    WORDXX JMP NEXTBY      ;NEXT SL






DISASSEMBLER64......PAGE 0057

LINE# LOC   CODE        LINE


02873  1F1C              ;*********************************
02874  1F1C              ; SELECT NEXT BYTE OF DATA
02875  1F1C              ;*********************************
02876  1F1C  AD 23 08    NEXTBY LDA SELECT+1
02877  1F1F  CD E5 08           CMP EAS+1
02878  1F22  90 0A              BCC SBLOK
02879  1F24  D0 0D              BNE NOBINC
02880  1F26  AD 22 08           LDA SELECT
02881  1F29  CD E4 08           CMP EAS
02882  1F2C  B0 05              BCS NOBINC
02883  1F2E  20 2C 19    SBLOK  JSR INCSL
02884  1F31  18                 CLC
02885  1F32  60                 RTS
02886  1F33  38          NOBINC SEC
02887  1F34  60                 RTS
02888  1F35              ;*********************************
02889  1F35  20 2E       MBYTE  .BYTE ' .BYTE ',0
02889  1F3C  00 
02890  1F3D  20 2E       MWORD  .BYTE ' .WORD ',0
02890  1F44  00 
02891  1F45  20 2E       MDBYTE .BYTE ' .DBYTE ',0
02891  1F4D  00 
02892  1F4E              ;*********************************
02893  1F4E              ;.FIL 0:TABLE.ASM
02894  1F4E              ;*********************************
02895  1F4E              ;.END
02896  1F4E              ;*********************************
02897  1F4E              ; FILE TABLE.ASM
02898  1F4E              ;*********************************
02899  1F4E              ;
02900  1F4E              ;        DISASSEMBLER64
02901  1F4E              ;    SYMBOLIC DISASSEMBLER
02902  1F4E              ;       BY DENTON MARLOWE
02903  1F4E              ;
02904  1F4E              ;  (C)1986 BY DENTON MARLOWE
02905  1F4E              ;
02906  1F4E              ;*********************************
02907  1F4E              ;       PRINT MNEMONIC
02908  1F4E              ;
02909  1F4E              ; OPCODE IN A
02910  1F4E              ;
02911  1F4E              ; BUG ILLEGAL OPCODE WOULD PRINT OUT AS
02912  1F4E              ;
02913  1F4E              ; ZZZZ XX                 ...  .BYTE $XX ;??? ILL
EGAL OPCODE
02914  1F4E              ; WHERE THE "..." WERE THREE NULLS
02915  1F4E              ; BECAUSE ILLEGAL OPCODE MNEMONIC IS CODES AS 0,0
,0
02916  1F4E              ;
02917  1F4E              ;*********************************
02918  1F4E  A2 03       MNEMON LDX #3          ;3 CHARACTERS
02919  1F50  8E 51 08           STX TEMP        ;COUNTER
02920  1F53  AA                 TAX             ;CODE IS INDEX
02921  1F54  BD C9 20           LDA MCODES,X    ;GET OFFSET
02922  1F57  AA                 TAX             ;INDEX OFFSET
02923  1F58  BD F1 1F    MNLOOP LDA MNAMES,X    ;GET CHARACTER
02924  1F5B              ;BEGIN REV 2017-0






DISASSEMBLER64......PAGE 0058

LINE# LOC   CODE        LINE


02925  1F5B  F0 09              BEQ ILLOP       ;ILLEGAL OPCODE MNEMONIC C
HAR IS A NULL
02926  1F5D              ;END REV 2017-0
02927  1F5D  8E 53 08           STX SAVX        ;SAVE INDEX
02928  1F60  20 1A 14           JSR PCHAR       ;PRINT CHAR
02929  1F63  AE 53 08           LDX SAVX        ;GET INDEX
02930  1F66              ;BEGIN REV 2017-1
02931  1F66              ILLOP  = *
02932  1F66              ;END REV 2017-0
02933  1F66  E8                 INX             ;NEXT CHAR
02934  1F67  CE 51 08           DEC TEMP        ;DEC COUNT
02935  1F6A  D0 EC              BNE MNLOOP      ;LOOP TILL 0
02936  1F6C  60                 RTS             ;RETURN
02937  1F6D              ;*********************************
02938  1F6D              ;        PRINT OPERAND
02939  1F6D              ;*********************************
02940  1F6D  48          PRTASS PHA             ;STACK INDEX
02941  1F6E  20 0E 1A           JSR PRTDAT      ;PRINT LINE DATA
02942  1F71  68                 PLA             ;PULL INDEX
02943  1F72  A8                 TAY             ;SAVE INDEX
02944  1F73  A9 9D              LDA #<SUBP
02945  1F75  A2 1F              LDX #>SUBP
02946  1F77  4C 87 1F           JMP GETOPE      ;LOOK UP ROUTINE
02947  1F7A              ;*********************************
02948  1F7A  A8          OPERN1 TAY             ;SAVE INDEX
02949  1F7B  A9 B9              LDA #<SUBS1
02950  1F7D  A2 1F              LDX #>SUBS1
02951  1F7F  4C 87 1F           JMP GETOPE      ;LOOK UP ROUTINE
02952  1F82              ;*********************************
02953  1F82  A8          OPERND TAY             ;SAVE INDEX
02954  1F83  A9 D5              LDA #<SUBS
02955  1F85  A2 1F              LDX #>SUBS
02956  1F87              ;*********************************
02957  1F87              ; LOOK UP AND JMP TO ROUTINE
02958  1F87              ;*********************************
02959  1F87  85 02       GETOPE STA ZEROUR      ;LOW TABLE
02960  1F89  86 03              STX ZEROUR+1    ;HIGH TABLE
02961  1F8B  B9 C9 21           LDA MODES,Y     ;GET OFFSET
02962  1F8E  A8                 TAY             ;INDEX OFFSET
02963  1F8F  B1 02              LDA (ZEROUR),Y  ;GET LOW BYTE
02964  1F91  8D 4F 08           STA ADRS        ;STORE
02965  1F94  C8                 INY             ;INC INDEX
02966  1F95  B1 02              LDA (ZEROUR),Y  ;GET HIGH BYTE
02967  1F97  8D 50 08           STA ADRS+1      ;STORE
02968  1F9A  6C 4F 08           JMP (ADRS)      ;INDIRECT JMP
02969  1F9D              ;*********************************
02970  1F9D              ; TABLE OF ADDRESSING MODE SUBS
02971  1F9D              ;*********************************
02972  1F9D              ; MACHINE LANGUAGE ROUTINES
02973  1F9D              ;*********************************
02974  1F9D              SUBP   = *             ; MODES
02975  1F9D  9B 19       .WORD  PRTONE          ; 0  $00
02976  1F9F  9B 19       .WORD  PRTONE          ; 2  $02
02977  1FA1  B1 19       .WORD  PRTTWO          ; 4  $04
02978  1FA3  B1 19       .WORD  PRTTWO          ; 6  $06
02979  1FA5  B1 19       .WORD  PRTTWO          ; 8  $08






DISASSEMBLER64......PAGE 0059

LINE# LOC   CODE        LINE


02980  1FA7  B1 19       .WORD  PRTTWO          ; 10 $0A
02981  1FA9  D6 19       .WORD  PRTTHE          ; 12 $0C
02982  1FAB  D6 19       .WORD  PRTTHE          ; 14 $0E
02983  1FAD  D6 19       .WORD  PRTTHE          ; 16 $10
02984  1FAF  9B 19       .WORD  PRTONE          ; 18 $12
02985  1FB1  B1 19       .WORD  PRTTWO          ; 20 $14
02986  1FB3  B1 19       .WORD  PRTTWO          ; 22 $16
02987  1FB5  B1 19       .WORD  PRTTWO          ; 24 $18
02988  1FB7  D6 19       .WORD  PRTTHE          ; 26 $1A
02989  1FB9              ;*********************************
02990  1FB9              ; CODE ANALYSIS ROUTINES
02991  1FB9              ;*********************************
02992  1FB9              SUBS1  = *             ; MODES
02993  1FB9  92 17       .WORD  IMPONE          ; 0  $00
02994  1FBB  92 17       .WORD  IMPONE          ; 2  $02
02995  1FBD  0D 17       .WORD  IMMEDT          ; 4  $04
02996  1FBF  56 16       .WORD  ONEBYT          ; 6  $06
02997  1FC1  56 16       .WORD  ONEBYT          ; 8  $08
02998  1FC3  56 16       .WORD  ONEBYT          ; 10 $0A
02999  1FC5  8B 16       .WORD  TWOBYT          ; 12 $0C
03000  1FC7  8B 16       .WORD  TWOBYT          ; 14 $0E
03001  1FC9  8B 16       .WORD  TWOBYT          ; 16 $10
03002  1FCB  92 17       .WORD  IMPONE          ; 18 $12
03003  1FCD  C9 17       .WORD  RELATV          ; 20 $14
03004  1FCF  56 16       .WORD  ONEBYT          ; 22 $16
03005  1FD1  56 16       .WORD  ONEBYT          ; 24 $18
03006  1FD3  8B 16       .WORD  TWOBYT          ; 26 $1A
03007  1FD5              ;*********************************
03008  1FD5              ; FINAL PASS ADDRESSING MODES
03009  1FD5              ;*********************************
03010  1FD5              SUBS   = *             ; MODES
03011  1FD5  C7 16       .WORD  ILLEGL          ; 0  $00
03012  1FD7  08 17       .WORD  ACC             ; 2  $02
03013  1FD9  0D 17       .WORD  IMMEDT          ; 4  $04
03014  1FDB  44 17       .WORD  ZEROPG          ; 6  $06
03015  1FDD  47 17       .WORD  ZEROX           ; 8  $08
03016  1FDF  4D 17       .WORD  ZEROY           ; 10 $0A
03017  1FE1  54 17       .WORD  ABSLUT          ; 12 $0C
03018  1FE3  79 17       .WORD  ABSX            ; 14 $0E
03019  1FE5  7F 17       .WORD  ABSY            ; 16 $10
03020  1FE7  85 17       .WORD  IMPLID          ; 18 $12
03021  1FE9  C9 17       .WORD  RELATV          ; 20 $14
03022  1FEB  B4 17       .WORD  INDX            ; 22 $16
03023  1FED  BD 17       .WORD  INDY            ; 24 $18
03024  1FEF  9F 17       .WORD  INDRCT          ; 26 $1A
03025  1FF1              ;*********************************
03026  1FF1              ; LIST OF MNEMONICS
03027  1FF1              ;*********************************
03028  1FF1              MNAMES = *             ; MCODES
03029  1FF1  00          .BYTE  0,0,0           ; 0   $00
03029  1FF2  00 
03029  1FF3  00 
03030  1FF4  41 44 43    .BYTE  'ADC'           ; 3   $03
03031  1FF7  41 4E 44    .BYTE  'AND'           ; 6   $06
03032  1FFA  41 53 4C    .BYTE  'ASL'           ; 9   $09






DISASSEMBLER64......PAGE 0060

LINE# LOC   CODE        LINE


03033  1FFD  42 43 43    .BYTE  'BCC'           ; 12  $0C
03034  2000  42 43 53    .BYTE  'BCS'           ; 15  $0F
03035  2003  42 45 51    .BYTE  'BEQ'           ; 18  $12
03036  2006  42 49 54    .BYTE  'BIT'           ; 21  $15
03037  2009  42 4D 49    .BYTE  'BMI'           ; 24  $18
03038  200C  42 4E 45    .BYTE  'BNE'           ; 27  $1B
03039  200F  42 50 4C    .BYTE  'BPL'           ; 30  $1E
03040  2012  42 52 4B    .BYTE  'BRK'           ; 33  $21
03041  2015  42 56 43    .BYTE  'BVC'           ; 36  $24
03042  2018  42 56 53    .BYTE  'BVS'           ; 39  $27
03043  201B  43 4C 43    .BYTE  'CLC'           ; 42  $2A
03044  201E  43 4C 44    .BYTE  'CLD'           ; 45  $2D
03045  2021  43 4C 49    .BYTE  'CLI'           ; 48  $30
03046  2024  43 4C 56    .BYTE  'CLV'           ; 51  $33
03047  2027  43 4D 50    .BYTE  'CMP'           ; 54  $36
03048  202A  43 50 58    .BYTE  'CPX'           ; 57  $39
03049  202D  43 50 59    .BYTE  'CPY'           ; 60  $3C
03050  2030  44 45 43    .BYTE  'DEC'           ; 63  $3F
03051  2033  44 45 58    .BYTE  'DEX'           ; 66  $42
03052  2036  44 45 59    .BYTE  'DEY'           ; 69  $45
03053  2039  45 4F 52    .BYTE  'EOR'           ; 72  $48
03054  203C  49 4E 43    .BYTE  'INC'           ; 75  $4B
03055  203F  49 4E 58    .BYTE  'INX'           ; 78  $4E
03056  2042  49 4E 59    .BYTE  'INY'           ; 81  $51
03057  2045  4A 4D 50    .BYTE  'JMP'           ; 84  $54
03058  2048  4A 53 52    .BYTE  'JSR'           ; 87  $57
03059  204B  4C 44 41    .BYTE  'LDA'           ; 90  $5A
03060  204E  4C 44 58    .BYTE  'LDX'           ; 93  $5D
03061  2051  4C 44 59    .BYTE  'LDY'           ; 96  $60
03062  2054  4C 53 52    .BYTE  'LSR'           ; 99  $63
03063  2057  4E 4F 50    .BYTE  'NOP'           ; 102 $66
03064  205A  4F 52 41    .BYTE  'ORA'           ; 105 $69
03065  205D  50 48 41    .BYTE  'PHA'           ; 108 $6C
03066  2060  50 48 50    .BYTE  'PHP'           ; 111 $6F
03067  2063  50 4C 41    .BYTE  'PLA'           ; 114 $72
03068  2066  50 4C 50    .BYTE  'PLP'           ; 117 $75
03069  2069  52 4F 4C    .BYTE  'ROL'           ; 120 $78
03070  206C  52 4F 52    .BYTE  'ROR'           ; 123 $7B
03071  206F  52 54 49    .BYTE  'RTI'           ; 126 $7E
03072  2072  52 54 53    .BYTE  'RTS'           ; 129 $81
03073  2075  53 42 43    .BYTE  'SBC'           ; 132 $84
03074  2078  53 45 43    .BYTE  'SEC'           ; 135 $87
03075  207B  53 45 44    .BYTE  'SED'           ; 138 $8A
03076  207E  53 45 49    .BYTE  'SEI'           ; 141 $8D
03077  2081  53 54 41    .BYTE  'STA'           ; 144 $90
03078  2084  53 54 58    .BYTE  'STX'           ; 147 $93
03079  2087  53 54 59    .BYTE  'STY'           ; 150 $96
03080  208A  54 41 58    .BYTE  'TAX'           ; 153 $99
03081  208D  54 41 59    .BYTE  'TAY'           ; 156 $9C
03082  2090  54 53 58    .BYTE  'TSX'           ; 159 $9F
03083  2093  54 58 41    .BYTE  'TXA'           ; 162 $A2
03084  2096  54 58 53    .BYTE  'TXS'           ; 165 $A5
03085  2099  54 59 41    .BYTE  'TYA'           ; 168 $A8
03086  209C              ;*********************************
03087  209C              ; QUASI-OPCODES






DISASSEMBLER64......PAGE 0061

LINE# LOC   CODE        LINE


03088  209C              ;*********************************
03089  209C  41 53 4F    .BYTE  'ASO'           ; 171 $AB
03090  209F  52 4C 41    .BYTE  'RLA'           ; 174 $AE
03091  20A2  4C 53 45    .BYTE  'LSE'           ; 177 $B1
03092  20A5  52 52 41    .BYTE  'RRA'           ; 180 $B4
03093  20A8  41 58 53    .BYTE  'AXS'           ; 183 $B7
03094  20AB  4C 41 58    .BYTE  'LAX'           ; 186 $BA
03095  20AE  44 43 4D    .BYTE  'DCM'           ; 189 $BD
03096  20B1  49 4E 53    .BYTE  'INS'           ; 192 $C0
03097  20B4  41 4C 52    .BYTE  'ALR'           ; 195 $C3
03098  20B7  41 52 52    .BYTE  'ARR'           ; 198 $C6
03099  20BA  4F 41 4C    .BYTE  'OAL'           ; 201 $C9
03100  20BD  53 41 58    .BYTE  'SAX'           ; 204 $CC
03101  20C0  4E 4F 50    .BYTE  'NOP'           ; 207 $CF
03102  20C3  53 4B 42    .BYTE  'SKB'           ; 210 $D2
03103  20C6  53 4B 57    .BYTE  'SKW'           ; 213 $D5
03104  20C9              ;*********************************
03105  20C9              ; TABLE OF MNEMONIC CODES
03106  20C9              ;*********************************
03107  20C9              ;
03108  20C9              ;A MNEMONIC'S CODE IS ITS OFFSET
03109  20C9              ;    INTO MNAMES, THE LIST OF
03110  20C9              ;         MNEONIC NAMES.
03111  20C9              ;
03112  20C9              ;*********************************
03113  20C9              MCODES = *
03114  20C9              ;     0X  1X  2X  3X  4X  5X  6X  7X
03115  20C9              ; 0X  BRK ORA KIL SLO NOP ORA ASL SLO
03116  20C9  21          .BYTE  $21,$69,$00,$00,$00,$69,$09,$00
03116  20CA  69 
03116  20CB  00 
03116  20CC  00 
03116  20CD  00 
03116  20CE  69 
03116  20CF  09 
03116  20D0  00 
03117  20D1              ;     8X  9X  AX  BX  CX  DX  EX  FX
03118  20D1                                     ;PHP ORA ASL ANC NOP ORA A
SL SLO
03119  20D1  6F          .BYTE  $6F,$69,$09,$00,$00,$69,$09,$00
03119  20D2  69 
03119  20D3  09 
03119  20D4  00 
03119  20D5  00 
03119  20D6  69 
03119  20D7  09 
03119  20D8  00 
03120  20D9              ; 1X  BPL ORA KIL SLO NOP ORA ASL SLO
03121  20D9  1E          .BYTE  $1E,$69,$00,$00,$00,$69,$09,$00
03121  20DA  69 
03121  20DB  00 
03121  20DC  00 
03121  20DD  00 
03121  20DE  69 
03121  20DF  09 
03121  20E0  00 






DISASSEMBLER64......PAGE 0062

LINE# LOC   CODE        LINE


03122  20E1                                     ;CLC ORA NOP SLO NOP ORA A
SL SLO
03123  20E1  2A          .BYTE  $2A,$69,$00,$00,$00,$69,$09,$00
03123  20E2  69 
03123  20E3  00 
03123  20E4  00 
03123  20E5  00 
03123  20E6  69 
03123  20E7  09 
03123  20E8  00 
03124  20E9              ; 2X  JSR AND KIL RLA BIT AND ROL RLA
03125  20E9  57          .BYTE  $57,$06,$00,$00,$15,$06,$78,$00
03125  20EA  06 
03125  20EB  00 
03125  20EC  00 
03125  20ED  15 
03125  20EE  06 
03125  20EF  78 
03125  20F0  00 
03126  20F1                                     ;PLP ABD ROL ANC BIT AND R
OL RLA
03127  20F1  75          .BYTE  $75,$06,$78,$00,$15,$06,$78,$00
03127  20F2  06 
03127  20F3  78 
03127  20F4  00 
03127  20F5  15 
03127  20F6  06 
03127  20F7  78 
03127  20F8  00 
03128  20F9              ; 3X  BMI AND KIL RLA NOP AND ROL RLA
03129  20F9  18          .BYTE  $18,$06,$00,$00,$00,$06,$78,$00
03129  20FA  06 
03129  20FB  00 
03129  20FC  00 
03129  20FD  00 
03129  20FE  06 
03129  20FF  78 
03129  2100  00 
03130  2101              ;     SEC AND NOP RLA NOP AND ROL RLA
03131  2101  87          .BYTE  $87,$06,$00,$00,$00,$06,$78,$00
03131  2102  06 
03131  2103  00 
03131  2104  00 
03131  2105  00 
03131  2106  06 
03131  2107  78 
03131  2108  00 
03132  2109              ; 4X  RTI EOR KIL SRE NOP EOR LSR SRE
03133  2109  7E          .BYTE  $7E,$48,$00,$00,$00,$48,$63,$00
03133  210A  48 
03133  210B  00 
03133  210C  00 
03133  210D  00 
03133  210E  48 
03133  210F  63 
03133  2110  00 
03134  2111              ;     PHA EOR LSR ALR JMP EOR LSR SRE






DISASSEMBLER64......PAGE 0063

LINE# LOC   CODE        LINE


03135  2111  6C          .BYTE  $6C,$48,$63,$00,$54,$48,$63,$00
03135  2112  48 
03135  2113  63 
03135  2114  00 
03135  2115  54 
03135  2116  48 
03135  2117  63 
03135  2118  00 
03136  2119              ; 5X  BVC EOR KIL SRE NOP EOR LSR SRE
03137  2119  24          .BYTE  $24,$48,$00,$00,$00,$48,$63,$00
03137  211A  48 
03137  211B  00 
03137  211C  00 
03137  211D  00 
03137  211E  48 
03137  211F  63 
03137  2120  00 
03138  2121              ;     CLI EOR NOP SRE NOP EOR LSR SRE
03139  2121  30          .BYTE  $30,$48,$00,$00,$00,$48,$63,$00
03139  2122  48 
03139  2123  00 
03139  2124  00 
03139  2125  00 
03139  2126  48 
03139  2127  63 
03139  2128  00 
03140  2129              ; 6X  RTS ADC KIL RRA NOP ADC ROR RRA
03141  2129  81          .BYTE  $81,$03,$00,$00,$00,$03,$7B,$00
03141  212A  03 
03141  212B  00 
03141  212C  00 
03141  212D  00 
03141  212E  03 
03141  212F  7B 
03141  2130  00 
03142  2131              ;     PLA ADC ROR ARR JMP ADC ROR RRA
03143  2131  72          .BYTE  $72,$03,$7B,$00,$54,$03,$7B,$00
03143  2132  03 
03143  2133  7B 
03143  2134  00 
03143  2135  54 
03143  2136  03 
03143  2137  7B 
03143  2138  00 
03144  2139              ; 7X  BVS ADC KIL RRA NOP ADC ROR RRA
03145  2139  27          .BYTE  $27,$03,$00,$00,$00,$03,$7B,$00
03145  213A  03 
03145  213B  00 
03145  213C  00 
03145  213D  00 
03145  213E  03 
03145  213F  7B 
03145  2140  00 
03146  2141              ;     SEI ADC NOP RRA NOP ADC ROR RRA
03147  2141  8D          .BYTE  $8D,$03,$00,$00,$00,$03,$7B,$00






DISASSEMBLER64......PAGE 0064

LINE# LOC   CODE        LINE


03147  2142  03 
03147  2143  00 
03147  2144  00 
03147  2145  00 
03147  2146  03 
03147  2147  7B 
03147  2148  00 
03148  2149              ; 8X  NOP STA NOP SAX STY STA STX SAX
03149  2149  00          .BYTE  $00,$90,$00,$00,$96,$90,$93,$00
03149  214A  90 
03149  214B  00 
03149  214C  00 
03149  214D  96 
03149  214E  90 
03149  214F  93 
03149  2150  00 
03150  2151              ;     DEY NOP TXA XXA STY STA STX SAX
03151  2151  45          .BYTE  $45,$00,$A2,$00,$96,$90,$93,$00
03151  2152  00 
03151  2153  A2 
03151  2154  00 
03151  2155  96 
03151  2156  90 
03151  2157  93 
03151  2158  00 
03152  2159              ; 9X  BCC STA KIL AHX STY STA STX SAX 
03153  2159  0C          .BYTE  $0C,$90,$00,$00,$96,$90,$93,$00
03153  215A  90 
03153  215B  00 
03153  215C  00 
03153  215D  96 
03153  215E  90 
03153  215F  93 
03153  2160  00 
03154  2161              ;     TYA STA TXS TAS SHY STA SHX AHX
03155  2161  A8          .BYTE  $A8,$90,$A5,$00,$00,$90,$00,$00
03155  2162  90 
03155  2163  A5 
03155  2164  00 
03155  2165  00 
03155  2166  90 
03155  2167  00 
03155  2168  00 
03156  2169              ; AX  LDY LDA LDX LAX LDY LDA LDX LAX
03157  2169  60          .BYTE  $60,$5A,$5D,$00,$60,$5A,$5D,$00
03157  216A  5A 
03157  216B  5D 
03157  216C  00 
03157  216D  60 
03157  216E  5A 
03157  216F  5D 
03157  2170  00 
03158  2171              ;     TAY LDA TAX LAX LDY LDA LDX LAX
03159  2171  9C          .BYTE  $9C,$5A,$99,$00,$60,$5A,$5D,$00
03159  2172  5A 






DISASSEMBLER64......PAGE 0065

LINE# LOC   CODE        LINE


03159  2173  99 
03159  2174  00 
03159  2175  60 
03159  2176  5A 
03159  2177  5D 
03159  2178  00 
03160  2179              ; BX  BCS LDA KIL LAX LDY LDA LDX LAX
03161  2179  0F          .BYTE  $0F,$5A,$00,$00,$60,$5A,$5D,$00
03161  217A  5A 
03161  217B  00 
03161  217C  00 
03161  217D  60 
03161  217E  5A 
03161  217F  5D 
03161  2180  00 
03162  2181              ;     CLV LDA TSX LAS LDY LDA LDX LAX
03163  2181  33          .BYTE  $33,$5A,$9F,$00,$60,$5A,$5D,$00
03163  2182  5A 
03163  2183  9F 
03163  2184  00 
03163  2185  60 
03163  2186  5A 
03163  2187  5D 
03163  2188  00 
03164  2189              ; CX  CPY CMP NOP DCP CPY CMP DEC DCP
03165  2189  3C          .BYTE  $3C,$36,$00,$00,$3C,$36,$3F,$00
03165  218A  36 
03165  218B  00 
03165  218C  00 
03165  218D  3C 
03165  218E  36 
03165  218F  3F 
03165  2190  00 
03166  2191              ;     INY CMP DEX AXS CPY CMP DEC DCP
03167  2191  51          .BYTE  $51,$36,$42,$00,$3C,$36,$3F,$00
03167  2192  36 
03167  2193  42 
03167  2194  00 
03167  2195  3C 
03167  2196  36 
03167  2197  3F 
03167  2198  00 
03168  2199              ; DX  BNE CMP KIL DCP NOP CMP DEC DCP
03169  2199  1B          .BYTE  $1B,$36,$00,$00,$00,$36,$3F,$00
03169  219A  36 
03169  219B  00 
03169  219C  00 
03169  219D  00 
03169  219E  36 
03169  219F  3F 
03169  21A0  00 
03170  21A1              ;     CLD CMP NOP DCP NOP CMP DEC DCP
03171  21A1  2D          .BYTE  $2D,$36,$00,$00,$00,$36,$3F,$00
03171  21A2  36 
03171  21A3  00 






DISASSEMBLER64......PAGE 0066

LINE# LOC   CODE        LINE


03171  21A4  00 
03171  21A5  00 
03171  21A6  36 
03171  21A7  3F 
03171  21A8  00 
03172  21A9              ; EX  CPX SBC NOP ISC CPX SBC INC ISC
03173  21A9  39          .BYTE  $39,$84,$00,$00,$39,$84,$4B,$00
03173  21AA  84 
03173  21AB  00 
03173  21AC  00 
03173  21AD  39 
03173  21AE  84 
03173  21AF  4B 
03173  21B0  00 
03174  21B1              ;     INX SBC NOP SBC CPX SBC INC ISC
03175  21B1  4E          .BYTE  $4E,$84,$66,$00,$39,$84,$4B,$00
03175  21B2  84 
03175  21B3  66 
03175  21B4  00 
03175  21B5  39 
03175  21B6  84 
03175  21B7  4B 
03175  21B8  00 
03176  21B9              ; FX  BEQ SBC KIL ISC NOP SBC INC ISC
03177  21B9  12          .BYTE  $12,$84,$00,$00,$00,$84,$4B,$00
03177  21BA  84 
03177  21BB  00 
03177  21BC  00 
03177  21BD  00 
03177  21BE  84 
03177  21BF  4B 
03177  21C0  00 
03178  21C1              ;     SED SBC NOP ISC NOP SBC INC ISC
03179  21C1  8A          .BYTE  $8A,$84,$00,$00,$00,$84,$4B,$00
03179  21C2  84 
03179  21C3  00 
03179  21C4  00 
03179  21C5  00 
03179  21C6  84 
03179  21C7  4B 
03179  21C8  00 
03180  21C9              ;*********************************
03181  21C9              ; TABLE OF ADDRESSING MODE CODES
03182  21C9              ;*********************************
03183  21C9              ;
03184  21C9              ; AN ADDRESSING MODE'S CODE IS
03185  21C9              ; ITS OFFSET INTO SUBS, THE TABLE
03186  21C9              ; OF ADDRESSING MODE SUBROUTINES
03187  21C9              ;
03188  21C9              ; ILLEGL ; 0  $00
03189  21C9              ; ACC    ; 2  $02
03190  21C9              ; IMMEDT ; 4  $04
03191  21C9              ; ZEROPG ; 6  $06
03192  21C9              ; ZEROX  ; 8  $08
03193  21C9              ; ZEROY  ; 10 $0A






DISASSEMBLER64......PAGE 0067

LINE# LOC   CODE        LINE


03194  21C9              ; ABSLUT ; 12 $0C
03195  21C9              ; ABSX   ; 14 $0E
03196  21C9              ; ABSY   ; 16 $10
03197  21C9              ; IMPLID ; 18 $12
03198  21C9              ; RELATV ; 20 $14
03199  21C9              ; INDX   ; 22 $16
03200  21C9              ; INDY   ; 24 $18
03201  21C9              ; INDRCT ; 26 $1A
03202  21C9              ;*********************************
03203  21C9              MODES  = * 
03204  21C9              ; 0X   0  1 2 3 4 5 6 7
03205  21C9  12          .BYTE  18,22,0,0,0,6,6,0
03205  21CA  16 
03205  21CB  00 
03205  21CC  00 
03205  21CD  00 
03205  21CE  06 
03205  21CF  06 
03205  21D0  00 
03206  21D1              ;      8  9 A B C D E F
03207  21D1  12          .BYTE  18,4,2,0,0,12,12,0
03207  21D2  04 
03207  21D3  02 
03207  21D4  00 
03207  21D5  00 
03207  21D6  0C 
03207  21D7  0C 
03207  21D8  00 
03208  21D9              ; 1X   0  1 2 3 4 5 6 7
03209  21D9  14          .BYTE  20,24,0,0,0,8,8,0
03209  21DA  18 
03209  21DB  00 
03209  21DC  00 
03209  21DD  00 
03209  21DE  08 
03209  21DF  08 
03209  21E0  00 
03210  21E1              ;      8  9 A B C D E F
03211  21E1  12          .BYTE  18,16,0,0,0,14,14,0
03211  21E2  10 
03211  21E3  00 
03211  21E4  00 
03211  21E5  00 
03211  21E6  0E 
03211  21E7  0E 
03211  21E8  00 
03212  21E9              ; 2X   0  1 2 3 4 5 6 7
03213  21E9  0C          .BYTE  12,22,0,0,6,6,6,0
03213  21EA  16 
03213  21EB  00 
03213  21EC  00 
03213  21ED  06 
03213  21EE  06 
03213  21EF  06 
03213  21F0  00 






DISASSEMBLER64......PAGE 0068

LINE# LOC   CODE        LINE


03214  21F1              ;.BYTE 12,22,0,0,28,6,6,0
03215  21F1              ;      8  9 A B C D E F
03216  21F1  12          .BYTE  18,4,2,0,12,12,12,0
03216  21F2  04 
03216  21F3  02 
03216  21F4  00 
03216  21F5  0C 
03216  21F6  0C 
03216  21F7  0C 
03216  21F8  00 
03217  21F9              ;.BYTE 18,4,2,0,30,12,12,0
03218  21F9              ; 3X   0  1 2 3 4 5 6 7
03219  21F9  14          .BYTE  20,24,0,0,0,8,8,0
03219  21FA  18 
03219  21FB  00 
03219  21FC  00 
03219  21FD  00 
03219  21FE  08 
03219  21FF  08 
03219  2200  00 
03220  2201              ;      8  9 A B C D E F
03221  2201  12          .BYTE  18,16,0,0,0,14,14,0
03221  2202  10 
03221  2203  00 
03221  2204  00 
03221  2205  00 
03221  2206  0E 
03221  2207  0E 
03221  2208  00 
03222  2209              ; 4X   0  1 2 3 4 5 6 7
03223  2209  12          .BYTE  18,22,0,0,0,6,6,0
03223  220A  16 
03223  220B  00 
03223  220C  00 
03223  220D  00 
03223  220E  06 
03223  220F  06 
03223  2210  00 
03224  2211              ;      8  9 A B C D E F
03225  2211  12          .BYTE  18,4,2,0,12,12,12,0
03225  2212  04 
03225  2213  02 
03225  2214  00 
03225  2215  0C 
03225  2216  0C 
03225  2217  0C 
03225  2218  00 
03226  2219              ; 5X   0  1 2 3 4 5 6 7
03227  2219  14          .BYTE  20,24,0,0,0,8,8,0
03227  221A  18 
03227  221B  00 
03227  221C  00 
03227  221D  00 
03227  221E  08 
03227  221F  08 






DISASSEMBLER64......PAGE 0069

LINE# LOC   CODE        LINE


03227  2220  00 
03228  2221              ;      8  9 A B C D E F
03229  2221  12          .BYTE  18,16,0,0,0,14,14,0
03229  2222  10 
03229  2223  00 
03229  2224  00 
03229  2225  00 
03229  2226  0E 
03229  2227  0E 
03229  2228  00 
03230  2229              ; 6X   0  1 2 3 4 5 6 7
03231  2229  12          .BYTE  18,22,0,0,0,6,6,0
03231  222A  16 
03231  222B  00 
03231  222C  00 
03231  222D  00 
03231  222E  06 
03231  222F  06 
03231  2230  00 
03232  2231              ;      8  9 A B C D E F
03233  2231  12          .BYTE  18,4,2,0,26,12,12,0
03233  2232  04 
03233  2233  02 
03233  2234  00 
03233  2235  1A 
03233  2236  0C 
03233  2237  0C 
03233  2238  00 
03234  2239              ; 7X   0  1 2 3 4 5 6 7
03235  2239  14          .BYTE  20,24,0,0,0,8,8,0
03235  223A  18 
03235  223B  00 
03235  223C  00 
03235  223D  00 
03235  223E  08 
03235  223F  08 
03235  2240  00 
03236  2241              ;      8  9 A B C D E F
03237  2241  12          .BYTE  18,16,0,0,0,14,14,0
03237  2242  10 
03237  2243  00 
03237  2244  00 
03237  2245  00 
03237  2246  0E 
03237  2247  0E 
03237  2248  00 
03238  2249              ; 8X   0  1 2 3 4 5 6 7
03239  2249  00          .BYTE  0,22,0,0,6,6,6,0
03239  224A  16 
03239  224B  00 
03239  224C  00 
03239  224D  06 
03239  224E  06 
03239  224F  06 
03239  2250  00 






DISASSEMBLER64......PAGE 0070

LINE# LOC   CODE        LINE


03240  2251              ;      8  9 A B C D E F
03241  2251  12          .BYTE  18,0,18,0,12,12,12,0
03241  2252  00 
03241  2253  12 
03241  2254  00 
03241  2255  0C 
03241  2256  0C 
03241  2257  0C 
03241  2258  00 
03242  2259              ; 9X   0  1 2 3 4 5 6 7
03243  2259  14          .BYTE  20,24,0,0,8,8,10,0
03243  225A  18 
03243  225B  00 
03243  225C  00 
03243  225D  08 
03243  225E  08 
03243  225F  0A 
03243  2260  00 
03244  2261              ;      8  9 A B C D E F
03245  2261  12          .BYTE  18,16,18,0,0,14,0,0
03245  2262  10 
03245  2263  12 
03245  2264  00 
03245  2265  00 
03245  2266  0E 
03245  2267  00 
03245  2268  00 
03246  2269              ; AX   0  1 2 3 4 5 6 7
03247  2269  04          .BYTE  4,22,4,0,6,6,6,0
03247  226A  16 
03247  226B  04 
03247  226C  00 
03247  226D  06 
03247  226E  06 
03247  226F  06 
03247  2270  00 
03248  2271              ;      8  9 A B C D E F
03249  2271  12          .BYTE  18,4,18,0,12,12,12,0
03249  2272  04 
03249  2273  12 
03249  2274  00 
03249  2275  0C 
03249  2276  0C 
03249  2277  0C 
03249  2278  00 
03250  2279              ; BX   0  1 2 3 4 5 6 7
03251  2279  14          .BYTE  20,24,0,0,8,8,10,0
03251  227A  18 
03251  227B  00 
03251  227C  00 
03251  227D  08 
03251  227E  08 
03251  227F  0A 
03251  2280  00 
03252  2281              ;      8  9 A B C D E F






DISASSEMBLER64......PAGE 0071

LINE# LOC   CODE        LINE


03253  2281  12          .BYTE  18,16,18,0,14,14,16,0
03253  2282  10 
03253  2283  12 
03253  2284  00 
03253  2285  0E 
03253  2286  0E 
03253  2287  10 
03253  2288  00 
03254  2289              ; CX   0  1 2 3 4 5 6 7
03255  2289  04          .BYTE  4,22,0,0,6,6,6,0
03255  228A  16 
03255  228B  00 
03255  228C  00 
03255  228D  06 
03255  228E  06 
03255  228F  06 
03255  2290  00 
03256  2291              ;      8  9 A B C D E F
03257  2291  12          .BYTE  18,4,18,0,12,12,12,0
03257  2292  04 
03257  2293  12 
03257  2294  00 
03257  2295  0C 
03257  2296  0C 
03257  2297  0C 
03257  2298  00 
03258  2299              ; DX   0  1 2 3 4 5 6 7
03259  2299  14          .BYTE  20,24,0,0,0,8,8,0
03259  229A  18 
03259  229B  00 
03259  229C  00 
03259  229D  00 
03259  229E  08 
03259  229F  08 
03259  22A0  00 
03260  22A1              ;      8  9 A B C D E F
03261  22A1  12          .BYTE  18,16,0,0,0,14,14,0
03261  22A2  10 
03261  22A3  00 
03261  22A4  00 
03261  22A5  00 
03261  22A6  0E 
03261  22A7  0E 
03261  22A8  00 
03262  22A9              ; EX   0  1 2 3 4 5 6 7
03263  22A9  04          .BYTE  4,22,0,0,6,6,6,0
03263  22AA  16 
03263  22AB  00 
03263  22AC  00 
03263  22AD  06 
03263  22AE  06 
03263  22AF  06 
03263  22B0  00 
03264  22B1              ;      8  9 A B C D E F
03265  22B1  12          .BYTE  18,4,18,0,12,12,12,0






DISASSEMBLER64......PAGE 0072

LINE# LOC   CODE        LINE


03265  22B2  04 
03265  22B3  12 
03265  22B4  00 
03265  22B5  0C 
03265  22B6  0C 
03265  22B7  0C 
03265  22B8  00 
03266  22B9              ; FX   0  1 2 3 4 5 6 7
03267  22B9  14          .BYTE  20,24,0,0,0,8,8,0
03267  22BA  18 
03267  22BB  00 
03267  22BC  00 
03267  22BD  00 
03267  22BE  08 
03267  22BF  08 
03267  22C0  00 
03268  22C1              ;      8  9 A B C D E F
03269  22C1  12          .BYTE  18,16,0,0,0,14,14,0
03269  22C2  10 
03269  22C3  00 
03269  22C4  00 
03269  22C5  00 
03269  22C6  0E 
03269  22C7  0E 
03269  22C8  00 
03270  22C9              ;*********************************
03271  22C9              ;.FIL 0:SYM.ASM
03272  22C9              ;*********************************
03273  22C9              ;.END
03274  22C9              ;*********************************
03275  22C9              ; FILE SYMBOL.ASM
03276  22C9              ;*********************************
03277  22C9              ;
03278  22C9              ;        DISASSEMBLER64
03279  22C9              ;    SYMBOLIC DISASSEMBLER
03280  22C9              ;       BY DENTON MARLOWE
03281  22C9              ;
03282  22C9              ;  (C)1986 BY DENTON MARLOWE
03283  22C9              ;
03284  22C9              ;*********************************
03285  22C9              ; SYMBOLIC ROUTINES
03286  22C9              ;*********************************
03287  22C9              ; SYMBOLIC DISASSEMBLY OPTION
03288  22C9              ;*********************************
03289  22C9  A9 36       SOP    LDA #<MSS1      ;LOW BYTE MESSAGE
03290  22CB  A0 26              LDY #>MSS1      ;HIGH BYTE MESSAGE
03291  22CD  20 C4 13           JSR STRPNT      ;OUTPUT MESSAGE
03292  22D0              ;      JSR CRNO    ;GET KEY PRESS
03293  22D0  20 8C 13           JSR CRYS
03294  22D3  90 08              BCC SOP1        ;C=0 YES
03295  22D5              ;*********************************
03296  22D5              ; ABSOLUTE DISASSEMBLY SELECTED
03297  22D5              ;*********************************
03298  22D5  A9 00              LDA #$00        ;SET SYMBLOIC FLAG
03299  22D7  8D 38 08           STA SYMBOL      ;STORE FLAG






DISASSEMBLER64......PAGE 0073

LINE# LOC   CODE        LINE


03300  22DA  4C 26 23           JMP SY          ;FOR INTERNAL
03301  22DD              ;*********************************
03302  22DD              ; SYMBOLIC DISASSEMBLY SELECTED
03303  22DD              ;*********************************
03304  22DD  A9 01       SOP1   LDA #$01        ;SET SYMBOLIC FLAG
03305  22DF  8D 38 08           STA SYMBOL      ;STORE FLAG
03306  22E2              ;*********************************
03307  22E2              ; SETUP START OF TABLE POINTER
03308  22E2              ;*********************************
03309  22E2  A9 55              LDA #<STABLE
03310  22E4  8D 3B 08           STA SYMBOS
03311  22E7  8D 39 08           STA SYMBOP
03312  22EA  A9 30              LDA #>STABLE
03313  22EC  8D 3C 08           STA SYMBOS+1
03314  22EF  8D 3A 08           STA SYMBOP+1
03315  22F2              ;*********************************
03316  22F2              ; CHECK FOR SYMBOL TABLE OPTION
03317  22F2              ;*********************************
03318  22F2  A9 5A       SYTAB  LDA #<MSS2      ;LOW BYTE MESSAGE
03319  22F4  A0 26              LDY #>MSS2      ;HIGH BYTE MESSAGE
03320  22F6  20 C4 13           JSR STRPNT      ;OUTPUT MESSAGE
03321  22F9  20 99 13           JSR CRNO        ;GET KEY PRESS
03322  22FC  B0 28              BCS SY          ;C=1 NO
03323  22FE              ;*********************************
03324  22FE              ; APPEND SYMBOL TABLE
03325  22FE              ;*********************************
03326  22FE  A9 9E              LDA #<MSS4
03327  2300  A0 26              LDY #>MSS4
03328  2302  20 C4 13           JSR STRPNT
03329  2305  20 99 13           JSR CRNO
03330  2308  B0 0A              BCS SOP4
03331  230A  A9 D8              LDA #<UTABLE
03332  230C  8D 39 08           STA SYMBOP
03333  230F  A9 31              LDA #>UTABLE
03334  2311  8D 3A 08           STA SYMBOP+1
03335  2314              ;*********************************
03336  2314              ; GO AND LOAD TABLE
03337  2314              ;*********************************
03338  2314  20 B9 24    SOP4   JSR READXX      ;READ FILE
03339  2317  B0 0D              BCS SY          ;C=1 ERROR
03340  2319              ;*********************************
03341  2319              ; SETUP END OF TABLE POINTER
03342  2319              ;*********************************
03343  2319  AD 39 08           LDA SYMBOP      ;XREF POINTER
03344  231C  8D 3D 08           STA SYMBOE
03345  231F  AD 3A 08           LDA SYMBOP+1
03346  2322  8D 3E 08           STA SYMBOE+1
03347  2325  60                 RTS
03348  2326              ;*********************************
03349  2326              ; DEFAULT SYMBOL TABLE END
03350  2326              ;*********************************
03351  2326  A9 D8       SY     LDA #<UTABLE
03352  2328  8D 3D 08           STA SYMBOE
03353  232B  A9 31              LDA #>UTABLE
03354  232D  8D 3E 08           STA SYMBOE+1






DISASSEMBLER64......PAGE 0074

LINE# LOC   CODE        LINE


03355  2330  60                 RTS
03356  2331              ;*********************************
03357  2331              ; SET OR RESET SYMBOL TABLE
03358  2331              ;*********************************
03359  2331  AD 3B 08    SSET   LDA SYMBOS
03360  2334  8D 39 08           STA SYMBOP
03361  2337  AD 3C 08           LDA SYMBOS+1
03362  233A  8D 3A 08           STA SYMBOP+1
03363  233D  60                 RTS
03364  233E              ;*********************************
03365  233E              ; EQUATE TABLE SETUP
03366  233E              ;*********************************
03367  233E  AD 32 08    EQUINT LDA TABINE
03368  2341  8D 2E 08           STA TABINP
03369  2344  8D 30 08           STA TABINS
03370  2347  AD 33 08           LDA TABINE+1
03371  234A  8D 2F 08           STA TABINP+1
03372  234D  8D 31 08           STA TABINS+1
03373  2350  60                 RTS
03374  2351              ;*********************************
03375  2351              ; ENTRY POINT FOR ADDRESS
03376  2351              ;*********************************
03377  2351  AD 38 08    SYM    LDA SYMBOL
03378  2354  F0 43              BEQ SYMEND
03379  2356  AD 22 08           LDA SELECT      ;COPY SELECT
03380  2359  8D 45 08           STA WORKED      ;ADDRESS INTO
03381  235C  AD 23 08           LDA SELECT+1    ;WORKED
03382  235F  8D 46 08           STA WORKED+1
03383  2362  4C 6A 23           JMP SYM1        ;CHECK FOR MATCH
03384  2365              ;*********************************
03385  2365              ; ENTRY POINT FOR OPCODES
03386  2365              ;*********************************
03387  2365  AD 38 08    SYMOP  LDA SYMBOL
03388  2368  F0 2F              BEQ SYMEND
03389  236A              ;*********************************
03390  236A              ; COMPARE ADDRESS TO SYMBOL TABLE
03391  236A              ;*********************************
03392  236A  20 31 23    SYM1   JSR SSET
03393  236D  20 3A 24    SYM2   JSR GETC
03394  2370  8D 48 08           STA WORKER+1
03395  2373  20 31 24           JSR INCC
03396  2376  20 3A 24           JSR GETC
03397  2379  8D 47 08           STA WORKER
03398  237C              ;*********************************
03399  237C  38                 SEC             ;SET CARRY
03400  237D  AD 47 08           LDA WORKER
03401  2380  ED 45 08           SBC WORKED      ;SUB FROM LOW
03402  2383  8D 51 08           STA TEMP        ;STORE RESULT
03403  2386  AD 48 08           LDA WORKER+1
03404  2389  ED 46 08           SBC WORKED+1    ;SUB FROM HIGH
03405  238C  0D 51 08           ORA TEMP        ;OR RESULTS
03406  238F  F0 0A              BEQ MATCH       ;CHECK FOR MATCH
03407  2391  20 0D 24           JSR NEXTC       ;IF NOT NEXT
03408  2394  B0 03              BCS SYMEND      ;END OF TABLE?
03409  2396  4C 6D 23           JMP SYM2        ;NO CHECK NEXT






DISASSEMBLER64......PAGE 0075

LINE# LOC   CODE        LINE


03410  2399  18          SYMEND CLC             ;NO MATCHES CLEAR
03411  239A  60                 RTS             ;RETURN
03412  239B              ;*********************************
03413  239B              ; FOUND MATCH
03414  239B              ;*********************************
03415  239B  AD 12 08    MATCH  LDA PASS        ;CHECK PASS
03416  239E  CD 15 08           CMP CPASS       ;IS IT LAST
03417  23A1  F0 18              BEQ MATCHS      ;IF SO PRINT
03418  23A3  CD 16 08           CMP SPASS
03419  23A6  F0 3A              BEQ MATCHT
03420  23A8  20 45 1A           JSR RANGE       ;SYMBOL IN RANGE
03421  23AB  90 3F              BCC MATEXT      ;NO INTERNAL EQ
03422  23AD  20 31 24           JSR INCC        ;INC TO SYMBOL
03423  23B0  20 3A 24           JSR GETC        ;GET FIRST CHAR
03424  23B3  C9 20              CMP #$20        ;SPACE
03425  23B5  F0 03              BEQ MATONE      ;NOT EQUATE
03426  23B7  4C BC 1A           JMP PUTI        ;PUT IN EQUATE
03427  23BA  60          MATONE RTS             ;RETURN
03428  23BB              ;*********************************
03429  23BB              ; CHECK FOR SYMBOL+1
03430  23BB              ;*********************************
03431  23BB  20 31 24    MATCHS JSR INCC        ;INC TO LABEL
03432  23BE  20 3A 24           JSR GETC        ;GET CHARARCTER
03433  23C1  C9 20              CMP #$20        ;IS IT SPACE
03434  23C3  D0 1D              BNE MATCHT      ;IF NOT GO ON
03435  23C5  38                 SEC             ;SET CARRY
03436  23C6  AD 39 08           LDA SYMBOP      ;GET LOW POINT
03437  23C9  E9 09              SBC #$09        ;LAST SYMBOL
03438  23CB  48                 PHA             ;PUSH ON STACK
03439  23CC  AD 3A 08           LDA SYMBOP+1    ;GET HIGH POINT
03440  23CF  E9 00              SBC #$00        ;LAST SYMBOL
03441  23D1  A8                 TAY             ;PUT IN Y
03442  23D2  68                 PLA             ;GET LO POINT
03443  23D3  20 ED 23           JSR STRSYM      ;PRINT SYMBOL
03444  23D6  A9 2B              LDA #'+'         ;ASCII +
03445  23D8  20 1A 14           JSR PCHAR       ;PRINT IT
03446  23DB  A9 31              LDA #'1'         ;ASCII 1
03447  23DD  20 1A 14           JSR PCHAR       ;PRINT IT
03448  23E0  38                 SEC             ;C=1 SYMBOL
03449  23E1  60                 RTS             ;RETURN
03450  23E2              ;*********************************
03451  23E2  AD 39 08    MATCHT LDA SYMBOP      ;LOW BYTE LABEL
03452  23E5  AC 3A 08           LDY SYMBOP+1    ;HIGH BYTE LABEL
03453  23E8  20 ED 23           JSR STRSYM      ;PRINT LABEL
03454  23EB              ;*********************************
03455  23EB  38                 SEC             ;MATCH SET CARRY
03456  23EC  60          MATEXT RTS             ;RETURN
03457  23ED              ;*********************************
03458  23ED              ; PRINT SYMBOL
03459  23ED              ;*********************************
03460  23ED  85 02       STRSYM STA ZEROUR
03461  23EF  84 03              STY ZEROUR+1
03462  23F1  A0 00              LDY #$00
03463  23F3  B1 02       STRSY1 LDA (ZEROUR),Y
03464  23F5  F0 0A              BEQ SYEXIT






DISASSEMBLER64......PAGE 0076

LINE# LOC   CODE        LINE


03465  23F7  C9 20              CMP #$20
03466  23F9  F0 06              BEQ SYEXIT
03467  23FB  20 1A 14           JSR PCHAR
03468  23FE  C8                 INY
03469  23FF  D0 F2              BNE STRSY1
03470  2401  60          SYEXIT RTS
03471  2402  B1 02       FIXSYM LDA (ZEROUR),Y
03472  2404  F0 FB              BEQ SYEXIT
03473  2406  20 1A 14           JSR PCHAR
03474  2409  C8                 INY
03475  240A  4C 02 24           JMP FIXSYM
03476  240D              ;*********************************
03477  240D              ; INC SYMBOL ADDRESS TABLE POINTER
03478  240D              ;*********************************
03479  240D  18          NEXTC  CLC
03480  240E  AD 39 08           LDA SYMBOP
03481  2411  69 08              ADC #$08
03482  2413  8D 39 08           STA SYMBOP
03483  2416  AD 3A 08           LDA SYMBOP+1
03484  2419  69 00              ADC #$00
03485  241B  8D 3A 08           STA SYMBOP+1
03486  241E  CD 3E 08           CMP SYMBOE+1
03487  2421  90 0A              BCC COK
03488  2423  D0 0A              BNE NCOK
03489  2425  AD 39 08           LDA SYMBOP
03490  2428  CD 3D 08           CMP SYMBOE
03491  242B  B0 02              BCS NCOK
03492  242D  18          COK    CLC
03493  242E  60                 RTS
03494  242F  38          NCOK   SEC
03495  2430  60                 RTS
03496  2431              ;*********************************
03497  2431  EE 39 08    INCC   INC SYMBOP
03498  2434  D0 03              BNE *+5
03499  2436  EE 3A 08           INC SYMBOP+1
03500  2439  60                 RTS
03501  243A              ;*********************************
03502  243A              ; GET BYTE FROM ADDRESS TABLE
03503  243A              ;*********************************
03504  243A  AD 39 08    GETC   LDA SYMBOP
03505  243D  85 02              STA ZEROUR
03506  243F  AD 3A 08           LDA SYMBOP+1
03507  2442  85 03              STA ZEROUR+1
03508  2444  A0 00              LDY #$00
03509  2446  B1 02              LDA (ZEROUR),Y
03510  2448  60                 RTS
03511  2449              ;*********************************
03512  2449              ; PRINT EQUATE TABLE
03513  2449              ;*********************************
03514  2449  38          EQUPRT SEC
03515  244A  AD 30 08           LDA TABINS
03516  244D  ED 32 08           SBC TABINE
03517  2450  8D 51 08           STA TEMP
03518  2453  AD 31 08           LDA TABINS+1
03519  2456  ED 33 08           SBC TABINE+1






DISASSEMBLER64......PAGE 0077

LINE# LOC   CODE        LINE


03520  2459  0D 51 08           ORA TEMP
03521  245C  F0 55              BEQ EQUEND
03522  245E  20 67 1B           JSR SORT
03523  2461  20 6A 18           JSR COMENT
03524  2464  20 32 1A           JSR PRTOTH
03525  2467  A9 30              LDA #<EQUATE
03526  2469  A0 27              LDY #>EQUATE
03527  246B  20 C4 13           JSR STRPNT
03528  246E  20 07 13           JSR NEWLIN
03529  2471  20 6A 18           JSR COMENT
03530  2474  20 0C 1B    EQUOP  JSR GETI
03531  2477  8D 45 08           STA WORKED
03532  247A  20 03 1B           JSR INCI
03533  247D  20 0C 1B           JSR GETI
03534  2480  8D 46 08           STA WORKED+1
03535  2483  20 32 1A           JSR PRTOTH
03536  2486  20 65 23           JSR SYMOP
03537  2489  B0 03              BCS EQUOP1
03538  248B  20 C8 18           JSR PWORK
03539  248E  A9 3D       EQUOP1 LDA #'='
03540  2490  20 1A 14           JSR PCHAR
03541  2493  A9 24              LDA #'$'
03542  2495  20 1A 14           JSR PCHAR
03543  2498  20 CB 18           JSR PWORKD
03544  249B  20 07 13           JSR NEWLIN
03545  249E              ;*********************************
03546  249E  20 03 1B           JSR INCI
03547  24A1  AD 2F 08           LDA TABINP+1
03548  24A4  CD 33 08           CMP TABINE+1
03549  24A7  90 CB              BCC EQUOP
03550  24A9  D0 08              BNE EQUEND
03551  24AB  AD 2E 08           LDA TABINP
03552  24AE  CD 32 08           CMP TABINE
03553  24B1  90 C1              BCC EQUOP
03554  24B3              ;*********************************
03555  24B3  20 6A 18    EQUEND JSR COMENT
03556  24B6  4C A3 1A           JMP RESINT
03557  24B9              ;*********************************
03558  24B9              ; READ CROSS REFERENCE SEQ FILE
03559  24B9              ;      INTO SYMBOL TABLE
03560  24B9              ;*********************************
03561  24B9              ; READ FILE NAME DEFAULT ON CR
03562  24B9              ;*********************************
03563  24B9  A9 80       READXX LDA #<MSS3
03564  24BB  A0 26              LDY #>MSS3
03565  24BD  20 C4 13           JSR STRPNT
03566  24C0  20 E4 FF    SOP2   JSR GETIN
03567  24C3  F0 FB              BEQ SOP2
03568  24C5  C9 30              CMP #'0'
03569  24C7  F0 04              BEQ SOP3
03570  24C9  C9 31              CMP #'1'
03571  24CB  D0 F3              BNE SOP2
03572  24CD  20 D2 FF    SOP3   JSR CHROUT
03573  24D0  8D E6 08           STA TEXTER
03574  24D3              ;*********************************






DISASSEMBLER64......PAGE 0078

LINE# LOC   CODE        LINE


03575  24D3  A9 C2              LDA #<LOADF
03576  24D5  A0 26              LDY #>LOADF
03577  24D7  20 C4 13           JSR STRPNT
03578  24DA              ;*********************************
03579  24DA  20 25 13           JSR INSTNG
03580  24DD  F0 20              BEQ READXF
03581  24DF  98                 TYA
03582  24E0  48                 PHA
03583  24E1  20 B4 0C           JSR INITD
03584  24E4  68                 PLA
03585  24E5  A8                 TAY
03586  24E6  A2 00              LDX #$00
03587  24E8  BD 32 26    XFILE1 LDA NAMS,X
03588  24EB  99 5C 08           STA BUF,Y
03589  24EE  C8                 INY
03590  24EF  E8                 INX
03591  24F0  E0 04              CPX #$04
03592  24F2  D0 F4              BNE XFILE1
03593  24F4  98                 TYA
03594  24F5  A0 08              LDY #>BUF
03595  24F7  A2 5C              LDX #<BUF
03596  24F9  20 BD FF           JSR SETNAM
03597  24FC  4C 08 25           JMP REOPEN
03598  24FF              ;*********************************
03599  24FF              ; DEFAULT FILENAME XRFF0000
03600  24FF              ;********************************
03601  24FF  A9 0E       READXF LDA #$0E
03602  2501  A0 26              LDY #>NAME
03603  2503  A2 28              LDX #<NAME
03604  2505  20 BD FF           JSR SETNAM
03605  2508              ;*********************************
03606  2508              ; OPEN FILE
03607  2508              ;********************************
03608  2508  A9 03       REOPEN LDA #$03
03609  250A  A2 08              LDX #$08
03610  250C  A0 03              LDY #$03
03611  250E  20 BA FF           JSR SETLFS
03612  2511  20 C0 FF           JSR OPEN
03613  2514              ;********************************
03614  2514              ; CHECK FOR DISK ERROR
03615  2514              ;*********************************
03616  2514  20 CD 12           JSR DISERR
03617  2517  B0 3F              BCS QUITXX
03618  2519              ;*********************************
03619  2519              ; OUTPUT LOADING MESSAGE
03620  2519              ;*********************************
03621  2519  A9 E0              LDA #<LOADM     ;MSG LOW
03622  251B  A0 26              LDY #>LOADM     ;MSG HIGH
03623  251D  20 C4 13           JSR STRPNT      ;OUTPUT MSG
03624  2520              ;*********************************
03625  2520  A9 00              LDA #$00        ;COL COUNTER
03626  2522  8D 51 08           STA TEMP
03627  2525              ;*********************************
03628  2525              ; INPUT AND LOAD SYMBOL TABLE
03629  2525              ;*********************************






DISASSEMBLER64......PAGE 0079

LINE# LOC   CODE        LINE


03630  2525  20 69 25    READX  JSR READS       ;INPUT SYMBOL
03631  2528  20 E7 25           JSR PUTC
03632  252B  20 0F 26           JSR LINES       ;SCREEN OUT
03633  252E  20 E1 FF           JSR STOP
03634  2531  F0 05              BEQ QUITX
03635  2533  20 B7 FF           JSR READST
03636  2536  F0 ED              BEQ READX
03637  2538              ;*********************************
03638  2538              ;    CLOSE OPEN FILE
03639  2538              ;*********************************
03640  2538  A9 03       QUITX  LDA #$03
03641  253A  20 C3 FF           JSR CLOSE
03642  253D  20 CC FF           JSR CLRCHN
03643  2540  20 FC 18           JSR CRLF
03644  2543              ;*********************************
03645  2543              ; SET END OF TABLE
03646  2543              ;*********************************
03647  2543  AD 39 08           LDA SYMBOP
03648  2546  8D 3D 08           STA SYMBOE
03649  2549  AD 3A 08           LDA SYMBOP+1
03650  254C  8D 3E 08           STA SYMBOE+1
03651  254F              ;*********************************
03652  254F              ; OUTPUT LOADED MESSAGE
03653  254F              ;*********************************
03654  254F  A9 FE              LDA #<LOADC
03655  2551  A0 26              LDY #>LOADC
03656  2553  20 C4 13           JSR STRPNT
03657  2556  18                 CLC
03658  2557  60                 RTS
03659  2558              ;*********************************
03660  2558              ; OUTPUT ERROR MESSAGE
03661  2558              ;*********************************
03662  2558  A9 03       QUITXX LDA #$03
03663  255A  20 C3 FF           JSR CLOSE
03664  255D  20 CC FF           JSR CLRCHN
03665  2560  A9 15              LDA #<LOADE
03666  2562  A0 27              LDY #>LOADE
03667  2564  20 C4 13           JSR STRPNT
03668  2567  38                 SEC
03669  2568  60                 RTS
03670  2569              ;*********************************
03671  2569              ; READ SYMBOL FROM FILE
03672  2569              ;*********************************
03673  2569  A2 03       READS  LDX #$03        ;FILE NUMBER
03674  256B  20 C6 FF           JSR CHKIN       ;FILE IS INPUT
03675  256E  A0 02              LDY #$02        ;COUNTER
03676  2570  20 CF FF           JSR CHRIN       ;INPUT CHAR
03677  2573  99 DA 08           STA SYMBUF,Y    ;1ST CHAR
03678  2576  20 D2 FF           JSR CHROUT      ;PRITN IT
03679  2579  C8                 INY             ;INC POINTER
03680  257A  20 CF FF    READY  JSR CHRIN       ;NEXT CHAR
03681  257D  99 DA 08           STA SYMBUF,Y    ;STORE
03682  2580  20 D2 FF           JSR CHROUT      ;PRINT IT
03683  2583  C8                 INY             ;INC OFFSET
03684  2584  C0 08              CPY #$08        ;8 IS FOR NULL






DISASSEMBLER64......PAGE 0080

LINE# LOC   CODE        LINE


03685  2586  D0 F2              BNE READY       ;BRANCH IF NOT
03686  2588  A9 00              LDA #$00        ;NULL MARKER
03687  258A  99 DA 08           STA SYMBUF,Y    ;STORE AT END
03688  258D              ;*********************************
03689  258D  20 0E 19           JSR SPACE       ;PRINT SPACE
03690  2590  20 D9 18           JSR DOLLAR      ;PRINT $ SIGN
03691  2593              ;*********************************
03692  2593  AD E6 08           LDA TEXTER
03693  2596  C9 30              CMP #'0'
03694  2598  F0 2F              BEQ STDREF
03695  259A              ;*********************************
03696  259A  A0 00              LDY #$00
03697  259C  20 A9 25           JSR XGET
03698  259F  C8                 INY
03699  25A0  20 A9 25           JSR XGET
03700  25A3  20 CF FF           JSR CHRIN       ;GET $0D
03701  25A6  4C CC FF           JMP CLRCHN
03702  25A9              ;*********************************
03703  25A9  20 CF FF    XGET   JSR CHRIN
03704  25AC  20 D2 FF           JSR CHROUT
03705  25AF  20 75 13           JSR BINARY
03706  25B2  0A                 ASL A
03707  25B3  0A                 ASL A
03708  25B4  0A                 ASL A
03709  25B5  0A                 ASL A
03710  25B6  99 DA 08           STA SYMBUF,Y
03711  25B9  20 CF FF           JSR CHRIN
03712  25BC  20 D2 FF           JSR CHROUT
03713  25BF  20 75 13           JSR BINARY
03714  25C2  19 DA 08           ORA SYMBUF,Y
03715  25C5  99 DA 08           STA SYMBUF,Y
03716  25C8  60                 RTS
03717  25C9              ;*********************************
03718  25C9  A0 00       STDREF LDY #$00        ;ZERO OFFSET
03719  25CB  20 CF FF           JSR CHRIN       ;HIGH BYTES
03720  25CE  99 DA 08           STA SYMBUF,Y    ;
03721  25D1  8C 54 08           STY SAVY        ;
03722  25D4  20 AE 13           JSR PRBYT       ;
03723  25D7  AC 54 08           LDY SAVY        ;
03724  25DA  C8                 INY             ;
03725  25DB  20 CF FF           JSR CHRIN       ;LOW BYTE
03726  25DE  99 DA 08           STA SYMBUF,Y    ;
03727  25E1  20 AE 13           JSR PRBYT       ;
03728  25E4  4C CC FF           JMP CLRCHN      ;KEYBOARD INPUT
03729  25E7              ;*********************************
03730  25E7              ; MOVE SYMBOL FROM BUFFER TO TABLE
03731  25E7              ;*********************************
03732  25E7  A0 00       PUTC   LDY #$00
03733  25E9  AD 39 08           LDA SYMBOP
03734  25EC  85 02              STA ZEROUR
03735  25EE  AD 3A 08           LDA SYMBOP+1
03736  25F1  85 03              STA ZEROUR+1
03737  25F3  B9 DA 08    PUT    LDA SYMBUF,Y
03738  25F6  91 02              STA (ZEROUR),Y
03739  25F8  C8                 INY






DISASSEMBLER64......PAGE 0081

LINE# LOC   CODE        LINE


03740  25F9  C0 09              CPY #$09
03741  25FB  D0 F6              BNE PUT
03742  25FD  18                 CLC
03743  25FE  AD 39 08           LDA SYMBOP
03744  2601  69 09              ADC #$09
03745  2603  8D 39 08           STA SYMBOP
03746  2606  AD 3A 08           LDA SYMBOP+1
03747  2609  69 00              ADC #$00
03748  260B  8D 3A 08           STA SYMBOP+1
03749  260E  60                 RTS
03750  260F              ;*********************************
03751  260F              ; OUTPUT SYMBOL IN 4 COLUMNS
03752  260F              ;*********************************
03753  260F  EE 51 08    LINES  INC TEMP
03754  2612  A9 03              LDA #$03
03755  2614  CD 51 08           CMP TEMP
03756  2617  F0 05              BEQ RESET
03757  2619  A9 2E              LDA #'.'
03758  261B  4C D2 FF           JMP CHROUT
03759  261E  A9 00       RESET  LDA #$00
03760  2620  8D 51 08           STA TEMP
03761  2623  A9 0D              LDA #$0D
03762  2625  4C D2 FF           JMP CHROUT
03763  2628              ;*********************************
03764  2628              ;   COMMAND MESSAGES
03765  2628              ;*********************************
03766  2628  30 3A       NAME   .BYTE '0:XRLL0000'
03767  2632  2C 53       NAMS   .BYTE ',S,R'
03768  2636              ;*********************************
03769  2636  0D          MSS1   .BYTE $0D
03770  2637              ; .BYTE 'SYMBOLIC DISASSEMBLY (Y OR N/CR)? '
03771  2637  53 59              .BYTE 'SYMBOLIC DISASSEMBLY (Y/CR OR N)? '

03772  2659  00                 .BYTE 0
03773  265A  0D          MSS2   .BYTE $0D
03774  265B  4C 4F              .BYTE 'LOAD USER SYMBOL TABLE (Y OR N/CR)?
 '
03775  267F  00                 .BYTE 0
03776  2680  0D          MSS3   .BYTE $0D
03777  2681  46 4F              .BYTE 'FORMAT 0=STANDARD 1=ASCII : '
03778  269D  00                 .BYTE 0
03779  269E  0D          MSS4   .BYTE $0D
03780  269F  41 50              .BYTE 'APPEND DEFAULT TABLE (Y OR N/CR)? '

03781  26C1  00                 .BYTE 0
03782  26C2  0D          LOADF  .BYTE $0D
03783  26C3  53 59       .BYTE  'SYMBOL TABLE(CR OR D:NAME): '
03784  26DF  00          .BYTE  0
03785  26E0  0D          LOADM  .BYTE $0D,$0D
03785  26E1  0D 
03786  26E2  52 45       .BYTE  'READING SYMBOL TABLE FILE'
03787  26FB  0D          .BYTE  $0D,$0D
03787  26FC  0D 
03788  26FD  00          .BYTE  0
03789  26FE  0D          LOADC  .BYTE $0D
03790  26FF  53 59       .BYTE  'SYMBOL TABLE LOADED'
03791  2712  0D          .BYTE  $0D,$0D
03791  2713  0D 






DISASSEMBLER64......PAGE 0082

LINE# LOC   CODE        LINE


03792  2714  00          .BYTE  0
03793  2715  0D          LOADE  .BYTE $0D
03794  2716  53 59       .BYTE  'SYMBOL TABLE NOT LOADED'
03795  272D  0D          .BYTE  $0D,$0D
03795  272E  0D 
03796  272F  00          .BYTE  0
03797  2730              ;*********************************
03798  2730  3B 20       EQUATE .BYTE '; EXTERNAL ADDRESS EQUATES'
03799  274A  00                 .BYTE 0
03800  274B              ;*********************************
03801  274B              ; PATCH CODE AREA
03802  274B              ;*********************************
03803  274B              *=*+$0800
03804  2F4B              ;*********************************
03805  2F4B              ; BIT INSTRUCTION CODING
03806  2F4B              ;*********************************
03807  2F4B              BITOPT = *
03808  2F4B  A9 0D              LDA #<MSB1      ;TABLE TYPE
03809  2F4D  A0 11              LDY #>MSB1
03810  2F4F  20 C4 13           JSR STRPNT
03811  2F52  20 E4 FF    BOP0   JSR GETIN
03812  2F55  F0 FB              BEQ BOP0
03813  2F57  C9 30              CMP #'0'        ;STANDARD
03814  2F59  F0 12              BEQ BSC
03815  2F5B  C9 31              CMP #'1'        ;$2C ABS
03816  2F5D  F0 0E              BEQ BSC 
03817  2F5F  C9 32              CMP #'2'        ;$24 ZP
03818  2F61  F0 0A              BEQ BSC
03819  2F63  C9 33              CMP #'3'        ;$2C AND $24
03820  2F65  F0 06              BEQ BSC
03821  2F67  C9 0D              CMP #$0D        ;STANDARD
03822  2F69  D0 E7              BNE BOP0
03823  2F6B  A9 30              LDA #'0'
03824  2F6D              BSC    = *
03825  2F6D  48                 PHA             ;STASH INPUT
03826  2F6E  20 D2 FF           JSR CHROUT      ;OUTPUT FEEDBACK
03827  2F71  68                 PLA             ;POP INPUT
03828  2F72  49 30              EOR #$30        ;MAKE A NUMBER
03829  2F74  8D 78 2F           STA BITFLG      ;SET FLAG
03830  2F77  60                 RTS
03831  2F78              ;*********************************
03832  2F78              ; BIT INSTRUCTION CODING FLAG
03833  2F78              ;*********************************
03834  2F78              BITFLG = *
03835  2F78  AA                 .BYTE $AA
03836  2F79              ;*********************************
03837  2F79              
03838  2F79              ;*********************************
03839  2F79              ; .FIL DIRECTIVE FILE NAME BUFFER
03840  2F79              ;*********************************
03841  2F79  AA          FVERON .BYTE $AA
03842  2F7A  AA          FCHARS .BYTE $AA
03843  2F7B              FILBUF = *
03844  2F7B  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
03844  2F7C  AA 






DISASSEMBLER64......PAGE 0083

LINE# LOC   CODE        LINE


03844  2F7D  AA 
03844  2F7E  AA 
03844  2F7F  AA 
03844  2F80  AA 
03844  2F81  AA 
03844  2F82  AA 
03845  2F83  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
03845  2F84  AA 
03845  2F85  AA 
03845  2F86  AA 
03845  2F87  AA 
03845  2F88  AA 
03845  2F89  AA 
03845  2F8A  AA 
03846  2F8B  AA                 .BYTE $AA,$AA,$AA,$AA
03846  2F8C  AA 
03846  2F8D  AA 
03846  2F8E  AA 
03847  2F8F              ;
03848  2F8F  2E 46       FILDIR .BYTE '.FIL ',$00
03848  2F94  00 
03849  2F95              ;*********************************
03850  2F95              ; OUTPUT:
03851  2F95              ;
03852  2F95              ; COMMENT LINE
03853  2F95              ; .FIL FILENAME OF NEXT VERSION
03854  2F95              ; COMMENT LINE
03855  2F95              ;
03856  2F95              ;*********************************
03857  2F95              OUTFIL = *
03858  2F95              ;*********************************
03859  2F95              ; INCREMENET FILE VERSON PETASCII
03860  2F95              ; $30,$31,$32 ETC
03861  2F95              ;*********************************
03862  2F95  AD C2 08           LDA VERSON
03863  2F98  8D 79 2F           STA FVERON
03864  2F9B              ;*********************************
03865  2F9B              ; COPY NUMBER CHARACTERS IN FILENAME
03866  2F9B              ;*********************************
03867  2F9B  AD C3 08           LDA NCHARS
03868  2F9E  8D 7A 2F           STA FCHARS
03869  2FA1              ;*********************************
03870  2FA1              ; COPY FILE NAME TO FILBUF
03871  2FA1              ;*********************************
03872  2FA1  A2 00              LDX #$00
03873  2FA3              FLOOP  = *
03874  2FA3  BD C4 08           LDA NBUF,X
03875  2FA6  C9 2C              CMP #','
03876  2FA8  F0 06              BEQ FLOOQ
03877  2FAA  9D 7B 2F           STA FILBUF,X
03878  2FAD  E8                 INX
03879  2FAE  D0 F3              BNE FLOOP
03880  2FB0              ;
03881  2FB0              FLOOQ  = *
03882  2FB0  AD 79 2F           LDA FVERON






DISASSEMBLER64......PAGE 0084

LINE# LOC   CODE        LINE


03883  2FB3  C9 31              CMP #'1'
03884  2FB5  F0 01              BEQ FLOOW
03885  2FB7  CA                 DEX
03886  2FB8              ;
03887  2FB8              FLOOW  = *
03888  2FB8  AD 79 2F           LDA FVERON
03889  2FBB  9D 7B 2F           STA FILBUF,X
03890  2FBE  E8                 INX
03891  2FBF  A9 00              LDA #$00
03892  2FC1  9D 7B 2F           STA FILBUF,X
03893  2FC4              ;*********************************
03894  2FC4              ; OUTPUT COMMENT LINE
03895  2FC4              ;*********************************
03896  2FC4              ; JSR NEWLIN   ;PRINT BYTE
03897  2FC4  20 70 18           JSR COMET       ;COMENT LINE
03898  2FC7  20 07 13           JSR NEWLIN      ;PRINT BYTE
03899  2FCA              ;*********************************
03900  2FCA              ; OUTPUT .FIL DIRECTIVE
03901  2FCA              ;*********************************
03902  2FCA  20 32 1A           JSR PRTOTH      ;PRINT LINE DATA
03903  2FCD  A9 8F              LDA #<FILDIR    ;.FIL
03904  2FCF  A0 2F              LDY #>FILDIR    ;
03905  2FD1  20 C4 13           JSR STRPNT
03906  2FD4  A9 7B              LDA #<FILBUF
03907  2FD6  A0 2F              LDY #>FILBUF
03908  2FD8  20 C4 13           JSR STRPNT
03909  2FDB              ;*********************************
03910  2FDB              ; FINAL NEWLINE
03911  2FDB              ;*********************************
03912  2FDB  20 07 13           JSR NEWLIN
03913  2FDE  60                 RTS
03914  2FDF              ;*********************************
03915  2FDF              ; SAVE A COPY OF PROGRAM FILE NAME
03916  2FDF              ;*********************************
03917  2FDF              NUMPFL = $AA
03918  2FDF              BUFPFL = *
03919  2FDF  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
03919  2FE0  AA 
03919  2FE1  AA 
03919  2FE2  AA 
03919  2FE3  AA 
03919  2FE4  AA 
03919  2FE5  AA 
03919  2FE6  AA 
03920  2FE7  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
03920  2FE8  AA 
03920  2FE9  AA 
03920  2FEA  AA 
03920  2FEB  AA 
03920  2FEC  AA 
03920  2FED  AA 
03920  2FEE  AA 
03921  2FEF  AA                 .BYTE $AA,$AA,$AA,$AA
03921  2FF0  AA 
03921  2FF1  AA 






DISASSEMBLER64......PAGE 0085

LINE# LOC   CODE        LINE


03921  2FF2  AA 
03922  2FF3              ;*********************************
03923  2FF3              ;SAVE A COPY OF PROGRAM FILE NAME
03924  2FF3              ;*********************************
03925  2FF3              PFILEH = *
03926  2FF3  84 AA              STY NUMPFL
03927  2FF5  A2 00              LDX #$00
03928  2FF7              PFILEI = *
03929  2FF7  BD 5C 08           LDA BUF,X
03930  2FFA  9D DF 2F           STA BUFPFL,X
03931  2FFD  E8                 INX
03932  2FFE  E4 AA              CPX NUMPFL
03933  3000  D0 F5              BNE PFILEI
03934  3002  A9 00              LDA #$00
03935  3004  9D DF 2F           STA BUFPFL,X
03936  3007  60                 RTS
03937  3008              ;*********************************
03938  3008              ; OUTPUT .OPT LIST DIRECTIVE
03939  3008              ;*********************************
03940  3008  2E 50       MSGPGE .BYTE '.PAGE ',$00
03940  300E  00 
03941  300F              ;*********************************
03942  300F              ; OUTPUT .OPT LIST DIRECTIVE
03943  300F              ;*********************************
03944  300F              OPTPAG = *
03945  300F              ;*********************************
03946  300F              ; OUTPUT COMMENT LINE
03947  300F              ;*********************************
03948  300F  20 07 13           JSR NEWLIN      ;PRINT BYTE
03949  3012  20 70 18           JSR COMET       ;COMENT LINE
03950  3015  20 07 13           JSR NEWLIN      ;PRINT BYTE
03951  3018              ;*********************************
03952  3018              ; OUTPUT .PAGE DIRECTIVE
03953  3018              ;*********************************
03954  3018  20 32 1A           JSR PRTOTH      ;PRINT LINE DATA
03955  301B  A9 08              LDA #<MSGPGE    ;.PAGE
03956  301D  A0 30              LDY #>MSGPGE    ;
03957  301F  20 C4 13           JSR STRPNT
03958  3022  A9 27              LDA #'''
03959  3024  20 1A 14           JSR PCHAR
03960  3027              ;
03961  3027  A9 DF              LDA #<BUFPFL    ;FILE NAME
03962  3029  A0 2F              LDY #>BUFPFL    ;
03963  302B  20 C4 13           JSR STRPNT
03964  302E              ;
03965  302E  A9 27              LDA #'''
03966  3030  20 1A 14           JSR PCHAR
03967  3033              ;*********************************
03968  3033              ; FINAL NEWLINE
03969  3033              ;*********************************
03970  3033  20 07 13           JSR NEWLIN
03971  3036  60                 RTS
03972  3037              ;*********************************
03973  3037              ; OUTPUT .OPT LIST DIRECTIVE
03974  3037              ;*********************************






DISASSEMBLER64......PAGE 0086

LINE# LOC   CODE        LINE


03975  3037  2E 4F       MSGOPT .BYTE '.OPT LIST',$00
03975  3040  00 
03976  3041              ;*********************************
03977  3041              ; OUTPUT .OPT LIST DIRECTIVE
03978  3041              ;*********************************
03979  3041              OPTDIR = *
03980  3041              ;*********************************
03981  3041              ; OUTPUT .FIL DIRECTIVE
03982  3041              ;*********************************
03983  3041  20 32 1A           JSR PRTOTH      ;PRINT LINE DATA
03984  3044  A9 37              LDA #<MSGOPT    ;.FIL
03985  3046  A0 30              LDY #>MSGOPT    ;
03986  3048  20 C4 13           JSR STRPNT
03987  304B              ;*********************************
03988  304B              ; OUTPUT COMMENT LINE
03989  304B              ;*********************************
03990  304B  20 07 13           JSR NEWLIN      ;PRINT BYTE
03991  304E  20 70 18           JSR COMET       ;COMENT LINE
03992  3051              ;*********************************
03993  3051              ; FINAL NEWLINE
03994  3051              ;*********************************
03995  3051  20 07 13           JSR NEWLIN
03996  3054  60                 RTS
03997  3055              ;*********************************
03998  3055              ; SYMBOL TABLE
03999  3055              ;*********************************
04000  3055              ;  KERNAL JUMP TABLE
04001  3055              ;*********************************
04002  3055              STABLE = *
04003  3055  FF                 .BYTE $FF,$80,'IDBYTE',0
04003  3056  80 
04003  3057  49 44 
04003  305D  00 
04004  305E  FF                 .BYTE $FF,$81,'CINT  ',0
04004  305F  81 
04004  3060  43 49 
04004  3066  00 
04005  3067  FF                 .BYTE $FF,$84,'IOINIT',0
04005  3068  84 
04005  3069  49 4F 
04005  306F  00 
04006  3070  FF                 .BYTE $FF,$87,'RAMTAS',0
04006  3071  87 
04006  3072  52 41 
04006  3078  00 
04007  3079  FF                 .BYTE $FF,$8A,'RESTOR',0
04007  307A  8A 
04007  307B  52 45 
04007  3081  00 
04008  3082  FF                 .BYTE $FF,$8D,'VECTOR',0
04008  3083  8D 
04008  3084  56 45 
04008  308A  00 
04009  308B  FF                 .BYTE $FF,$90,'SETMSG',0
04009  308C  90 






DISASSEMBLER64......PAGE 0087

LINE# LOC   CODE        LINE


04009  308D  53 45 
04009  3093  00 
04010  3094  FF                 .BYTE $FF,$93,'SECOND',0
04010  3095  93 
04010  3096  53 45 
04010  309C  00 
04011  309D  FF                 .BYTE $FF,$96,'TKSA  ',0
04011  309E  96 
04011  309F  54 4B 
04011  30A5  00 
04012  30A6  FF                 .BYTE $FF,$99,'MEMTOP',0
04012  30A7  99 
04012  30A8  4D 45 
04012  30AE  00 
04013  30AF  FF                 .BYTE $FF,$9C,'MEMBOT',0
04013  30B0  9C 
04013  30B1  4D 45 
04013  30B7  00 
04014  30B8  FF                 .BYTE $FF,$9F,'SCNKEY',0
04014  30B9  9F 
04014  30BA  53 43 
04014  30C0  00 
04015  30C1  FF                 .BYTE $FF,$A2,'SETTMO',0
04015  30C2  A2 
04015  30C3  53 45 
04015  30C9  00 
04016  30CA  FF                 .BYTE $FF,$A5,'ACPTR ',0
04016  30CB  A5 
04016  30CC  41 43 
04016  30D2  00 
04017  30D3  FF                 .BYTE $FF,$A8,'CIOUT ',0
04017  30D4  A8 
04017  30D5  43 49 
04017  30DB  00 
04018  30DC  FF                 .BYTE $FF,$AB,'UNTLK ',0
04018  30DD  AB 
04018  30DE  55 4E 
04018  30E4  00 
04019  30E5  FF                 .BYTE $FF,$AE,'UNLSN ',0
04019  30E6  AE 
04019  30E7  55 4E 
04019  30ED  00 
04020  30EE  FF                 .BYTE $FF,$B1,'LISTEN',0
04020  30EF  B1 
04020  30F0  4C 49 
04020  30F6  00 
04021  30F7  FF                 .BYTE $FF,$B4,'TALK  ',0
04021  30F8  B4 
04021  30F9  54 41 
04021  30FF  00 
04022  3100  FF                 .BYTE $FF,$B7,'READST',0
04022  3101  B7 
04022  3102  52 45 
04022  3108  00 
04023  3109  FF                 .BYTE $FF,$BA,'SETLFS',0






DISASSEMBLER64......PAGE 0088

LINE# LOC   CODE        LINE


04023  310A  BA 
04023  310B  53 45 
04023  3111  00 
04024  3112  FF                 .BYTE $FF,$BD,'SETNAM',0
04024  3113  BD 
04024  3114  53 45 
04024  311A  00 
04025  311B  FF                 .BYTE $FF,$C0,'OPEN  ',0
04025  311C  C0 
04025  311D  4F 50 
04025  3123  00 
04026  3124  FF                 .BYTE $FF,$C3,'CLOSE ',0
04026  3125  C3 
04026  3126  43 4C 
04026  312C  00 
04027  312D  FF                 .BYTE $FF,$C6,'CHKIN ',0
04027  312E  C6 
04027  312F  43 48 
04027  3135  00 
04028  3136  FF                 .BYTE $FF,$C9,'CHKOUT',0
04028  3137  C9 
04028  3138  43 48 
04028  313E  00 
04029  313F  FF                 .BYTE $FF,$CC,'CLRCHN',0
04029  3140  CC 
04029  3141  43 4C 
04029  3147  00 
04030  3148  FF                 .BYTE $FF,$CF,'CHRIN ',0
04030  3149  CF 
04030  314A  43 48 
04030  3150  00 
04031  3151  FF                 .BYTE $FF,$D2,'CHROUT',0
04031  3152  D2 
04031  3153  43 48 
04031  3159  00 
04032  315A  FF                 .BYTE $FF,$D5,'LOAD  ',0
04032  315B  D5 
04032  315C  4C 4F 
04032  3162  00 
04033  3163  FF                 .BYTE $FF,$D8,'SAVE  ',0
04033  3164  D8 
04033  3165  53 41 
04033  316B  00 
04034  316C  FF                 .BYTE $FF,$DB,'SETTIM',0
04034  316D  DB 
04034  316E  53 45 
04034  3174  00 
04035  3175  FF                 .BYTE $FF,$DE,'RDTIM ',0
04035  3176  DE 
04035  3177  52 44 
04035  317D  00 
04036  317E  FF                 .BYTE $FF,$E1,'STOP  ',0
04036  317F  E1 
04036  3180  53 54 
04036  3186  00 






DISASSEMBLER64......PAGE 0089

LINE# LOC   CODE        LINE


04037  3187  FF                 .BYTE $FF,$E4,'GETIN ',0
04037  3188  E4 
04037  3189  47 45 
04037  318F  00 
04038  3190  FF                 .BYTE $FF,$E7,'CLALL ',0
04038  3191  E7 
04038  3192  43 4C 
04038  3198  00 
04039  3199  FF                 .BYTE $FF,$EA,'UDTIM ',0
04039  319A  EA 
04039  319B  55 44 
04039  31A1  00 
04040  31A2  FF                 .BYTE $FF,$ED,'SCREEN',0
04040  31A3  ED 
04040  31A4  53 43 
04040  31AA  00 
04041  31AB  FF                 .BYTE $FF,$F0,'PLOT  ',0
04041  31AC  F0 
04041  31AD  50 4C 
04041  31B3  00 
04042  31B4  FF                 .BYTE $FF,$F3,'IOBASE',0
04042  31B5  F3 
04042  31B6  49 4F 
04042  31BC  00 
04043  31BD              ;*********************************
04044  31BD  FF                 .BYTE $FF,$FA,'NMIVEC',0
04044  31BE  FA 
04044  31BF  4E 4D 
04044  31C5  00 
04045  31C6  FF                 .BYTE $FF,$FC,'RESVEC',0
04045  31C7  FC 
04045  31C8  52 45 
04045  31CE  00 
04046  31CF  FF                 .BYTE $FF,$FE,'IRQVEC',0
04046  31D0  FE 
04046  31D1  49 52 
04046  31D7  00 
04047  31D8              ;*********************************
04048  31D8  00          UTABLE .BYTE 0
04049  31D9              ;*********************************
04050  31D9              .END


ERRORS = 00000


SYMBOL TABLE

SYMBOL VALUE
 ABSBIT   1753    ABSEXT   1778    ABSLUT   1754    ABSX     1779
 ABSY     177F    AC0      1DB7    AC1      1DBA    ACC      1708
 ACHECK   1DA5    ADRS     084F    AFILE    0E7E    AGET     0EB2
 AGET1    0EBE    ALINE    1DE8    ALOP     1DFA    AOP      0E4A
 AOP1     0F0F    AOP2     0F39    AOP3     0F5E    AOPX     0F0A








SYMBOL TABLE

SYMBOL VALUE
 ASC      0F7B    ASCCCC   1D33    ASCI1    1D60    ASCII    1D55
 ASCIIQ   1D8E    ASCKK    1D4A    B0000    1621    BASIC    080D
 BINARY   1375    BITFLG   2F78    BITOPT   2F4B    BOP      0E75
 BOP0     2F52    BSC      2F6D    BSTUB    0001    BUF      085C
 BUFPFL   2FDF    BYABIT   15F0    BYTES    1DBD    BYTESX   1DE5
 BYTT     15C8    BYZBIT   15CB    CASCII   1E3D    CDATA    08E7
 CHKIN    FFC6    CHKOUT   FFC9    CHRIN    FFCF    CHROUT   FFD2
 CLOSE    FFC3    CLRCHN   FFCC    COK      242D    COMENT   186A
 COMET    1870    COMOPT   081D    COMPT    1880    CONST0   152A
 CONST1   152F    CPASS    0815    CRLF     18FC    CRLFPR   1464
 CRNO     1399    CRNO1    13A6    CRYS     138C    CRYS1    13A4
 CSHORT   187E    DATABE   08EF    DATABP   08EB    DATABS   08ED
 DATAO1   1CC1    DATAO2   1CF7    DATAOP   1CB2    DATUT    1D9F
 DBYTES   1E49    DBYTEX   1E76    DECSL    194B    DEVICE   0819
 DISA     0A30    DISASS   0A21    DISB     0A5E    DISC     0AF3
 DISERR   12CD    DISFUL   0AF0    DISL     159D    DISL1    15AE
 DLOOA    12F8    DLOOC    12EE    DLOOE    12E2    DLOOP    0A95
 DOLLAR   18D9    DONE     0B6A    DONED    0B4B    DOP      0B73
 DOP2     0E42    DOP3     0E44    DSLINE   1586    EA       0820
 EAGOL    0828    EAOUT    082C    EAS      08E4    EASCI1   1E21
 EASCII   1E26    EFILE    185A    ENDAX    1CBE    ENDDAT   1DA2
 EPASS    0814    EQUATE   2730    EQUEND   24B3    EQUINT   233E
 EQUOP    2474    EQUOP1   248E    EQUPRT   2449    ERRCT    085A
 FCHARS   2F7A    FILBUF   2F7B    FILDIR   2F8F    FILE     0D96
 FILEOK   0D90    FINAL    15C5    FINISH   1451    FIXSYM   2402
 FLOOP    2FA3    FLOOQ    2FB0    FLOOW    2FB8    FOP1     0FB7
 FOP2     0FB9    FOROPT   081C    FORWRD   17F2    FVERON   2F79
 GETBYT   1358    GETC     243A    GETI     1B0C    GETIN    FFE4
 GETOPE   1F87    GETSL    1935    GETWRD   1334    GFILE0   0D84
 HEADER   1483    HEADES   14D6    HEADFX   14FE    HEADOK   14F0
 HEADSY   14F1    HEXA     151A    ILLEGL   16C7    ILLMSG   1987
 ILLOP    1F66    IMEXIT   1742    IMMEDT   170D    IMPLI1   1793
 IMPLID   1785    IMPONE   1792    INCC     2431    INCI     1B03
 INCIE    1AFB    INCSL    192C    INDRCT   179F    INDX     17B4
 INDY     17BD    INEND    1357    INENX    1374    INIT     105F
 INITD    0CB4    INITIN   1A6B    INSTN1   1327    INSTNG   1325
 INTCH    1B2A    INTCHA   1B1B    INTCHK   1B27    INTEND   1B63
 INTEXT   1AF9    INTMAT   1B65    INTOUT   1C52    INTPR    1C5D
 INTPRM   1C84    INTPRS   1C7F    INTPRT   1C3C    INTSA    1957
 INTSET   1A7D    IPASS    0813    ISKIP    1701    LARGE    1BCD
 LINECK   128E    LINECO   12CC    LINECT   0858    LINEFL   08C0
 LINEOK   14C5    LINES    260F    LISTCT   0857    LOADC    26FE
 LOADE    2715    LOADF    26C2    LOADM    26E0    LOOP1    1C58
 LOOP2    1CAC    LPAREN   18DE    LTITLE   154F    LTITLS   1579
 MATCH    239B    MATCHS   23BB    MATCHT   23E2    MATEXT   23EC
 MATONE   23BA    MBYTE    1F35    MCODES   20C9    MDBYTE   1F45
 MEMSIZ   0037    MNAMES   1FF1    MNEMON   1F4E    MNLOOP   1F58
 MODES    21C9    MPASS    09F2    MSA1     1192    MSA2     11B4
 MSA3     11CC    MSAOP    1173    MSB1     110D    MSB4     124E
 MSB5     126E    MSD1     107A    MSD2     108C    MSD4     109C
 MSD4A    10B6    MSD5     10C9    MSF1     100A    MSF2     1026
 MSG      0FBD    MSG1     103A    MSG2     1061    MSG5     11E2
 MSGBIT   1964    MSGBZP   196C    MSGDIS   0A0E    MSGEND   1982
 MSGERR   0A04    MSGOPT   3037    MSGPGE   3008    MSR1     10E5
 MSS1     2636    MSS2     265A    MSS3     2680    MSS4     269E








SYMBOL TABLE

SYMBOL VALUE
 MWORD    1F3D    NAME     2628    NAMS     2632    NASCII   1E2E
 NBUF     08C4    NCHARS   08C3    NCOK     242F    NDATA    08E9
 NEGREL   197E    NEWEXT   1324    NEWLIN   1307    NEXLIN   1476
 NEXPTR   1473    NEXPTS   14C6    NEXTBY   1F1C    NEXTC    240D
 NEXTP    0AC6    NEXTSL   1913    NOASC    1E47    NOBINC   1F33
 NOFILE   0D94    NOHEX    1388    NOID     0DA7    NOINC    192A
 NOPRT    0E27    NOTABS   0EF5    NPRAD    18B6    NPRAD1   18B7
 NUMPFL   00AA    OFFSET   0824    OFILE    0DAA    OFILE1   0DBD
 OFILE2   0DC2    OFILE3   0DE5    OFILE4   0DF4    OFILED   0D9F
 ONEBIT   1655    ONEBX    1684    ONEBY    1681    ONEBYT   1656
 OPCPUT   16C0    OPCSYM   16C3    OPEN     FFC0    OPERN1   1F7A
 OPERND   1F82    OPTDIR   3041    OPTPAG   300F    ORGIN    1844
 OUFILE   0D69    OUTFIL   2F95    OUTPUT   081A    P1       18AD
 PAGECT   0855    PAGER1   14BF    PASS     0812    PAUS1    1D87
 PAUSE    0ABF    PCHAR    141A    PEXIT    144F    PFILE0   0B93
 PFILE1   0B98    PFILEH   2FF3    PFILEI   2FF7    PMSG     09F8
 POSREL   197A    POVER    18AA    PRAD     1893    PRBYT    13AE
 PRBYTS   13A8    PREND    1CA9    PRFILE   0C8E    PRIN     142F
 PRINT    0E29    PRLA     1889    PRO2RD   0C6A    PROGED   0BDE
 PROGM    105B    PROGOK   0CB3    PROGRD   0BC9    PRTASS   1F6D
 PRTDAF   1A2A    PRTDAL   0ED9    PRTDAS   0EC6    PRTDAT   1A0E
 PRTEST   1A07    PRTGET   0DF5    PRTNEX   0ED1    PRTNU1   13E9
 PRTNU2   13F0    PRTNU3   13F1    PRTNUM   13E0    PRTOK    1C9C
 PRTON1   19A9    PRTONE   199B    PRTOT1   1A3D    PRTOTH   1A32
 PRTPAG   13D5    PRTTH1   19FC    PRTTHE   19D6    PRTTW1   19CB
 PRTTWO   19B1    PSELEC   18BF    PUIT     1AD6    PUT      25F3
 PUTC     25E7    PUTI     1ABC    PWORK    18C8    PWORKD   18CB
 Q00000   1E0F    QUITS    0AF9    QUITX    2538    QUITXX   2558
 QUTERR   0B10    RANG     1A57    RANGE    1A45    READS    2569
 READST   FFB7    READX    2525    READXF   24FF    READXX   24B9
 READY    257A    RELATV   17C9    RELND    17FB    RELNEG   1826
 RELP     1838    RELPC    1819    RELPM    182A    RELPUT   1815
 RELSYM   1818    REOPEN   2508    RESET    261E    RESINT   1AA3
 ROPT     0818    ROUT     1A69    RPAREN   18E3    S3       1BB5
 SA       081E    SAGOL    0826    SAOUT    082A    SAVA     0852
 SAVEE    084D    SAVEP    0849    SAVES    084B    SAVINT   1A8A
 SAVX     0853    SAVY     0854    SBLOK    1F2E    SCREN    1443
 SCRNO1   1510    SCROFF   1501    SCRON    1511    SELECT   0822
 SEMIC    18D4    SETLFS   FFBA    SETNAM   FFBD    SEXIT    13D4
 SKIPER   1D3B    SLOK     1925    SMALL    1BD0    SMALLP   0836
 SMALLS   0834    SOP      22C9    SOP1     22DD    SOP2     24C0
 SOP3     24CD    SOP4     2314    SORT     1B67    SORT1    1B7C
 SORT2    1B8B    SORT3    1C0D    SORT4    1C39    SORTOK   1C36
 SOUT     13CA    SPAC     1906    SPAC6    1901    SPACE    190E
 SPACM    1903    SPASS    0816    SSET     2331    STABLE   3055
 STARTD   080F    STARTS   0CCE    STDREF   25C9    STOP     FFE1
 STRPNT   13C4    STRSY1   23F3    STRSYM   23ED    SUBP     1F9D
 SUBS     1FD5    SUBS1    1FB9    SY       2326    SYEXIT   2401
 SYM      2351    SYM1     236A    SYM2     236D    SYMBOE   083D
 SYMBOL   0838    SYMBOP   0839    SYMBOS   083B    SYMBUF   08DA
 SYMEND   2399    SYMOP    2365    SYTAB    22F2    T2       1BB8
 TABINE   0832    TABINP   082E    TABINS   0830    TDATA    08F1
 TEMP     0851    TEXTER   08E6    TWOB     16C6    TWOBIT   168A
 TWOBX    16BD    TWOBY    16BA    TWOBYT   168B    UTABLE   31D8
 UYMBOE   0843    UYMBOP   083F    UYMBOS   0841    VERSON   08C2








SYMBOL TABLE

SYMBOL VALUE
 VICREG   D011    WIND1    0D4C    WIND2    0D4E    WINDOP   0D10
 WINDOW   081B    WORD1    1E8E    WORDM    1ED4    WORDPT   1EC8
 WORDS    1E79    WORDS2   1F04    WORDS3   1F16    WORDSX   1EC5
 WORDSY   1ECE    WORDXX   1F19    WORKED   0845    WORKER   0847
 WREADY   E391    WRITE    1057    XFILE1   24E8    XGET     25A9
 XINDEX   18E8    XOP0     0F92    XOP1     0FA2    XOP2     0FA4
 XOPT     0817    XTITLE   1534    XTITLS   156C    YINDEX   18F2
 YSHEX    138A    ZERBIT   1743    ZEROPG   1744    ZEROUR   0002
 ZEROX    1747    ZEROY    174D   

END OF ASSEMBLY
DISASS64NL.ASM......PAGE 0001

LINE# LOC   CODE        LINE































































DISASSEMBLER64......PAGE 0002

LINE# LOC   CODE        LINE


00003  0000              ;*********************************
00004  0000              *=$0801                ;START OF BASIC
00005  0801              ;*********************************
00006  0801              ; SET BSTUB TO ONE TO ALLOW FOR
00007  0801              ; INSERTION OF BASIC STUB CODE
00008  0801              ;*********************************
00009  0801              BSTUB  = 1
00010  0801              ;*********************************
00011  0801              ;
00012  0801              ;        DISASSEMBLER64
00013  0801              ;    DISASSEMBLER.C64 V080282
00014  0801              ;    SYMBOLIC DISASSEMBLER
00015  0801              ;       BY DENTON MARLOWE
00016  0801              ;
00017  0801              ;  (C)1986 BY DENTON MARLOWE
00018  0801              ;
00019  0801              ; MACRO ASSEMBLER DEVELOPMENT SYSTEM
00020  0801              ;  (C) 1982 BY COMMODORE MACHINES
00021  0801              ;
00022  0801              ;*********************************
00023  0801              ;
00024  0801              ; BASIC FORMAT PROGRAM
00025  0801              ;
00026  0801              ; 10 SYS(2063)
00027  0801              ;
00028  0801              ;*********************************
00030  0801              ;.IF  BSTUB == 1
00031  0801  0D 08              .WORD BASIC     ;NEXT LINE POINTER
00032  0803  0A                 .BYTE $0A,$00   ;LINE NUMBER
00032  0804  00 
00033  0805  9E                 .BYTE $9E       ;SYS COMMAND
00034  0806  28 32              .BYTE '(2063)'  ;ASCII (2063)
00035  080C  00                 .BYTE 0         ;END OF LINE
00036  080D  00          BASIC  .BYTE 0,0       ;END OF BASIC
00036  080E  00 
00038  080F              ;.FI
00039  080F              ;*********************************
00040  080F              ;.LIB DIS.ASM
00041  080F              ;*********************************
00042  080F              ;.LIB OPTION.ASM
00043  080F              ;*********************************
00044  080F              ;.LIB UTIL.ASM
00045  080F              ;*********************************
00046  080F              ;.LIB MODE.ASM
00047  080F              ;*********************************
00048  080F              ;.LIB INTERNAL.ASM
00049  080F              ;*********************************
00050  080F              ;.LIB ASC.ASM
00051  080F              ;*********************************
00052  080F              ;.LIB TABLE.ASM
00053  080F              ;*********************************
00054  080F              ;.LIB SYM.ASM
00055  080F              ;*********************************
00056  080F              ;.END
00057  080F              ;*********************************






DISASSEMBLER64......PAGE 0003

LINE# LOC   CODE        LINE


00058  080F              ; FILE DIS.ASM
00059  080F              ;*********************************
00060  080F              ;
00061  080F              ;        DISASSEMBLER64
00062  080F              ;    SYMBOLIC DISASSEMBLER
00063  080F              ;       BY DENTON MARLOWE
00064  080F              ;
00065  080F              ;  (C)1986 BY DENTON MARLOWE
00066  080F              ;
00067  080F              ;*********************************
00068  080F              ; KERNAL ADDRESS
00069  080F              ;*********************************
00070  080F              VICREG=$D011           ;SCREEN REGISTER
00071  080F              CHROUT=$FFD2           ;OUTPUT CHARACTER
00072  080F              CHKIN  =$FFC6          ;OPEN INPUT FILE
00073  080F              CHRIN  =$FFCF          ;GET KEYBOARD INPUT
00074  080F              GETIN  =$FFE4          ;GET KEYBOARD CHAR
00075  080F              CLRCHN=$FFCC           ;RESET I/O CHANNELS
00076  080F              STOP   =$FFE1          ;CHECK FOR STOP
00077  080F              READST=$FFB7           ;READ ST
00078  080F              SETNAM=$FFBD           ;SET FILENAME
00079  080F              SETLFS=$FFBA           ;SET LOGICAL FILE
00080  080F              OPEN   =$FFC0          ;OPEN FILE
00081  080F              CHKOUT=$FFC9           ;OPEN OUTPUT CHANNEL
00082  080F              CLOSE  =$FFC3          ;CLOSE LOGICAL FILE
00083  080F              WREADY=$E391           ;BASIC RETURN
00084  080F              ZEROUR=$02             ;ZEROPAGE POINTER
00085  080F              MEMSIZ=$37             ;TOP OF FREE RAM+1
00086  080F              ;*********************************
00087  080F              ;        ENTRY POINT
00088  080F              ;*********************************
00089  080F  4C 21 0A    STARTD JMP DISASS
00090  0812              ;*********************************
00091  0812              ;       VARIABLES
00092  0812              ;*********************************
00093  0812  31          PASS   .BYTE '1'       ;PASS INDICATOR
00094  0813  31          IPASS  .BYTE '1'       ;INTERNAL PASS
00095  0814  32          EPASS  .BYTE '2'       ;EXTERNAL PASS
00096  0815  33          CPASS  .BYTE '3'       ;PRINTING PASS
00097  0816  34          SPASS  .BYTE '4'       ;SYMBOL PASS
00098  0817              ;*********************************
00099  0817  AA          XOPT   .BYTE $AA       ;LABEL GENERATION
00100  0818  AA          ROPT   .BYTE $AA       ;REL ADDRESS OPT
00101  0819  AA          DEVICE .BYTE $AA       ;OUTPUT DEVICE
00102  081A  AA          OUTPUT .BYTE $AA       ;OUTPUT FLAG
00103  081B  AA          WINDOW .BYTE $AA       ;WINDOW FLAG
00104  081C  AA          FOROPT .BYTE $AA       ;FORMAT FLAG
00105  081D  AA          COMOPT .BYTE $AA       ;COMMENT FLAG
00106  081E              ;*********************************
00107  081E              ; DISASSEMBLY ADDRESS POINTERS
00108  081E              ;*********************************
00109  081E  AA AA       SA     .WORD $AAAA     ;START ADDRESS
00110  0820  AA AA       EA     .WORD $AAAA     ;END ADDRESS
00111  0822  AA AA       SELECT .WORD $AAAA     ;BYTE POINTER
00112  0824  AA AA       OFFSET .WORD $AAAA     ;ADDRESS OFFSET






DISASSEMBLER64......PAGE 0004

LINE# LOC   CODE        LINE


00113  0826  AA AA       SAGOL  .WORD $AAAA     ;GOLBAL START
00114  0828  AA AA       EAGOL  .WORD $AAAA     ;GOLBAL END
00115  082A  AA AA       SAOUT  .WORD $AAAA     ;START ADDRESS
00116  082C  AA AA       EAOUT  .WORD $AAAA     ;END ADDRESS
00117  082E              ;*********************************
00118  082E              ; INTERNAL ADDRESS TABLE
00119  082E              ;*********************************
00120  082E  AA AA       TABINP .WORD $AAAA     ;TABLE POINTER
00121  0830  AA AA       TABINS .WORD $AAAA     ;TABLE START
00122  0832  AA AA       TABINE .WORD $AAAA     ;TABLE END
00123  0834              ;*********************************
00124  0834              ; SORT TABLE POINTERS
00125  0834              ;*********************************
00126  0834  AA AA       SMALLS .WORD $AAAA     ;TABLE START
00127  0836  AA AA       SMALLP .WORD $AAAA     ;TABLE POINTER
00128  0838              ;*********************************
00129  0838              ; SYMBOL TABLE
00130  0838              ;*********************************
00131  0838  AA          SYMBOL .BYTE $AA       ;SYMBOL OPTION
00132  0839  AA AA       SYMBOP .WORD $AAAA     ;TABLE POINTER
00133  083B  AA AA       SYMBOS .WORD $AAAA     ;TABLE START
00134  083D  AA AA       SYMBOE .WORD $AAAA     ;TABLE END
00135  083F              ;*********************************
00136  083F              ; UNDEFINED SYMBOL TABLE
00137  083F              ;*********************************
00138  083F  AA AA       UYMBOP .WORD $AAAA     ;TABLE POINTER
00139  0841  AA AA       UYMBOS .WORD $AAAA     ;TABLE START
00140  0843  AA AA       UYMBOE .WORD $AAAA     ;TABLE END
00141  0845              ;*********************************
00142  0845              ; TEMP WORKING STORAGE
00143  0845              ;*********************************
00144  0845  AA AA       WORKED .WORD $AAAA     ;TWO BYTE OP
00145  0847  AA AA       WORKER .WORD $AAAA     ;TWO BYTE OP
00146  0849  AA AA       SAVEP  .WORD $AAAA     ;TWO BYTE OP
00147  084B  AA AA       SAVES  .WORD $AAAA     ;TWO BYTE OP
00148  084D  AA AA       SAVEE  .WORD $AAAA     ;TWO BYTE OP
00149  084F              ;*********************************
00150  084F              ; OTHER VARIABLES
00151  084F              ;*********************************
00152  084F  AA AA       ADRS   .WORD $AAAA
00153  0851  AA          TEMP   .BYTE $AA
00154  0852  AA          SAVA   .BYTE $AA
00155  0853  AA          SAVX   .BYTE $AA
00156  0854  AA          SAVY   .BYTE $AA
00157  0855              ;*********************************
00158  0855              ; PRINTER OUTPUT STORAGE
00159  0855              ;*********************************
00160  0855  AA AA       PAGECT .WORD $AAAA     ;PAGE COUNT
00161  0857  AA          LISTCT .BYTE $AA       ;LINE COUNT
00162  0858  AA AA       LINECT .WORD $AAAA     ;LINE COUNT
00163  085A  AA AA       ERRCT  .WORD $AAAA     ;ERROR COUNT
00164  085C              ;*********************************
00165  085C              ; INPUT BUFFER
00166  085C              ;*********************************
00167  085C              BUF    = *






DISASSEMBLER64......PAGE 0005

LINE# LOC   CODE        LINE


00168  085C  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00168  085D  00 
00168  085E  00 
00168  085F  00 
00168  0860  00 
00168  0861  00 
00168  0862  00 
00168  0863  00 
00168  0864  00 
00168  0865  00 
00169  0866  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00169  0867  00 
00169  0868  00 
00169  0869  00 
00169  086A  00 
00169  086B  00 
00169  086C  00 
00169  086D  00 
00169  086E  00 
00169  086F  00 
00170  0870  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00170  0871  00 
00170  0872  00 
00170  0873  00 
00170  0874  00 
00170  0875  00 
00170  0876  00 
00170  0877  00 
00170  0878  00 
00170  0879  00 
00171  087A  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00171  087B  00 
00171  087C  00 
00171  087D  00 
00171  087E  00 
00171  087F  00 
00171  0880  00 
00171  0881  00 
00171  0882  00 
00171  0883  00 
00172  0884  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00172  0885  00 
00172  0886  00 
00172  0887  00 
00172  0888  00 
00172  0889  00 
00172  088A  00 
00172  088B  00 
00172  088C  00 
00172  088D  00 
00173  088E  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00173  088F  00 
00173  0890  00 
00173  0891  00 
00173  0892  00 






DISASSEMBLER64......PAGE 0006

LINE# LOC   CODE        LINE


00173  0893  00 
00173  0894  00 
00173  0895  00 
00173  0896  00 
00173  0897  00 
00174  0898  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00174  0899  00 
00174  089A  00 
00174  089B  00 
00174  089C  00 
00174  089D  00 
00174  089E  00 
00174  089F  00 
00174  08A0  00 
00174  08A1  00 
00175  08A2  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00175  08A3  00 
00175  08A4  00 
00175  08A5  00 
00175  08A6  00 
00175  08A7  00 
00175  08A8  00 
00175  08A9  00 
00175  08AA  00 
00175  08AB  00 
00176  08AC  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00176  08AD  00 
00176  08AE  00 
00176  08AF  00 
00176  08B0  00 
00176  08B1  00 
00176  08B2  00 
00176  08B3  00 
00176  08B4  00 
00176  08B5  00 
00177  08B6  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00177  08B7  00 
00177  08B8  00 
00177  08B9  00 
00177  08BA  00 
00177  08BB  00 
00177  08BC  00 
00177  08BD  00 
00177  08BE  00 
00177  08BF  00 
00178  08C0              ;*********************************
00179  08C0              ; FILE NAME BUFFER
00180  08C0              ;*********************************
00181  08C0  AA AA       LINEFL .WORD $AAAA
00182  08C2  AA          VERSON .BYTE $AA
00183  08C3  AA          NCHARS .BYTE $AA
00184  08C4              NBUF   = *
00185  08C4  30 3A              .BYTE '0:'
00186  08C6  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
00186  08C7  AA 






DISASSEMBLER64......PAGE 0007

LINE# LOC   CODE        LINE


00186  08C8  AA 
00186  08C9  AA 
00186  08CA  AA 
00186  08CB  AA 
00186  08CC  AA 
00186  08CD  AA 
00187  08CE  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
00187  08CF  AA 
00187  08D0  AA 
00187  08D1  AA 
00187  08D2  AA 
00187  08D3  AA 
00187  08D4  AA 
00187  08D5  AA 
00188  08D6  AA                 .BYTE $AA,$AA,$AA,$AA
00188  08D7  AA 
00188  08D8  AA 
00188  08D9  AA 
00189  08DA              ;*********************************
00190  08DA              ; SYMBOL TABLE BUFFER
00191  08DA              ;*********************************
00192  08DA              SYMBUF = *
00193  08DA  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,
$AA
00193  08DB  AA 
00193  08DC  AA 
00193  08DD  AA 
00193  08DE  AA 
00193  08DF  AA 
00193  08E0  AA 
00193  08E1  AA 
00193  08E2  AA 
00193  08E3  AA 
00194  08E4              ;*********************************
00195  08E4              ; DATA TABLE
00196  08E4              ;*********************************
00197  08E4  AA AA       EAS    .WORD $AAAA
00198  08E6  AA          TEXTER .BYTE $AA
00199  08E7  AA AA       CDATA  .WORD $AAAA
00200  08E9  AA AA       NDATA  .WORD $AAAA
00201  08EB  AA AA       DATABP .WORD $AAAA     ;DATA POINT
00202  08ED  AA AA       DATABS .WORD $AAAA     ;DATA START
00203  08EF  AA AA       DATABE .WORD $AAAA     ;DATA END
00204  08F1              ;*********************************
00205  08F1              ; DATA TABLE
00206  08F1              ;*********************************
00207  08F1  AA          TDATA  .BYTE $AA
00208  08F2              ;*********************************
00209  08F2              *=*+$0100
00210  09F2              ;*********************************
00211  09F2  0D          MPASS  .BYTE $0D,'PASS',0
00211  09F3  50 41 
00211  09F7  00 
00212  09F8  0D          PMSG   .BYTE $0D,$12,' PAUSE ',$92,$0D,0
00212  09F9  12 
00212  09FA  20 50 






DISASSEMBLER64......PAGE 0008

LINE# LOC   CODE        LINE


00212  0A01  92 
00212  0A02  0D 
00212  0A03  00 
00213  0A04  45 52       MSGERR .BYTE 'ERRORS = ',0
00213  0A0D  00 
00214  0A0E  45 4E       MSGDIS .BYTE 'END OF DISASSEMBLY',0
00214  0A20  00 
00215  0A21              ;*********************************
00216  0A21              ; INITIALIZE DISASSEMBLER
00217  0A21              ;*********************************
00218  0A21  A2 FF       DISASS LDX #$FF
00219  0A23  9A                 TXS
00220  0A24  D8                 CLD
00221  0A25  20 73 0B           JSR DOP         ;GET OPTIONS
00222  0A28  20 6B 1A           JSR INITIN      ;INIT POINTERS
00223  0A2B  A9 31              LDA #'1'        ;PASS ONE
00224  0A2D  8D 12 08           STA PASS        ;SET PASS INDICATOR
00225  0A30              ;*********************************
00226  0A30              ; DISASSEMBLER LOOP
00227  0A30              ;*********************************
00228  0A30  20 57 19    DISA   JSR INTSA       ;SET SA
00229  0A33  A9 00              LDA #00         ;ZERO BYTE
00230  0A35  8D E7 08           STA CDATA       ;SET TABLE NUMBER
00231  0A38  A9 F2              LDA #<MPASS     ;PASS MSG
00232  0A3A  A0 09              LDY #>MPASS     ;
00233  0A3C  20 C4 13           JSR STRPNT      ;PRINT IT
00234  0A3F  AD 12 08           LDA PASS        ;GET PASS
00235  0A42  20 1A 14           JSR PCHAR       ;PRINT NUMBER
00236  0A45  20 FC 18           JSR CRLF        ;CR
00237  0A48              ;*********************************
00238  0A48  AD 12 08           LDA PASS        ;GET PASS
00239  0A4B  CD 15 08           CMP CPASS       ;IS IT LAST
00240  0A4E  F0 0E              BEQ DISB        ;IF SO PRINT
00241  0A50  CD 14 08           CMP EPASS       ;IS IT EXTERNAL
00242  0A53  D0 40              BNE DLOOP       ;IF NOT GO ON
00243  0A55  20 8A 1A           JSR SAVINT      ;SAVE INTERNAL
00244  0A58  20 3E 23           JSR EQUINT      ;SET EQUATES
00245  0A5B  4C 95 0A           JMP DLOOP       ;GO ON
00246  0A5E              ;*********************************
00247  0A5E  A9 01       DISB   LDA #$01        ;ONE BYTE
00248  0A60  8D 58 08           STA LINECT      ;SET LINE # TO 1
00249  0A63  8D 55 08           STA PAGECT      ;SET PAGE TO 1
00250  0A66  A9 00              LDA #$00        ;ZERO BYTE
00251  0A68  8D 59 08           STA LINECT+1    ;SET LINE # TO 1
00252  0A6B  8D 56 08           STA PAGECT+1    ;SET PAGE TO 1
00253  0A6E  8D 57 08           STA LISTCT      ;SET LIST TO 0
00254  0A71  8D 5A 08           STA ERRCT       ;SET ERROR TO 0
00255  0A74  8D 5B 08           STA ERRCT+1     ;SET ERROR TO 0
00256  0A77  8D C0 08           STA LINEFL      ;SET LINE TO 0
00257  0A7A  8D C1 08           STA LINEFL+1    ;SET LINE TO 0
00258  0A7D  AD 1A 08           LDA OUTPUT      ;GET OUTPUT
00259  0A80  8D 19 08           STA DEVICE      ;SET OUTPUT
00260  0A83              ;*********************************
00261  0A83  20 83 14           JSR HEADER      ;PRINT HEADER
00262  0A86  20 9F 0D           JSR OFILED      ;OPEN DISK FILE






DISASSEMBLER64......PAGE 0009

LINE# LOC   CODE        LINE


00263  0A89              ;
00264  0A89  20 0F 30           JSR OPTPAG      ;PRINT .PAGE 'FILENAME'
00265  0A8C              ;
00266  0A8C  20 41 30           JSR OPTDIR      ;PRINT .OPT LIST
00267  0A8F              ;
00268  0A8F  20 44 18           JSR ORGIN       ;PRINT ORGIN LABEL
00269  0A92  20 49 24           JSR EQUPRT      ;PRINT EQUATE
00270  0A95              ;********************************
00271  0A95  20 86 15    DLOOP  JSR DSLINE      ;DIS ONE LINE
00272  0A98  B0 2C              BCS NEXTP       ;IF EA STOP
00273  0A9A  20 8E 12           JSR LINECK      ;LINE COUNT
00274  0A9D  20 E1 FF           JSR STOP        ;CHECK STOP
00275  0AA0  F0 57              BEQ QUITS       ;IF SO QUIT
00276  0AA2  20 E4 FF           JSR GETIN       ;GET KEY
00277  0AA5  F0 EE              BEQ DLOOP       ;IF NONE NEXT
00278  0AA7  C9 20              CMP #' '          ;IS IT A SPACE
00279  0AA9  D0 EA              BNE DLOOP       ;IF NOT NEXT
00280  0AAB              ;*********************************
00281  0AAB              ; PAUSE LISTING
00282  0AAB              ;********************************
00283  0AAB  AD 19 08           LDA DEVICE
00284  0AAE  48                 PHA
00285  0AAF  A9 03              LDA #$03
00286  0AB1  8D 19 08           STA DEVICE
00287  0AB4  A9 F8              LDA #<PMSG
00288  0AB6  A0 09              LDY #>PMSG
00289  0AB8  20 C4 13           JSR STRPNT
00290  0ABB  68                 PLA
00291  0ABC  8D 19 08           STA DEVICE
00292  0ABF  20 E4 FF    PAUSE  JSR GETIN       ;PAUSE FOR KEY
00293  0AC2  F0 FB              BEQ PAUSE       ;
00294  0AC4  D0 CF              BNE DLOOP       ;NEXT LINE
00295  0AC6              ;********************************
00296  0AC6  EE 12 08    NEXTP  INC PASS        ;INC PASS
00297  0AC9  AD 12 08           LDA PASS        ;GET PASS
00298  0ACC  CD 15 08           CMP CPASS       ;LAST PASS?
00299  0ACF  90 1F              BCC DISFUL      ;IF LESS AGAIN
00300  0AD1  D0 20              BNE DISC        ;FINISH
00301  0AD3  AD 1B 08           LDA WINDOW      ;WINDOW FLAG
00302  0AD6  F0 18              BEQ DISFUL      ;FULL OUTPUT
00303  0AD8              ;*********************************
00304  0AD8              ; WINDOWED OUTPUT
00305  0AD8              ;*********************************
00306  0AD8  AD 2A 08           LDA SAOUT       ;
00307  0ADB  8D 1E 08           STA SA          ;
00308  0ADE  AD 2B 08           LDA SAOUT+1     ;
00309  0AE1  8D 1F 08           STA SA+1        ;
00310  0AE4  AD 2C 08           LDA EAOUT       ;
00311  0AE7  8D 20 08           STA EA          ;
00312  0AEA  AD 2D 08           LDA EAOUT+1     ;
00313  0AED  8D 21 08           STA EA+1        ;
00314  0AF0              ;*********************************
00315  0AF0  4C 30 0A    DISFUL JMP DISA        ;LAST PASS
00316  0AF3  20 2C 19    DISC   JSR INCSL
00317  0AF6  20 5A 18           JSR EFILE       ;END FILE MSG






DISASSEMBLER64......PAGE 0010

LINE# LOC   CODE        LINE


00318  0AF9              ;*********************************
00319  0AF9  AD 19 08    QUITS  LDA DEVICE      ;CHECK DEV
00320  0AFC  29 08              AND #$08        ;DISK FILE?
00321  0AFE  F0 10              BEQ QUTERR      ;IF NOT BRANCH
00322  0B00  A9 08              LDA #$08        ;DISK
00323  0B02  20 C3 FF           JSR CLOSE       ;CLOSE IT
00324  0B05  AD 1A 08           LDA OUTPUT      ;GET OUTPUT
00325  0B08  29 07              AND #07         ;MASK DISK
00326  0B0A  8D 1A 08           STA OUTPUT      ;RESET OUTPUT
00327  0B0D  8D 19 08           STA DEVICE      ;RESET OUTPUT
00328  0B10              ;*********************************
00329  0B10              ; PRINT ERRORS
00330  0B10              ;*********************************
00331  0B10  AD 1A 08    QUTERR LDA OUTPUT
00332  0B13  09 03              ORA #$03
00333  0B15  8D 1A 08           STA OUTPUT
00334  0B18  8D 19 08           STA DEVICE
00335  0B1B  20 07 13           JSR NEWLIN
00336  0B1E  20 07 13           JSR NEWLIN
00337  0B21  A9 04              LDA #<MSGERR
00338  0B23  A0 0A              LDY #>MSGERR
00339  0B25  20 C4 13           JSR STRPNT
00340  0B28  AE 5A 08           LDX ERRCT
00341  0B2B  AD 5B 08           LDA ERRCT+1
00342  0B2E  20 E0 13           JSR PRTNUM
00343  0B31              ;*********************************
00344  0B31  AD 19 08           LDA DEVICE      ;CHECK DEV
00345  0B34  29 04              AND #$04        ;PRINTER?
00346  0B36  F0 13              BEQ DONED       ;IF NOT DONE
00347  0B38  A9 04              LDA #$04        ;DEVICE 4
00348  0B3A  8D 1A 08           STA OUTPUT      ;SET DEVICE
00349  0B3D  8D 19 08           STA DEVICE      ;SET DEVICE
00350  0B40  20 3C 1C           JSR INTPRT      ;PRINT INTABLE
00351  0B43  A9 07              LDA #$07        ;DEVICE 3 AND 4
00352  0B45  8D 19 08           STA DEVICE      ;SET DEVICE
00353  0B48  8D 1A 08           STA OUTPUT      ;SET DEVICE
00354  0B4B  20 07 13    DONED  JSR NEWLIN      ;NEWLINE
00355  0B4E  20 07 13           JSR NEWLIN      ;NEWLINE
00356  0B51  A9 0E              LDA #<MSGDIS    ;END MSG
00357  0B53  A0 0A              LDY #>MSGDIS
00358  0B55  20 C4 13           JSR STRPNT      ;PRINT IT
00359  0B58  20 07 13           JSR NEWLIN      ;NEW LINE
00360  0B5B  AD 19 08           LDA DEVICE      ;CHECK DEVICE
00361  0B5E  29 04              AND #$04        ;PRINTER
00362  0B60  F0 08              BEQ DONE        ;
00363  0B62  20 51 14           JSR FINISH      ;FINISH PAGE
00364  0B65  A9 04              LDA #$04        ;PRINTER
00365  0B67  20 C3 FF           JSR CLOSE       ;CLOSE FILE
00366  0B6A              ;*********************************
00367  0B6A  20 CC FF    DONE   JSR CLRCHN      ;RESET I/O
00368  0B6D  20 11 15           JSR SCRON       ;TURN SCREEN ON
00369  0B70  4C 91 E3           JMP WREADY      ;RETURN
00370  0B73              ;*********************************
00371  0B73              ;.FIL 0:OPTION.ASM
00372  0B73              ;*********************************






DISASSEMBLER64......PAGE 0011

LINE# LOC   CODE        LINE


00373  0B73              ;.END
00374  0B73              ;*********************************
00375  0B73              ; FILE OPTION.ASM
00376  0B73              ;*********************************
00377  0B73              ;
00378  0B73              ;        DISASSEMBLER64
00379  0B73              ;    SYMBOLIC DISASSEMBLER
00380  0B73              ;       BY DENTON MARLOWE
00381  0B73              ;
00382  0B73              ;  (C)1986 BY DENTON MARLOWE
00383  0B73              ;
00384  0B73              ;*********************************
00385  0B73              ; DISASSEMBLER OPTIONS
00386  0B73              ;*********************************
00387  0B73  A9 03       DOP    LDA #$03        ;DEVICE #3 SCREEN
00388  0B75  8D 19 08           STA DEVICE      ;CURRENT OUTPUT
00389  0B78  A9 00              LDA #$00        ;NO DEVICES
00390  0B7A  8D 1A 08           STA OUTPUT      ;FINAL OUTPUT
00391  0B7D  A9 BD              LDA #<MSG       ;START UP MSG
00392  0B7F  A0 0F              LDY #>MSG
00393  0B81  20 C4 13           JSR STRPNT      ;PRINT IT
00394  0B84              ;*********************************
00395  0B84              ; READ IN DISK FILE ?
00396  0B84              ;*********************************
00397  0B84  A9 0A              LDA #<MSF1
00398  0B86  A0 10              LDY #>MSF1
00399  0B88  20 C4 13           JSR STRPNT
00400  0B8B  20 25 13           JSR INSTNG
00401  0B8E  D0 03              BNE PFILE0
00402  0B90  4C CE 0C           JMP STARTS
00403  0B93              ;*********************************
00404  0B93              ; SAVE FILENAME FOR .PAGE DIRECTIVE
00405  0B93              ;*********************************
00406  0B93              PFILE0 = *
00407  0B93  20 F3 2F           JSR PFILEH
00408  0B96              ;*********************************
00409  0B96              ; APPEND ,P,R TO FILENAME
00410  0B96              ;*********************************
00411  0B96  A2 00              LDX #$00
00412  0B98  BD 5B 10    PFILE1 LDA PROGM,X
00413  0B9B  99 5C 08           STA BUF,Y
00414  0B9E  C8                 INY
00415  0B9F  E8                 INX
00416  0BA0  E0 04              CPX #$04
00417  0BA2  D0 F4              BNE PFILE1
00418  0BA4  8C 52 08           STY SAVA
00419  0BA7  20 B4 0C           JSR INITD
00420  0BAA  20 8E 0C           JSR PRFILE
00421  0BAD              ;*********************************
00422  0BAD              ; READ IN FILE FOR SA AND EA
00423  0BAD              ;*********************************
00424  0BAD  A2 08              LDX #$08        ;FILE #8
00425  0BAF  20 C6 FF           JSR CHKIN       ;INPUT FILE
00426  0BB2  20 CF FF           JSR CHRIN       ;GET LOW BYTE SA
00427  0BB5  8D 1E 08           STA SA          ;SET START






DISASSEMBLER64......PAGE 0012

LINE# LOC   CODE        LINE


00428  0BB8  20 CF FF           JSR CHRIN       ;GET HIGH BYTE SA
00429  0BBB  8D 1F 08           STA SA+1        ;SET START
00430  0BBE  20 57 19           JSR INTSA       ;SET END
00431  0BC1              ;*********************************
00432  0BC1  A9 00              LDA #$00        ;ZERO BYTE
00433  0BC3  8D 4F 08           STA ADRS        ;BYTE COUNTER
00434  0BC6  8D 50 08           STA ADRS+1      ;BYTE COUNTER
00435  0BC9  20 CF FF    PROGRD JSR CHRIN       ;INPUT BYTE
00436  0BCC  20 B7 FF           JSR READST      ;READ STATUS
00437  0BCF  D0 0D              BNE PROGED      ;IF NOT ZERO END
00438  0BD1  20 2C 19           JSR INCSL       ;INC END ADDRESS
00439  0BD4  EE 4F 08           INC ADRS        ;INC BYTE COUNT
00440  0BD7  D0 03              BNE *+5         ;
00441  0BD9  EE 50 08           INC ADRS+1      ;
00442  0BDC  D0 EB              BNE PROGRD      ;NEXT BYTE
00443  0BDE  AD 22 08    PROGED LDA SELECT      ;
00444  0BE1  8D 20 08           STA EA          ;
00445  0BE4  AD 23 08           LDA SELECT+1    ;
00446  0BE7  8D 21 08           STA EA+1        ;
00447  0BEA              ;*********************************
00448  0BEA  A9 08              LDA #$08        ;FILE #8
00449  0BEC  20 C3 FF           JSR CLOSE       ;CLOSE IT
00450  0BEF  20 CC FF           JSR CLRCHN      ;RESET I/O
00451  0BF2              ;*********************************
00452  0BF2              ; PRINT PROGRAM LOAD ADDRESS
00453  0BF2              ; AND END ADDRESS
00454  0BF2              ;*********************************
00455  0BF2  A9 26              LDA #<MSF2
00456  0BF4  A0 10              LDY #>MSF2
00457  0BF6  20 C4 13           JSR STRPNT
00458  0BF9  AD 1E 08           LDA SA
00459  0BFC  8D 45 08           STA WORKED
00460  0BFF  AD 1F 08           LDA SA+1
00461  0C02  8D 46 08           STA WORKED+1
00462  0C05  20 CB 18           JSR PWORKD
00463  0C08              ;
00464  0C08  A9 2D              LDA #'-'
00465  0C0A              ;
00466  0C0A  20 1A 14           JSR PCHAR
00467  0C0D  20 D9 18           JSR DOLLAR
00468  0C10  20 BF 18           JSR PSELEC
00469  0C13  20 FC 18           JSR CRLF
00470  0C16              ;*********************************
00471  0C16              ; CALCULATE BUFFER ADDRESS
00472  0C16              ;*********************************
00473  0C16  A5 37              LDA MEMSIZ
00474  0C18  8D 22 08           STA SELECT
00475  0C1B  A5 38              LDA MEMSIZ+1
00476  0C1D  8D 23 08           STA SELECT+1
00477  0C20  20 4B 19           JSR DECSL
00478  0C23  38                 SEC
00479  0C24  AD 22 08           LDA SELECT
00480  0C27  ED 4F 08           SBC ADRS
00481  0C2A  8D 22 08           STA SELECT
00482  0C2D  AD 23 08           LDA SELECT+1






DISASSEMBLER64......PAGE 0013

LINE# LOC   CODE        LINE


00483  0C30  ED 50 08           SBC ADRS+1
00484  0C33  8D 23 08           STA SELECT+1
00485  0C36              ;*********************************
00486  0C36              ; CALCULATE ADDRESS OFFSET
00487  0C36              ;*********************************
00488  0C36  38                 SEC
00489  0C37  AD 22 08           LDA SELECT
00490  0C3A  ED 1E 08           SBC SA
00491  0C3D  8D 24 08           STA OFFSET
00492  0C40  8D 45 08           STA WORKED
00493  0C43  AD 23 08           LDA SELECT+1
00494  0C46  ED 1F 08           SBC SA+1
00495  0C49  8D 25 08           STA OFFSET+1
00496  0C4C  8D 46 08           STA WORKED+1
00497  0C4F  A9 B6              LDA #<MSD4A
00498  0C51  A0 10              LDY #>MSD4A
00499  0C53  20 C4 13           JSR STRPNT
00500  0C56  20 CB 18           JSR PWORKD
00501  0C59  20 FC 18           JSR CRLF
00502  0C5C              ;*********************************
00503  0C5C              ; OPEN FILE AND READ PRG INTO BUF
00504  0C5C              ;*********************************
00505  0C5C  20 8E 0C           JSR PRFILE      ;OPEN FILE
00506  0C5F  A2 08              LDX #$08        ;FILE #8
00507  0C61  20 C6 FF           JSR CHKIN       ;INPUT FILE
00508  0C64  20 CF FF           JSR CHRIN       ;GET LOW BYTE SA
00509  0C67  20 CF FF           JSR CHRIN       ;GET HIGH BYTE SA
00510  0C6A  20 CF FF    PRO2RD JSR CHRIN       ;INPUT BYTE
00511  0C6D  AE 22 08           LDX SELECT      ;LOW BYTE POINTER
00512  0C70  86 02              STX ZEROUR      ;ZERO PAGE
00513  0C72  AE 23 08           LDX SELECT+1    ;HIH BYTE POINTER
00514  0C75  86 03              STX ZEROUR+1    ;ZERO PAGE
00515  0C77  A0 00              LDY #$00        ;OFFSET
00516  0C79  91 02              STA (ZEROUR),Y  ;STORE BYTE
00517  0C7B  20 2C 19           JSR INCSL       ;INC POINTER
00518  0C7E  20 B7 FF           JSR READST      ;READ STATUS
00519  0C81  F0 E7              BEQ PRO2RD      ;NEXT BYTE
00520  0C83  A9 08              LDA #$08        ;FILE #8
00521  0C85  20 C3 FF           JSR CLOSE       ;CLOSE IT
00522  0C88  20 CC FF           JSR CLRCHN      ;RESET I/O
00523  0C8B  4C 10 0D           JMP WINDOP      ;WINDOW OPTION
00524  0C8E              ;*********************************
00525  0C8E              ; OPEN PROGRAM FILE
00526  0C8E              ;*********************************
00527  0C8E  AD 52 08    PRFILE LDA SAVA
00528  0C91  A2 5C              LDX #<BUF
00529  0C93  A0 08              LDY #>BUF
00530  0C95  20 BD FF           JSR SETNAM
00531  0C98  A9 08              LDA #$08
00532  0C9A  A8                 TAY
00533  0C9B  AA                 TAX
00534  0C9C  20 BA FF           JSR SETLFS
00535  0C9F  20 C0 FF           JSR OPEN
00536  0CA2  20 CD 12           JSR DISERR
00537  0CA5  90 0C              BCC PROGOK






DISASSEMBLER64......PAGE 0014

LINE# LOC   CODE        LINE


00538  0CA7  A9 08              LDA #$08
00539  0CA9  20 C3 FF           JSR CLOSE
00540  0CAC  68                 PLA
00541  0CAD  68                 PLA
00542  0CAE  68                 PLA
00543  0CAF  68                 PLA
00544  0CB0  4C 91 E3           JMP WREADY
00545  0CB3              ;*********************************
00546  0CB3  60          PROGOK RTS
00547  0CB4              ;*********************************
00548  0CB4              ; INIT DISK
00549  0CB4              ;*********************************
00550  0CB4  A9 02       INITD  LDA #$02
00551  0CB6  A0 10              LDY #>INIT
00552  0CB8  A2 5F              LDX #<INIT
00553  0CBA  20 BD FF           JSR SETNAM
00554  0CBD  A9 0F              LDA #$0F
00555  0CBF  A2 08              LDX #$08
00556  0CC1  A0 0F              LDY #$0F
00557  0CC3  20 BA FF           JSR SETLFS
00558  0CC6  20 C0 FF           JSR OPEN
00559  0CC9  A9 0F              LDA #$0F
00560  0CCB  4C C3 FF           JMP CLOSE
00561  0CCE              ;*********************************
00562  0CCE              ; GET START ADDRESS
00563  0CCE              ;*********************************
00564  0CCE  A9 7A       STARTS LDA #<MSD1
00565  0CD0  A0 10              LDY #>MSD1
00566  0CD2  20 C4 13           JSR STRPNT
00567  0CD5  20 34 13           JSR GETWRD
00568  0CD8  AD 4F 08           LDA ADRS
00569  0CDB  8D 1E 08           STA SA
00570  0CDE  AD 50 08           LDA ADRS+1
00571  0CE1  8D 1F 08           STA SA+1
00572  0CE4              ;*********************************
00573  0CE4              ; GET END ADDRESS
00574  0CE4              ;*********************************
00575  0CE4  A9 8C              LDA #<MSD2
00576  0CE6  A0 10              LDY #>MSD2
00577  0CE8  20 C4 13           JSR STRPNT
00578  0CEB  20 34 13           JSR GETWRD
00579  0CEE  AD 4F 08           LDA ADRS
00580  0CF1  8D 20 08           STA EA
00581  0CF4  AD 50 08           LDA ADRS+1
00582  0CF7  8D 21 08           STA EA+1
00583  0CFA              ;*********************************
00584  0CFA              ; ADDRRESS OFFSET
00585  0CFA              ;*********************************
00586  0CFA  A9 9C              LDA #<MSD4
00587  0CFC  A0 10              LDY #>MSD4
00588  0CFE  20 C4 13           JSR STRPNT
00589  0D01  20 34 13           JSR GETWRD
00590  0D04  AD 4F 08           LDA ADRS
00591  0D07  8D 24 08           STA OFFSET
00592  0D0A  AD 50 08           LDA ADRS+1






DISASSEMBLER64......PAGE 0015

LINE# LOC   CODE        LINE


00593  0D0D  8D 25 08           STA OFFSET+1
00594  0D10              ;*********************************
00595  0D10              ; OUTPUT WINDOW
00596  0D10              ;*********************************
00597  0D10  A9 C9       WINDOP LDA #<MSD5
00598  0D12  A0 10              LDY #>MSD5
00599  0D14  20 C4 13           JSR STRPNT
00600  0D17  20 99 13           JSR CRNO
00601  0D1A  B0 30              BCS WIND1
00602  0D1C  A9 7A              LDA #<MSD1
00603  0D1E  A0 10              LDY #>MSD1
00604  0D20  20 C4 13           JSR STRPNT
00605  0D23  20 34 13           JSR GETWRD
00606  0D26  AD 4F 08           LDA ADRS
00607  0D29  8D 2A 08           STA SAOUT
00608  0D2C  AD 50 08           LDA ADRS+1
00609  0D2F  8D 2B 08           STA SAOUT+1
00610  0D32  A9 8C              LDA #<MSD2
00611  0D34  A0 10              LDY #>MSD2
00612  0D36  20 C4 13           JSR STRPNT
00613  0D39  20 34 13           JSR GETWRD
00614  0D3C  AD 4F 08           LDA ADRS
00615  0D3F  8D 2C 08           STA EAOUT
00616  0D42  AD 50 08           LDA ADRS+1
00617  0D45  8D 2D 08           STA EAOUT+1
00618  0D48  A9 FF              LDA #$FF
00619  0D4A  30 02              BMI WIND2
00620  0D4C  A9 00       WIND1  LDA #$00
00621  0D4E  8D 1B 08    WIND2  STA WINDOW
00622  0D51              ;*********************************
00623  0D51              ; SETUP GOBAL POINTER
00624  0D51              ;*********************************
00625  0D51  AD 1E 08           LDA SA
00626  0D54  8D 26 08           STA SAGOL
00627  0D57  AD 1F 08           LDA SA+1
00628  0D5A  8D 27 08           STA SAGOL+1
00629  0D5D  AD 20 08           LDA EA
00630  0D60  8D 28 08           STA EAGOL
00631  0D63  AD 21 08           LDA EA+1
00632  0D66  8D 29 08           STA EAGOL+1
00633  0D69              ;*********************************
00634  0D69              ; SOURCE FILE OUTPUT?
00635  0D69              ;*********************************
00636  0D69  A9 3A       OUFILE LDA #<MSG1
00637  0D6B  A0 10              LDY #>MSG1
00638  0D6D  20 C4 13           JSR STRPNT
00639  0D70              ;*********************************
00640  0D70  A9 00              LDA #$00
00641  0D72  8D C3 08           STA NCHARS
00642  0D75  20 25 13           JSR INSTNG
00643  0D78  F0 1A              BEQ NOFILE
00644  0D7A  A9 30              LDA #'0'
00645  0D7C  8D C2 08           STA VERSON
00646  0D7F  8C C3 08           STY NCHARS
00647  0D82  A2 00              LDX #$00






DISASSEMBLER64......PAGE 0016

LINE# LOC   CODE        LINE


00648  0D84  BD 5C 08    GFILE0 LDA BUF,X
00649  0D87  9D C4 08           STA NBUF,X
00650  0D8A  E8                 INX
00651  0D8B  EC C3 08           CPX NCHARS
00652  0D8E  D0 F4              BNE GFILE0
00653  0D90              ;*********************************
00654  0D90  A9 08       FILEOK LDA #$08
00655  0D92  D0 02              BNE FILE
00656  0D94  A9 00       NOFILE LDA #$00
00657  0D96  0D 1A 08    FILE   ORA OUTPUT
00658  0D99  8D 1A 08           STA OUTPUT
00659  0D9C  4C F5 0D           JMP PRTGET
00660  0D9F              ;*********************************
00661  0D9F              ;     OPEN SOURCE DISK FILE
00662  0D9F              ;*********************************
00663  0D9F  AC C3 08    OFILED LDY NCHARS
00664  0DA2  F0 03              BEQ NOID
00665  0DA4  20 B4 0C           JSR INITD
00666  0DA7  20 01 15    NOID   JSR SCROFF
00667  0DAA              ;*********************************
00668  0DAA  AC C3 08    OFILE  LDY NCHARS
00669  0DAD  F0 45              BEQ OFILE4
00670  0DAF  AD C2 08           LDA VERSON
00671  0DB2  C9 30              CMP #'0'
00672  0DB4  F0 07              BEQ OFILE1
00673  0DB6  AD C2 08           LDA VERSON
00674  0DB9  99 C4 08           STA NBUF,Y
00675  0DBC  C8                 INY
00676  0DBD  EE C2 08    OFILE1 INC VERSON
00677  0DC0  A2 00              LDX #$00
00678  0DC2  BD 57 10    OFILE2 LDA WRITE,X
00679  0DC5  99 C4 08           STA NBUF,Y
00680  0DC8  C8                 INY
00681  0DC9  E8                 INX
00682  0DCA  E0 04              CPX #$04
00683  0DCC  D0 F4              BNE OFILE2
00684  0DCE  98                 TYA
00685  0DCF  A0 08              LDY #>NBUF
00686  0DD1  A2 C4              LDX #<NBUF
00687  0DD3  20 BD FF           JSR SETNAM
00688  0DD6  A9 08              LDA #$08
00689  0DD8  AA                 TAX
00690  0DD9  A8                 TAY
00691  0DDA  20 BA FF           JSR SETLFS
00692  0DDD  20 C0 FF           JSR OPEN
00693  0DE0  20 CD 12           JSR DISERR
00694  0DE3  90 0F              BCC OFILE4
00695  0DE5              ;*********************************
00696  0DE5              ;  CLOSE OUT FILE ON ERROR
00697  0DE5              ;*********************************
00698  0DE5  A9 08       OFILE3 LDA #$08
00699  0DE7  20 C3 FF           JSR CLOSE
00700  0DEA  20 CC FF           JSR CLRCHN
00701  0DED  68                 PLA
00702  0DEE  68                 PLA






DISASSEMBLER64......PAGE 0017

LINE# LOC   CODE        LINE


00703  0DEF  68                 PLA
00704  0DF0  68                 PLA
00705  0DF1  4C 91 E3           JMP WREADY
00706  0DF4  60          OFILE4 RTS
00707  0DF5              ;*********************************
00708  0DF5              ; GET PRINTER OPTION
00709  0DF5              ;*********************************
00710  0DF5  A9 61       PRTGET LDA #<MSG2
00711  0DF7  A0 10              LDY #>MSG2
00712  0DF9  20 C4 13           JSR STRPNT
00713  0DFC  20 8C 13           JSR CRYS
00714  0DFF  B0 26              BCS NOPRT
00715  0E01  A9 00              LDA #$00
00716  0E03  20 BD FF           JSR SETNAM
00717  0E06  A9 04              LDA #$04
00718  0E08  A2 04              LDX #$04
00719  0E0A  A0 00              LDY #$00
00720  0E0C  20 BA FF           JSR SETLFS
00721  0E0F  20 C0 FF           JSR OPEN
00722  0E12  A2 04              LDX #$04
00723  0E14  20 C9 FF           JSR CHKOUT
00724  0E17  20 B7 FF           JSR READST
00725  0E1A  29 80              AND #$80
00726  0E1C  08                 PHP
00727  0E1D  20 CC FF           JSR CLRCHN
00728  0E20  28                 PLP
00729  0E21  30 04              BMI NOPRT
00730  0E23  A9 04              LDA #$04
00731  0E25  D0 02              BNE PRINT
00732  0E27  A9 03       NOPRT  LDA #$03
00733  0E29  0D 1A 08    PRINT  ORA OUTPUT
00734  0E2C  8D 1A 08           STA OUTPUT
00735  0E2F              ;*********************************
00736  0E2F              ; GO GET SYMBOLIC OPTION
00737  0E2F              ;*********************************
00738  0E2F  20 C9 22           JSR SOP
00739  0E32              ;*********************************
00740  0E32              ; GET RELATIVE ADDRESS OPTION
00741  0E32              ;*********************************
00742  0E32  A9 E5              LDA #<MSR1
00743  0E34  A0 10              LDY #>MSR1
00744  0E36  20 C4 13           JSR STRPNT
00745  0E39  20 8C 13           JSR CRYS
00746  0E3C  90 04              BCC DOP2
00747  0E3E  A9 01              LDA #$01
00748  0E40  D0 02              BNE DOP3
00749  0E42  A9 00       DOP2   LDA #$00
00750  0E44  8D 18 08    DOP3   STA ROPT
00751  0E47              ;*********************************
00752  0E47              ; GET BIT INSTRUCTION CODING OPTION
00753  0E47              ;*********************************
00754  0E47  20 4B 2F           JSR BITOPT
00755  0E4A              ;*********************************
00756  0E4A              ; DATA TABLE OPTION
00757  0E4A              ;*********************************






DISASSEMBLER64......PAGE 0018

LINE# LOC   CODE        LINE


00758  0E4A  AD 3D 08    AOP    LDA SYMBOE
00759  0E4D  8D EB 08           STA DATABP
00760  0E50  8D ED 08           STA DATABS
00761  0E53  8D EF 08           STA DATABE
00762  0E56  85 02              STA ZEROUR
00763  0E58  AD 3E 08           LDA SYMBOE+1
00764  0E5B  8D EC 08           STA DATABP+1
00765  0E5E  8D EE 08           STA DATABS+1
00766  0E61  8D F0 08           STA DATABE+1
00767  0E64  85 03              STA ZEROUR+1
00768  0E66              ;*********************************
00769  0E66  A9 73              LDA #<MSAOP
00770  0E68  A0 11              LDY #>MSAOP
00771  0E6A  20 C4 13           JSR STRPNT
00772  0E6D  20 25 13           JSR INSTNG
00773  0E70  D0 03              BNE BOP
00774  0E72  4C F5 0E           JMP NOTABS
00775  0E75              ;*********************************
00776  0E75  98          BOP    TYA
00777  0E76  48                 PHA
00778  0E77  20 B4 0C           JSR INITD
00779  0E7A  68                 PLA
00780  0E7B  A8                 TAY
00781  0E7C  A2 00              LDX #$00
00782  0E7E  BD 32 26    AFILE  LDA NAMS,X
00783  0E81  99 5C 08           STA BUF,Y
00784  0E84  C8                 INY
00785  0E85  E8                 INX
00786  0E86  E0 04              CPX #$04
00787  0E88  D0 F4              BNE AFILE
00788  0E8A  98                 TYA
00789  0E8B  A0 08              LDY #>BUF
00790  0E8D  A2 5C              LDX #<BUF
00791  0E8F  20 BD FF           JSR SETNAM
00792  0E92  A9 03              LDA #$03
00793  0E94  A2 08              LDX #$08
00794  0E96  A0 03              LDY #$03
00795  0E98  20 BA FF           JSR SETLFS
00796  0E9B  20 C0 FF           JSR OPEN
00797  0E9E  20 CD 12           JSR DISERR
00798  0EA1  B0 1B              BCS AGET1
00799  0EA3  A2 03              LDX #$03
00800  0EA5  20 C6 FF           JSR CHKIN
00801  0EA8              ;*********************************
00802  0EA8              ; READ IN DATA TABLE
00803  0EA8              ;*********************************
00804  0EA8  A0 00              LDY #$00
00805  0EAA  20 CF FF           JSR CHRIN
00806  0EAD  8D E9 08           STA NDATA
00807  0EB0  F0 0C              BEQ AGET1
00808  0EB2  20 CF FF    AGET   JSR CHRIN
00809  0EB5  99 F1 08           STA TDATA,Y
00810  0EB8  C8                 INY
00811  0EB9  20 B7 FF           JSR READST
00812  0EBC  F0 F4              BEQ AGET






DISASSEMBLER64......PAGE 0019

LINE# LOC   CODE        LINE


00813  0EBE  A9 03       AGET1  LDA #$03
00814  0EC0  20 C3 FF           JSR CLOSE
00815  0EC3  20 CC FF           JSR CLRCHN
00816  0EC6              ;*********************************
00817  0EC6              ; PRINT DATA TABLE
00818  0EC6              ;*********************************
00819  0EC6  AD E9 08    PRTDAS LDA NDATA
00820  0EC9  8D E7 08           STA CDATA
00821  0ECC  A0 00              LDY #$00
00822  0ECE  8C 54 08           STY SAVY
00823  0ED1  20 FC 18    PRTNEX JSR CRLF
00824  0ED4  A2 05              LDX #$05
00825  0ED6  8E 53 08           STX SAVX
00826  0ED9  AC 54 08    PRTDAL LDY SAVY
00827  0EDC  B9 F1 08           LDA TDATA,Y
00828  0EDF  20 AE 13           JSR PRBYT
00829  0EE2  20 0E 19           JSR SPACE
00830  0EE5  EE 54 08           INC SAVY
00831  0EE8  CE 53 08           DEC SAVX
00832  0EEB  D0 EC              BNE PRTDAL
00833  0EED  CE E7 08           DEC CDATA
00834  0EF0  D0 DF              BNE PRTNEX
00835  0EF2              ;*********************************
00836  0EF2  4C 92 0F           JMP XOP0
00837  0EF5              ;*********************************
00838  0EF5              ; READ DATA FOR KEYBOARD
00839  0EF5              ;*********************************
00840  0EF5  A9 92       NOTABS LDA #<MSA1      ;NUMBER OF DATA
00841  0EF7  A0 11              LDY #>MSA1
00842  0EF9  20 C4 13           JSR STRPNT
00843  0EFC  20 34 13           JSR GETWRD      ;INPUT HEX BYTE
00844  0EFF  AD 4F 08           LDA ADRS        ;GET BYTE
00845  0F02  8D E9 08           STA NDATA       ;SET NUM TABLES
00846  0F05  D0 03              BNE AOPX        ;0 DATA THEN END
00847  0F07  4C 92 0F           JMP XOP0        ;RETURN
00848  0F0A  A9 00       AOPX   LDA #$00        ;ZERO OFFSET
00849  0F0C  8D E7 08           STA CDATA       ;FIRST TABLE
00850  0F0F              ;*********************************
00851  0F0F              ; CALCULATE TABLE OFFSET
00852  0F0F              ;*********************************
00853  0F0F  AD E7 08    AOP1   LDA CDATA       ;GET TABLE NUMBER
00854  0F12  0A                 ASL A           ;*2
00855  0F13  0A                 ASL A           ;*4
00856  0F14  18                 CLC             ;C=0
00857  0F15  6D E7 08           ADC CDATA       ;*5
00858  0F18  8D 54 08           STA SAVY        ;STORE AS OFFSET
00859  0F1B              ;*********************************
00860  0F1B  A9 B4              LDA #<MSA2
00861  0F1D  A0 11              LDY #>MSA2
00862  0F1F  20 C4 13           JSR STRPNT      ;PRINT MSG
00863  0F22  20 34 13           JSR GETWRD      ;GET ADDRESS
00864  0F25  AC 54 08           LDY SAVY        ;GET OFFSET
00865  0F28  AD 4F 08           LDA ADRS
00866  0F2B  99 F1 08           STA TDATA,Y
00867  0F2E  C8                 INY






DISASSEMBLER64......PAGE 0020

LINE# LOC   CODE        LINE


00868  0F2F  AD 50 08           LDA ADRS+1
00869  0F32  99 F1 08           STA TDATA,Y
00870  0F35  C8                 INY
00871  0F36  8C 54 08           STY SAVY
00872  0F39              ;*********************************
00873  0F39              ; END OF DATA TABLE
00874  0F39              ;*********************************
00875  0F39  A9 CC       AOP2   LDA #<MSA3
00876  0F3B  A0 11              LDY #>MSA3
00877  0F3D  20 C4 13           JSR STRPNT
00878  0F40  20 34 13           JSR GETWRD      ;GET ADDRESS
00879  0F43  AC 54 08           LDY SAVY
00880  0F46  AD 4F 08           LDA ADRS
00881  0F49  99 F1 08           STA TDATA,Y
00882  0F4C  C8                 INY
00883  0F4D  AD 50 08           LDA ADRS+1
00884  0F50  99 F1 08           STA TDATA,Y
00885  0F53  C8                 INY
00886  0F54  8C 54 08           STY SAVY
00887  0F57              ;*********************************
00888  0F57              ; GET TYPE OF TABLE
00889  0F57              ;*********************************
00890  0F57  A9 E2              LDA #<MSG5      ;TABLE TYPE
00891  0F59  A0 11              LDY #>MSG5
00892  0F5B  20 C4 13           JSR STRPNT
00893  0F5E  20 E4 FF    AOP3   JSR GETIN
00894  0F61  F0 FB              BEQ AOP3
00895  0F63  C9 30              CMP #'0'
00896  0F65  F0 14              BEQ ASC
00897  0F67  C9 31              CMP #'1'
00898  0F69  F0 10              BEQ ASC
00899  0F6B  C9 32              CMP #'2'
00900  0F6D  F0 0C              BEQ ASC
00901  0F6F  C9 33              CMP #'3'
00902  0F71  F0 08              BEQ ASC
00903  0F73  C9 34              CMP #'4'
00904  0F75  F0 04              BEQ ASC
00905  0F77  C9 53              CMP #'S'
00906  0F79  D0 E3              BNE AOP3
00907  0F7B  20 D2 FF    ASC    JSR CHROUT
00908  0F7E  AC 54 08           LDY SAVY
00909  0F81  99 F1 08           STA TDATA,Y
00910  0F84              ;*********************************
00911  0F84  EE E7 08           INC CDATA       ;INC TABLE COUNT
00912  0F87  AD E7 08           LDA CDATA       ;GET TABLE COUNT
00913  0F8A  CD E9 08           CMP NDATA       ;ALL TABLES?
00914  0F8D  F0 03              BEQ XOP0        ;IF NOT GET MORE
00915  0F8F  4C 0F 0F           JMP AOP1        ;IF NOT GET MORE
00916  0F92              ;*********************************
00917  0F92              ; GET LABEL GENERATION OPTION
00918  0F92              ;*********************************
00919  0F92  A9 4E       XOP0   LDA #<MSB4
00920  0F94  A0 12              LDY #>MSB4
00921  0F96  20 C4 13           JSR STRPNT
00922  0F99  20 8C 13           JSR CRYS






DISASSEMBLER64......PAGE 0021

LINE# LOC   CODE        LINE


00923  0F9C  B0 04              BCS XOP1
00924  0F9E  A9 01              LDA #$01
00925  0FA0  D0 02              BNE XOP2
00926  0FA2  A9 00       XOP1   LDA #$00
00927  0FA4  8D 17 08    XOP2   STA XOPT
00928  0FA7              ;*********************************
00929  0FA7              ; OUTPUT FORMAT OPTION
00930  0FA7              ;*********************************
00931  0FA7  A9 6E              LDA #<MSB5
00932  0FA9  A0 12              LDY #>MSB5
00933  0FAB  20 C4 13           JSR STRPNT
00934  0FAE  20 8C 13           JSR CRYS
00935  0FB1  B0 04              BCS FOP1
00936  0FB3  A9 00              LDA #$00
00937  0FB5  F0 02              BEQ FOP2
00938  0FB7  A9 FF       FOP1   LDA #$FF
00939  0FB9  8D 1C 08    FOP2   STA FOROPT
00940  0FBC              ;*********************************
00941  0FBC  60                 RTS
00942  0FBD              ;*********************************
00943  0FBD              ;   COMMAND MESSAGES
00944  0FBD              ;*********************************
00945  0FBD  0D          MSG    .BYTE $0D,$0D
00945  0FBE  0D 
00946  0FBF  43 42       .BYTE  'CBM RESIDENT DISASSEMBLER'
00947  0FD8  20 56       .BYTE  ' V080282'
00948  0FE0  0D          .BYTE  $0D
00949  0FE1  28 43       .BYTE  '(C) 1982 BY COMMODORE '
00950  0FF7  42 55       .BYTE  'BUSINESS MACHINES'
00951  1008  0D          .BYTE  $0D
00952  1009  00          .BYTE  0
00953  100A              ;*********************************
00954  100A  0D          MSF1   .BYTE $0D
00955  100B  50 52       .BYTE  'PROGRAM FILE (CR OR NAME):'
00956  1025  00          .BYTE  0
00957  1026  0D          MSF2   .BYTE $0D
00958  1027  50 52       .BYTE  'PROGRAM ADDRESS: $'
00959  1039  00          .BYTE  0
00960  103A              ;*********************************
00961  103A  0D          MSG1   .BYTE $0D
00962  103B  45 44       .BYTE  'EDITOR64 FILE (CR OR NAME):'
00963  1056  00          .BYTE  0
00964  1057              ;*********************************
00965  1057  2C 53       WRITE  .BYTE ',S,W'
00966  105B  2C 50       PROGM  .BYTE ',P,R'
00967  105F  49 30       INIT   .BYTE 'I0'
00968  1061              ;*********************************
00969  1061  0D          MSG2   .BYTE $0D
00970  1062  48 41       .BYTE  'HARD COPY (Y/CR OR N)? '
00971  1079  00          .BYTE  0
00972  107A              ;*********************************
00973  107A  0D          MSD1   .BYTE $0D
00974  107B  53 54       .BYTE  'START ADDRESS :$'
00975  108B  00          .BYTE  0
00976  108C              ;*********************************






DISASSEMBLER64......PAGE 0022

LINE# LOC   CODE        LINE


00977  108C  0D          MSD2   .BYTE $0D
00978  108D  45 4E       .BYTE  'END ADDRESS :$'
00979  109B  00          .BYTE  0
00980  109C              ;*********************************
00981  109C  0D          MSD4   .BYTE $0D
00982  109D  41 44       .BYTE  'ADDRESS OFFSET (OR CR):$'
00983  10B5  00          .BYTE  0
00984  10B6              ;*********************************
00985  10B6  0D          MSD4A  .BYTE $0D
00986  10B7  41 44       .BYTE  'ADDRESS OFFSET :$'
00987  10C8  00          .BYTE  0
00988  10C9              ;*********************************
00989  10C9  0D          MSD5   .BYTE $0D
00990  10CA  57 49       .BYTE  'WINDOW OUTPUT(Y OR N/CR)? '
00991  10E4  00          .BYTE  0
00992  10E5              ;*********************************
00993  10E5  0D          MSR1   .BYTE $0D
00994  10E6  52 45       .BYTE  'RELATIVE BRANCH TO LABEL '
00995  10FF  28 59       .BYTE  '(Y/CR OR N)? '
00996  110C  00          .BYTE  0
00997  110D              ;*********************************
00998  110D  0D          MSB1   .BYTE $0D
00999  110E  42 49              .BYTE 'BIT INSTRUCTION CODING'
01000  1124  0D                 .BYTE $0D,$0D
01000  1125  0D 
01001  1126  30 2F              .BYTE '0/CR STANDARD',$0D
01001  1133  0D 
01002  1134  31 20              .BYTE '1     $2C ABS',$0D
01002  1141  0D 
01003  1142  32 20              .BYTE '2     $24 ZP',$0D
01003  114E  0D 
01004  114F  33 20              .BYTE '3     $2C AND $24',$0D
01004  1160  0D 
01005  1161  0D                 .BYTE $0D
01006  1162  45 4E              .BYTE 'ENTER BIT CODE: '
01007  1172  00                 .BYTE 0
01008  1173              ;*********************************
01009  1173  0D          MSAOP  .BYTE $0D
01010  1174  44 41       .BYTE  'DATA TABLE FILE (CR OR NAME):'
01011  1191  00          .BYTE  0
01012  1192  0D          MSA1   .BYTE $0D
01013  1193  4E 55       .BYTE  'NUMBER OF DATA TABLES (OR CR) :$'
01014  11B3  00          .BYTE  0
01015  11B4  0D          MSA2   .BYTE $0D
01016  11B5  54 41       .BYTE  'TABLE START ADDRESS :$'
01017  11CB  00          .BYTE  0
01018  11CC  0D          MSA3   .BYTE $0D
01019  11CD  54 41       .BYTE  'TABLE END ADDRESS :$'
01020  11E1  00          .BYTE  0
01021  11E2  0D          MSG5   .BYTE $0D,$0D
01021  11E3  0D 
01022  11E4  44 49              .BYTE 'DISASSEMBLY OPTIONS'
01023  11F7  0D                 .BYTE $0D,$0D
01023  11F8  0D 
01024  11F9  30 20              .BYTE '0 ASCII',$0D






DISASSEMBLER64......PAGE 0023

LINE# LOC   CODE        LINE


01024  1200  0D 
01025  1201  31 20              .BYTE '1 BYTE',$0D
01025  1207  0D 
01026  1208  32 20              .BYTE '2 WORD',$0D
01026  120E  0D 
01027  120F  33 20              .BYTE '3 DBYTE',$0D
01027  1216  0D 
01028  1217  34 20              .BYTE '4 WORD-1',$0D
01028  121F  0D 
01029  1220  53 20              .BYTE 'S SKIP ADDRESS RANGE',$0D
01029  1234  0D 
01030  1235  45 4E              .BYTE 'ENTER DISASSEMBLY CODE: '
01031  124D  00                 .BYTE 0
01032  124E              ;*********************************
01033  124E  0D          MSB4   .BYTE $0D
01034  124F  4C 41       .BYTE  'LABLE GENERATION (Y/CR OR N)? '
01035  126D  00          .BYTE  0
01036  126E              ;*********************************
01037  126E  0D          MSB5   .BYTE $0D
01038  126F  46 4F       .BYTE  'FORMATED LISTING (Y/CR OR N)? '
01039  128D  00          .BYTE  0
01040  128E              ;*********************************
01041  128E              ;.FIL 0:UTIL.ASM
01042  128E              ;*********************************
01043  128E              ;.END
01044  128E              ;*********************************
01045  128E              ; FILE UTIL.ASM
01046  128E              ;*********************************
01047  128E              ;
01048  128E              ;        DISASSEMBLER64
01049  128E              ;    SYMBOLIC DISASSEMBLER
01050  128E              ;       BY DENTON MARLOWE
01051  128E              ;
01052  128E              ;  (C)1986 BY DENTON MARLOWE
01053  128E              ;
01054  128E              ;*********************************
01055  128E              ;      *** UTILITIES ***
01056  128E              ;*********************************
01057  128E              ; CHECK LINE COUNT FOR OUTPUT FILE
01058  128E              ;*********************************
01059  128E  AD 12 08    LINECK LDA PASS
01060  1291  CD 15 08           CMP CPASS
01061  1294  D0 36              BNE LINECO
01062  1296  AD 19 08           LDA DEVICE
01063  1299  29 08              AND #$08
01064  129B  F0 2F              BEQ LINECO
01065  129D              ;*********************************
01066  129D              ; CLOSE SOURCE FILE AND OPEN NEXT
01067  129D              ;*********************************
01068  129D  38                 SEC
01069  129E  AD C0 08           LDA LINEFL
01070  12A1  E9 20              SBC #$20
01071  12A3  8D 51 08           STA TEMP
01072  12A6  AD C1 08           LDA LINEFL+1
01073  12A9  E9 03              SBC #$03






DISASSEMBLER64......PAGE 0024

LINE# LOC   CODE        LINE


01074  12AB  0D 51 08           ORA TEMP
01075  12AE  90 1C              BCC LINECO
01076  12B0              ; NOP
01077  12B0              ; NOP
01078  12B0              ; NOP
01079  12B0  20 95 2F           JSR OUTFIL
01080  12B3              ;
01081  12B3  20 5A 18           JSR EFILE
01082  12B6  A9 08              LDA #$08
01083  12B8  20 C3 FF           JSR CLOSE
01084  12BB  20 AA 0D           JSR OFILE
01085  12BE  A9 00              LDA #$00
01086  12C0  8D C0 08           STA LINEFL
01087  12C3  8D C1 08           STA LINEFL+1
01088  12C6  20 44 18           JSR ORGIN
01089  12C9  20 6A 18           JSR COMENT
01090  12CC  60          LINECO RTS
01091  12CD              ;*********************************
01092  12CD              ;  DISK ERROR CHECK
01093  12CD              ;*********************************
01094  12CD  A9 08       DISERR LDA #$08        ;DEV #8
01095  12CF  85 BA              STA $BA         ;PUT IN DEV TABLE
01096  12D1  20 B4 FF           JSR $FFB4       ;SEND TALK
01097  12D4  A9 6F              LDA #$6F        ;SECONDARY ADDRESS
01098  12D6  85 B9              STA $B9         ;PUT IN TABLE
01099  12D8  20 96 FF           JSR $FF96       ;SEND SEC
01100  12DB  20 A5 FF           JSR $FFA5       ;GET FIRST BYTE
01101  12DE  C9 30              CMP #$30        ;IS IT A ZERO
01102  12E0  D0 0C              BNE DLOOC       ;IF NOT ZERO ERROR
01103  12E2  20 A5 FF    DLOOE  JSR $FFA5       ;GET BYTE
01104  12E5  C9 0D              CMP #$0D        ;IS IT CR?
01105  12E7  D0 F9              BNE DLOOE       ;GET NEXT BYTE
01106  12E9  20 AB FF           JSR $FFAB       ;UNTALK
01107  12EC  18                 CLC             ;NO ERROR FLAG
01108  12ED  60                 RTS             ;RETURN
01109  12EE              ;*********************************
01110  12EE              ; PRINT DISK ERROR
01111  12EE              ;*********************************
01112  12EE  48          DLOOC  PHA             ;STACK BYTE
01113  12EF  A9 0D              LDA #$0D        ;ASCII CR
01114  12F1  20 D2 FF           JSR CHROUT      ;PRINT IT
01115  12F4  68                 PLA             ;GET BYTE
01116  12F5  20 D2 FF           JSR CHROUT      ;PRINT IT
01117  12F8  20 A5 FF    DLOOA  JSR $FFA5       ;GET NEXT BYTE
01118  12FB  20 D2 FF           JSR CHROUT      ;PRINT IT
01119  12FE  C9 0D              CMP #$0D        ;IS IT CR
01120  1300  D0 F6              BNE DLOOA       ;GET NEXT BYTE
01121  1302  20 AB FF           JSR $FFAB       ;UNTALK
01122  1305  38                 SEC             ;SET ERROR FLAG
01123  1306  60                 RTS             ;RETURN
01124  1307              ;*********************************
01125  1307              ; START NEW LINE AND INC COUNT
01126  1307              ;*********************************
01127  1307  EE 58 08    NEWLIN INC LINECT
01128  130A  D0 03              BNE *+5






DISASSEMBLER64......PAGE 0025

LINE# LOC   CODE        LINE


01129  130C  EE 59 08           INC LINECT+1
01130  130F  EE C0 08           INC LINEFL
01131  1312  D0 03              BNE *+5
01132  1314  EE C1 08           INC LINEFL+1
01133  1317  20 FC 18           JSR CRLF
01134  131A  AD 19 08           LDA DEVICE
01135  131D  29 04              AND #$04
01136  131F  F0 03              BEQ NEWEXT
01137  1321  20 76 14           JSR NEXLIN
01138  1324  60          NEWEXT RTS
01139  1325              ;*********************************
01140  1325              ; INPUT UTILITIES
01141  1325              ;*********************************
01142  1325              ; INPUT STRING ROUTINE
01143  1325              ;*********************************
01144  1325  A0 00       INSTNG LDY #$00
01145  1327  20 CF FF    INSTN1 JSR CHRIN
01146  132A  99 5C 08           STA BUF,Y
01147  132D  C8                 INY
01148  132E  C9 0D              CMP #$0D
01149  1330  D0 F5              BNE INSTN1
01150  1332  88                 DEY
01151  1333  60                 RTS
01152  1334              ;*********************************
01153  1334              ; INPUT HEX CHAR STRING
01154  1334              ;*********************************
01155  1334  A9 00       GETWRD LDA #$00
01156  1336  8D 4F 08           STA ADRS
01157  1339  8D 50 08           STA ADRS+1
01158  133C  20 25 13           JSR INSTNG
01159  133F  88                 DEY
01160  1340  30 15              BMI INEND
01161  1342              ;*********************************
01162  1342              ; PROCESS INPUT
01163  1342              ;*********************************
01164  1342  20 58 13           JSR GETBYT
01165  1345  AD 51 08           LDA TEMP
01166  1348  8D 4F 08           STA ADRS
01167  134B  88                 DEY
01168  134C  30 09              BMI INEND
01169  134E  20 58 13           JSR GETBYT
01170  1351  AD 51 08           LDA TEMP
01171  1354  8D 50 08           STA ADRS+1
01172  1357  60          INEND  RTS
01173  1358              ;*********************************
01174  1358              ; COVERT BUFFER INTO BYTES
01175  1358              ;*********************************
01176  1358  B9 5C 08    GETBYT LDA BUF,Y
01177  135B  20 75 13           JSR BINARY
01178  135E  8D 51 08           STA TEMP
01179  1361  88                 DEY
01180  1362  30 10              BMI INENX
01181  1364  B9 5C 08           LDA BUF,Y
01182  1367  20 75 13           JSR BINARY
01183  136A  0A                 ASL A






DISASSEMBLER64......PAGE 0026

LINE# LOC   CODE        LINE


01184  136B  0A                 ASL A
01185  136C  0A                 ASL A
01186  136D  0A                 ASL A
01187  136E  0D 51 08           ORA TEMP
01188  1371  8D 51 08           STA TEMP
01189  1374  60          INENX  RTS
01190  1375              ;*********************************
01191  1375              ; CONVERT A INTO HEX NIBBLE
01192  1375              ;*********************************
01193  1375  38          BINARY SEC
01194  1376  E9 30              SBC #'0'
01195  1378  90 0E              BCC NOHEX
01196  137A  C9 0A              CMP #$0A
01197  137C  90 0C              BCC YSHEX
01198  137E  E9 07              SBC #$07
01199  1380  C9 10              CMP #$10
01200  1382  B0 04              BCS NOHEX
01201  1384  C9 0A              CMP #$0A
01202  1386  B0 02              BCS YSHEX
01203  1388  38          NOHEX  SEC
01204  1389  60                 RTS
01205  138A  18          YSHEX  CLC
01206  138B  60                 RTS
01207  138C              ;*********************************
01208  138C              ; GET OPTION (CR/Y OR N): Y=C=0
01209  138C              ;*********************************
01210  138C  20 CF FF    CRYS   JSR CHRIN
01211  138F  C9 59              CMP #'Y'
01212  1391  F0 11              BEQ CRYS1
01213  1393  C9 0D              CMP #$0D
01214  1395  F0 0D              BEQ CRYS1
01215  1397  D0 0D              BNE CRNO1
01216  1399              ;*********************************
01217  1399              ; GET OPTION (Y OR CR/N): Y=C=0
01218  1399              ;*********************************
01219  1399  20 CF FF    CRNO   JSR CHRIN
01220  139C  C9 4E              CMP #'N'
01221  139E  F0 06              BEQ CRNO1
01222  13A0  C9 0D              CMP #$0D
01223  13A2  F0 02              BEQ CRNO1
01224  13A4  18          CRYS1  CLC
01225  13A5  60                 RTS
01226  13A6  38          CRNO1  SEC
01227  13A7  60                 RTS
01228  13A8              ;*********************************
01229  13A8              ; PRINT UTILITES
01230  13A8              ;*********************************
01231  13A8              ; PRINT WORD MSB IN Y LSB IN A
01232  13A8              ;*********************************
01233  13A8  48          PRBYTS PHA             ;PUT A ON STACK
01234  13A9  98                 TYA             ;PUT HIH BYTE IN A
01235  13AA  20 AE 13           JSR PRBYT       ;PRINT MSB
01236  13AD  68                 PLA             ;GET LSB
01237  13AE              ;*********************************
01238  13AE              ; PRINT BYTE IN A






DISASSEMBLER64......PAGE 0027

LINE# LOC   CODE        LINE


01239  13AE              ;*********************************
01240  13AE  48          PRBYT  PHA             ;PUT BYTE ON STACK
01241  13AF  4A                 LSR A           ;4 RIGHT SHIFTS
01242  13B0  4A                 LSR A           ;TO MOVE HIGH
01243  13B1  4A                 LSR A           ;NIBBLE TO LOW
01244  13B2  4A                 LSR A           ;NIB WITH HIGH 0'S
01245  13B3  A8                 TAY             ;USE AS POINTER
01246  13B4  B9 1A 15           LDA HEXA,Y      ;GET ASCII
01247  13B7  20 1A 14           JSR PCHAR       ;PRINT
01248  13BA  68                 PLA             ;PULL BYTE OUT
01249  13BB  29 0F              AND #$0F        ;MASK HIGH NIBBLE
01250  13BD  A8                 TAY             ;USE AS POINTER
01251  13BE  B9 1A 15           LDA HEXA,Y      ;GET ASCII
01252  13C1  4C 1A 14           JMP PCHAR       ;PRINT
01253  13C4              ;*********************************
01254  13C4              ; STRING OUTPUT ROUTINE
01255  13C4              ;*********************************
01256  13C4  85 02       STRPNT STA ZEROUR      ;POINTER TO
01257  13C6  84 03              STY ZEROUR+1    ;MESSAGE
01258  13C8  A0 00              LDY #$00        ;OFFSET
01259  13CA  B1 02       SOUT   LDA (ZEROUR),Y  ;GET CHAR
01260  13CC  F0 06              BEQ SEXIT       ;IF ZERO EXIT
01261  13CE  20 1A 14           JSR PCHAR       ;PRINT
01262  13D1  C8                 INY             ;INC OFFSET
01263  13D2  D0 F6              BNE SOUT        ;LOOP
01264  13D4  60          SEXIT  RTS             ;RETURN
01265  13D5              ;*********************************
01266  13D5              ; PRINT DEC NUMBER (0000)
01267  13D5              ;*********************************
01268  13D5  86 02       PRTPAG STX ZEROUR      ;LOW  BYTE NUM
01269  13D7  85 03              STA ZEROUR+1    ;HIGH BYTE NUM
01270  13D9  A2 03              LDX #$03        ;4 CHARS
01271  13DB  8E 53 08           STX SAVX        ;SAVE COUNT
01272  13DE  D0 09              BNE PRTNU1      ;BRANCH
01273  13E0              ;*********************************
01274  13E0              ; PRINT DEC NUMBER (00000)
01275  13E0              ;*********************************
01276  13E0  86 02       PRTNUM STX ZEROUR      ;LOW  BYTE NUM
01277  13E2  85 03              STA ZEROUR+1    ;HIGH BYTE NUM
01278  13E4  A2 04              LDX #$04        ;5 CHARS
01279  13E6  8E 53 08           STX SAVX        ;SAVE COUNT
01280  13E9              ;*********************************
01281  13E9              ; PRINT DEC NUMBER AND LEADING 0
01282  13E9              ;*********************************
01283  13E9  AE 53 08    PRTNU1 LDX SAVX
01284  13EC  A0 30              LDY #$30
01285  13EE  D0 01              BNE PRTNU3
01286  13F0  C8          PRTNU2 INY 
01287  13F1  38          PRTNU3 SEC 
01288  13F2  A5 02              LDA ZEROUR
01289  13F4  FD 2A 15           SBC CONST0,X
01290  13F7  85 02              STA ZEROUR
01291  13F9  A5 03              LDA ZEROUR+1
01292  13FB  FD 2F 15           SBC CONST1,X
01293  13FE  85 03              STA ZEROUR+1






DISASSEMBLER64......PAGE 0028

LINE# LOC   CODE        LINE


01294  1400  B0 EE              BCS PRTNU2
01295  1402  A5 02              LDA ZEROUR
01296  1404  7D 2A 15           ADC CONST0,X
01297  1407  85 02              STA ZEROUR
01298  1409  A5 03              LDA ZEROUR+1
01299  140B  7D 2F 15           ADC CONST1,X
01300  140E  85 03              STA ZEROUR+1
01301  1410  98                 TYA
01302  1411  20 1A 14           JSR PCHAR
01303  1414  CE 53 08           DEC SAVX
01304  1417  10 D0              BPL PRTNU1
01305  1419  60                 RTS
01306  141A              ;*********************************
01307  141A              ;  OUTPUT CHAR TO OPEN CHANNEL
01308  141A              ;*********************************
01309  141A  48          PCHAR  PHA             ;SAVE CHAR
01310  141B  AD 19 08           LDA DEVICE      ;GET FILE FLAG
01311  141E  29 08              AND #$08        ;CHECK FOR DISK
01312  1420  F0 0D              BEQ PRIN        ;IF NONE BRANCH
01313  1422  A2 08              LDX #$08        ;DISK FILE #1
01314  1424  20 C9 FF           JSR CHKOUT      ;FILE IS OUTPUT
01315  1427  68                 PLA             ;GET CHAR
01316  1428  48                 PHA             ;RESAVE CHAR
01317  1429  20 D2 FF           JSR CHROUT      ;OUTPUT TO DISK
01318  142C  20 CC FF           JSR CLRCHN      ;RESET OUTPUT
01319  142F  AD 19 08    PRIN   LDA DEVICE      ;GET DEVICE FLAG
01320  1432  29 04              AND #$04        ;CHECK FOR PRINTER
01321  1434  F0 0D              BEQ SCREN       ;IF NOT BRANCH
01322  1436  A2 04              LDX #$04        ;PRINT FILE #4
01323  1438  20 C9 FF           JSR CHKOUT      ;FILE IS OUTPUT
01324  143B  68                 PLA             ;GET CHAR
01325  143C  48                 PHA             ;RESAVE CHAR
01326  143D  20 D2 FF           JSR CHROUT      ;OUTPUT TO PRINTER
01327  1440  20 CC FF           JSR CLRCHN      ;RESET OUTPUT
01328  1443  AD 19 08    SCREN  LDA DEVICE      ;GET DEVICE FLAG
01329  1446  29 03              AND #$03        ;CHECK FOR SCREEN
01330  1448  F0 05              BEQ PEXIT       ;IF NOT BRANCH
01331  144A  68                 PLA             ;GET CHAR
01332  144B  48                 PHA             ;RESAVE CHAR
01333  144C  20 D2 FF           JSR CHROUT      ;OUTPUT TO SCREEN
01334  144F  68          PEXIT  PLA             ;GET CHAR
01335  1450  60                 RTS             ;RETURN
01336  1451              ;*********************************
01337  1451              ; PRINTER OUTPUT ROUTINES
01338  1451              ;*********************************
01339  1451              ; FINISH OUT PAGE WITH CR
01340  1451              ;*********************************
01341  1451  20 64 14    FINISH JSR CRLFPR      ;PRINT CR
01342  1454  EE 57 08           INC LISTCT      ;INC LINE COUNT
01343  1457  AD 57 08           LDA LISTCT      ;GET COUNT
01344  145A  C9 42              CMP #$42        ;66 LINES
01345  145C  D0 F3              BNE FINISH      ;IF NOT MORE
01346  145E  A9 00              LDA #$00        ;ZERO BYTE
01347  1460  8D 57 08           STA LISTCT      ;RESET COUNT
01348  1463  60                 RTS             ;RETURN






DISASSEMBLER64......PAGE 0029

LINE# LOC   CODE        LINE


01349  1464              ;*********************************
01350  1464              ; PRINT CR TO PRINTER
01351  1464              ;*********************************
01352  1464  A9 04       CRLFPR LDA #$04        ;DEVICE #4
01353  1466  8D 19 08           STA DEVICE      ;SET PRINTER
01354  1469  20 FC 18           JSR CRLF        ;CR
01355  146C  AD 1A 08           LDA OUTPUT      ;GET DEVICE
01356  146F  8D 19 08           STA DEVICE      ;RESET DEVICE
01357  1472  60                 RTS             ;RETURN
01358  1473              ;*********************************
01359  1473              ; START NEWLINE AND CHECK COUNT
01360  1473              ;*********************************
01361  1473  20 64 14    NEXPTR JSR CRLFPR      ;PRINT CR
01362  1476  EE 57 08    NEXLIN INC LISTCT      ;INC LINE COUNT
01363  1479  AD 57 08           LDA LISTCT      ;GET COUNT
01364  147C  C9 3C              CMP #$3C        ;48 LINES
01365  147E  D0 45              BNE LINEOK      ;IF NOT BRANCH
01366  1480  20 51 14           JSR FINISH      ;FINISH PAGE
01367  1483              ;*********************************
01368  1483              ; START NEW PAGE WITH HEADING
01369  1483              ;*********************************
01370  1483  AD 19 08    HEADER LDA DEVICE      ;CHECK DEVICE
01371  1486  29 04              AND #$04        ;PRINTER?
01372  1488  F0 3B              BEQ LINEOK      ;IF NOT EXIT
01373  148A  20 73 14           JSR NEXPTR      ;NEXT LINE
01374  148D  A9 04              LDA #$04        ;DEVICE #4
01375  148F  8D 19 08           STA DEVICE      ;SET DEVICE
01376  1492  A9 34              LDA #<XTITLE    ;HEADER
01377  1494  A0 15              LDY #>XTITLE    ;
01378  1496  20 C4 13           JSR STRPNT      ;PRINT IT
01379  1499              ;*********************************
01380  1499              ; PRINT PAGE COUNT AND HEADER
01381  1499              ;*********************************
01382  1499  AE 55 08           LDX PAGECT
01383  149C  AD 56 08           LDA PAGECT+1
01384  149F  20 D5 13           JSR PRTPAG
01385  14A2  20 73 14           JSR NEXPTR
01386  14A5  20 73 14           JSR NEXPTR
01387  14A8  A9 04              LDA #$04
01388  14AA  8D 19 08           STA DEVICE
01389  14AD  A9 4F              LDA #<LTITLE
01390  14AF  A0 15              LDY #>LTITLE
01391  14B1  20 C4 13           JSR STRPNT
01392  14B4  20 73 14           JSR NEXPTR
01393  14B7              ;*********************************
01394  14B7              ; INC PAGE COUNT
01395  14B7              ;*********************************
01396  14B7  EE 55 08           INC PAGECT
01397  14BA  D0 03              BNE PAGER1
01398  14BC  EE 56 08           INC PAGECT+1
01399  14BF  20 73 14    PAGER1 JSR NEXPTR
01400  14C2  20 73 14           JSR NEXPTR
01401  14C5  60          LINEOK RTS 
01402  14C6              ;*********************************
01403  14C6              ; SYMBOL TABLE ROUTINES






DISASSEMBLER64......PAGE 0030

LINE# LOC   CODE        LINE


01404  14C6              ;*********************************
01405  14C6              ; START NEWLINE AND CHECK COUNT
01406  14C6              ;*********************************
01407  14C6  20 64 14    NEXPTS JSR CRLFPR      ;PRINT CR
01408  14C9  EE 57 08           INC LISTCT      ;INC LINE COUNT
01409  14CC  AD 57 08           LDA LISTCT      ;GET COUNT
01410  14CF  C9 3C              CMP #$3C        ;48 LINES
01411  14D1  D0 1D              BNE HEADOK      ;IF NOT BRANCH
01412  14D3  20 51 14           JSR FINISH      ;FINISH PAGE
01413  14D6              ;*********************************
01414  14D6              ; START NEW PAGE WITH HEADING
01415  14D6              ;*********************************
01416  14D6  20 C6 14    HEADES JSR NEXPTS      ;NEXT LINE
01417  14D9  A9 6C              LDA #<XTITLS    ;HEADER
01418  14DB  A0 15              LDY #>XTITLS    ;
01419  14DD  20 C4 13           JSR STRPNT      ;PRINT IT
01420  14E0  20 C6 14           JSR NEXPTS
01421  14E3  20 C6 14           JSR NEXPTS
01422  14E6  A9 79              LDA #<LTITLS
01423  14E8  A0 15              LDY #>LTITLS
01424  14EA  20 C4 13           JSR STRPNT
01425  14ED  20 C6 14           JSR NEXPTS
01426  14F0  60          HEADOK RTS
01427  14F1              ;*********************************
01428  14F1              ; CHECK FOR NEW PAGE FOR SYMBOL
01429  14F1              ;*********************************
01430  14F1  AD 57 08    HEADSY LDA LISTCT
01431  14F4  C9 35              CMP #$35
01432  14F6  B0 06              BCS HEADFX
01433  14F8  20 C6 14           JSR NEXPTS
01434  14FB  4C C6 14           JMP NEXPTS
01435  14FE  4C 51 14    HEADFX JMP FINISH
01436  1501              ;*********************************
01437  1501              ; SCREEN UTILITES
01438  1501              ;*********************************
01439  1501  AD 19 08    SCROFF LDA DEVICE
01440  1504  29 04              AND #$04
01441  1506  F0 08              BEQ SCRNO1
01442  1508  AD 11 D0           LDA VICREG
01443  150B  29 EF              AND #$EF
01444  150D  8D 11 D0           STA VICREG
01445  1510  60          SCRNO1 RTS
01446  1511              ;*********************************
01447  1511  AD 11 D0    SCRON  LDA VICREG
01448  1514  09 10              ORA #$10
01449  1516  8D 11 D0           STA VICREG
01450  1519  60                 RTS
01451  151A              ;*********************************
01452  151A              ; HEX-TO-ASCII TABLE
01453  151A              ;*********************************
01454  151A  30 31       HEXA   .BYTE '0123456789ABCDEF'
01455  152A              ;*********************************
01456  152A              ; CONSTANTS FOR PRTNUM ROUTINE
01457  152A              ;*********************************
01458  152A  01          CONST0 .BYTE $01,$0A,$64,$E8,$10






DISASSEMBLER64......PAGE 0031

LINE# LOC   CODE        LINE


01458  152B  0A 
01458  152C  64 
01458  152D  E8 
01458  152E  10 
01459  152F  00          CONST1 .BYTE $00,$00,$00,$03,$27
01459  1530  00 
01459  1531  00 
01459  1532  03 
01459  1533  27 
01460  1534              ;*********************************
01461  1534              ; PAGE TITLE
01462  1534              ;*********************************
01463  1534  44 49       XTITLE .BYTE 'DISASSEMBLER64.......PAGE '
01464  154E  00                 .BYTE $00
01465  154F  4C 49       LTITLE .BYTE 'LINE# LOC   CODE        LINE'
01466  156B  00                 .BYTE $00
01467  156C              ;********************************
01468  156C              ; SYMBOL PAGE TITLE
01469  156C              ;********************************
01470  156C  53 59       XTITLS .BYTE 'SYMBOL TABLE',0
01470  1578  00 
01471  1579  53 59       LTITLS .BYTE 'SYMBOL VALUE',0
01471  1585  00 
01472  1586              ;*********************************
01473  1586              ;.FIL 0:MODE.ASM
01474  1586              ;*********************************
01475  1586              ;.END
01476  1586              ;*********************************
01477  1586              ; FILE MODE.ASM
01478  1586              ;*********************************
01479  1586              ;
01480  1586              ;        DISASSEMBLER64
01481  1586              ;    SYMBOLIC DISASSEMBLER
01482  1586              ;       BY DENTON MARLOWE
01483  1586              ;
01484  1586              ;  (C)1986 BY DENTON MARLOWE
01485  1586              ;
01486  1586              ;*********************************
01487  1586              ; ADDRESSING MODE UTILITIES
01488  1586              ;*********************************
01489  1586              ;      DISASSEMBLE ONE LINE
01490  1586              ;*********************************
01491  1586  20 B2 1C    DSLINE JSR DATAOP      ;CHECK FOR DATA
01492  1589  30 3D              BMI BYTT        ;N=1 THEN FOUND
01493  158B              ;*********************************
01494  158B              ; CHECK BIT ZP DECODING OPTIONS
01495  158B              ;*********************************
01496  158B  AD 78 2F           LDA BITFLG      ;CHECK BIT FLAG
01497  158E  F0 0D              BEQ DISL        ;IF ZERO NO BIT
01498  1590                     
01499  1590  20 35 19           JSR GETSL       ;GET BYTE
01500  1593  C9 24              CMP #$24        ;ZEROPAGE BIT
01501  1595  F0 34              BEQ BYZBIT      ;
01502  1597  C9 2C              CMP #$2C        ;ZEROPAGE BIT
01503  1599  F0 55              BEQ BYABIT      ;






DISASSEMBLER64......PAGE 0032

LINE# LOC   CODE        LINE


01504  159B  D0 00              BNE DISL        ;
01505  159D              ;*********************************
01506  159D              ; CHECK BIT ABS DECODING OPTIONS
01507  159D              ;*********************************
01508  159D              
01509  159D              ;********************************
01510  159D              ; PROCESS LINE OF CODE
01511  159D              ;********************************
01512  159D              DISL   = *
01513  159D  20 35 19           JSR GETSL       ;GET BYTE
01514  15A0  AE 12 08           LDX PASS        ;GET PASS COUNT
01515  15A3  EC 15 08           CPX CPASS       ;LAST
01516  15A6  F0 06              BEQ DISL1       ;IF LAST BRANCH
01517  15A8  20 7A 1F           JSR OPERN1      ;IF LAST BRANCH
01518  15AB  4C C8 15           JMP BYTT        ;NEXT INSTRUCTION
01519  15AE              ;********************************
01520  15AE              ; PRINT DISASSEMBLY ADDRESS
01521  15AE              ;********************************
01522  15AE  20 6D 1F    DISL1  JSR PRTASS      ;PRINT LINE DATA
01523  15B1  20 93 18           JSR PRAD        ;PRINT ADDRESS
01524  15B4  20 0E 19           JSR SPACE       ;SPACE OVER
01525  15B7              ;********************************
01526  15B7              ; PRINT INSTRUCTION
01527  15B7              ;********************************
01528  15B7  20 35 19           JSR GETSL       ;GET BYTE
01529  15BA  48                 PHA             ;STORE
01530  15BB  20 4E 1F           JSR MNEMON      ;PRINT MNEMONIC
01531  15BE  20 0E 19           JSR SPACE       ;SPACE OVER
01532  15C1  68                 PLA             ;GET BYTE
01533  15C2  20 82 1F           JSR OPERND      ;PRINT OPERAND
01534  15C5  20 07 13    FINAL  JSR NEWLIN      ;START NEW LINE
01535  15C8  4C 13 19    BYTT   JMP NEXTSL      ;NEXT INSTRUCTION
01536  15CB              ;********************************
01537  15CB              ;      BIT ZP SKIP TRICK
01538  15CB              ;
01539  15CB              ; THE SKIP WILL ALWAYS INVOLVE
01540  15CB              ; A FOLLWING OPCODE THAT IS EITHER
01541  15CB              ; AN OPCODE WITH NO OPERAND OR
01542  15CB              ; OR ONE BYTE OPERAND LIKE A BRANCH
01543  15CB              ; OR ZERO PAGE INSTRUCTION
01544  15CB              ;*********************************
01545  15CB              BYZBIT = *
01546  15CB  AD 78 2F           LDA BITFLG
01547  15CE  29 02              AND #$02
01548  15D0  F0 CB              BEQ DISL
01549  15D2              ;********************************
01550  15D2              ;      TO SKIP OR NOT
01551  15D2              ;*********************************
01552  15D2  20 2C 19           JSR INCSL       ;INC TO OPERAND
01553  15D5  20 35 19           JSR GETSL       ;GET OPERAND
01554  15D8  48                 PHA
01555  15D9  20 4B 19           JSR DECSL
01556  15DC  68                 PLA
01557  15DD                                     ;CHECK FOR SKIP
01558  15DD  C9 10              CMP #$10        ;BPL SKIP






DISASSEMBLER64......PAGE 0033

LINE# LOC   CODE        LINE


01559  15DF  F0 40              BEQ B0000
01560  15E1  C9 18              CMP #$18        ;CLC SKIP
01561  15E3  F0 3C              BEQ B0000
01562  15E5  C9 30              CMP #$30        ;BMI
01563  15E7  F0 38              BEQ B0000
01564  15E9  C9 38              CMP #$38        ;SEC
01565  15EB  F0 34              BEQ B0000
01566  15ED              ;
01567  15ED  4C 9D 15           JMP DISL
01568  15F0              ;********************************
01569  15F0              ;      BIT ABS SKIP TRICK
01570  15F0              ;*********************************
01571  15F0              BYABIT = *
01572  15F0  AD 78 2F           LDA BITFLG
01573  15F3  29 01              AND #$01
01574  15F5  F0 A6              BEQ DISL
01575  15F7              ;********************************
01576  15F7              ;      TO SKIP OR NOT
01577  15F7              ;*********************************
01578  15F7  20 2C 19           JSR INCSL       ;INC TO OPERAND
01579  15FA  20 35 19           JSR GETSL       ;GET OPERAND
01580  15FD  48                 PHA
01581  15FE  20 4B 19           JSR DECSL
01582  1601  68                 PLA
01583  1602                                     ;CHECK FOR SKIP
01584  1602  C9 A1              CMP #$A1        ;LDY A IMMEDIATE SKIP
01585  1604  F0 1B              BEQ B0000
01586  1606  C9 A2              CMP #$A2        ;LDA A IMMEDIATE SKIP
01587  1608  F0 17              BEQ B0000
01588  160A  C9 A9              CMP #$A9        ;LDX A IMMEDIATE SKIP
01589  160C  F0 13              BEQ B0000
01590  160E                     
01591  160E  C9 65              CMP #$65        ;ADC ZP
01592  1610  F0 0F              BEQ B0000
01593  1612                     
01594  1612  C9 85              CMP #$85        ;STA ZP
01595  1614  F0 0B              BEQ B0000
01596  1616                     
01597  1616  C9 B1              CMP #$B1        ;LDA (ZP),Y
01598  1618  F0 07              BEQ B0000
01599  161A                     
01600  161A  C9 E6              CMP #$E6        ;INC
01601  161C  F0 03              BEQ B0000
01602  161E              ;
01603  161E  4C 9D 15           JMP DISL
01604  1621              ;********************************
01605  1621              ;      PRINTING PASS?
01606  1621              ;*********************************
01607  1621              B0000  = *
01608  1621  AD 12 08           LDA PASS        ;GET PASS COUNT
01609  1624  CD 15 08           CMP CPASS       ;LAST
01610  1627  D0 9F              BNE BYTT        ;IF NOT NEXT BYTE
01611  1629              ;*********************************
01612  1629              ;  PRINT LINE DATA FOR .BYTE
01613  1629              ;*********************************






DISASSEMBLER64......PAGE 0034

LINE# LOC   CODE        LINE


01614  1629  20 6A 18           JSR COMENT      ;COMENT LINE
01615  162C              ;
01616  162C  20 0E 1A           JSR PRTDAT      ;PRINT LINE DATA
01617  162F  20 9B 19           JSR PRTONE      ;ONE BYTE
01618  1632  20 93 18           JSR PRAD        ;PRINT ADDRESS
01619  1635  20 0E 19           JSR SPACE       ;SPACE OVER
01620  1638  A9 64              LDA #<MSGBIT    ;.BYTE $
01621  163A  A0 19              LDY #>MSGBIT    ;
01622  163C  20 C4 13           JSR STRPNT      ;PRINT IT
01623  163F              ;
01624  163F  20 35 19           JSR GETSL       ;GET BYTE
01625  1642  20 AE 13           JSR PRBYT       ;PRINT BYTE
01626  1645              ;
01627  1645  A9 6C              LDA #<MSGBZP    ;BIT COMMENT
01628  1647  A0 19              LDY #>MSGBZP    ;
01629  1649  20 C4 13           JSR STRPNT      ;PRINT IT
01630  164C              ;
01631  164C  20 07 13           JSR NEWLIN      ;PRINT BYTE
01632  164F                                     ;JSR INCSL    ;INC SELECT
01633  164F  20 70 18           JSR COMET       ;COMENT LINE
01634  1652                                     ;JSR DECSL    ;REASET SELE
CT
01635  1652  4C C5 15           JMP FINAL       ;CR AND NEXT BYTE
01636  1655              ;*********************************
01637  1655              ;BYTEXT JMP DISL1
01638  1655              ;*********************************
01639  1655              ; ADDRESSING MODE UTILITIES
01640  1655              ;*********************************
01641  1655              ;
01642  1655              ;*********************************
01643  1655              ; ANALYSIS OPERAND ROUTINES
01644  1655              ;*********************************
01645  1655              ;    BIT ZP ONE-BYTE OPERAND
01646  1655              ; ZERO PAGE BIT IS ALMOST ALWAYS
01647  1655              ;   A BIT TRICK TO SKIP THE NEXT
01648  1655              ;          OPCODE
01649  1655              ;********************************
01650  1655  EA          ONEBIT NOP
01651  1656              ;*********************************
01652  1656              ;      ONE-BYTE OPERAND
01653  1656              ;********************************
01654  1656  20 2C 19    ONEBYT JSR INCSL       ;INC TO BYTE
01655  1659  20 35 19           JSR GETSL       ;GET BYTE
01656  165C  8D 45 08           STA WORKED      ;STORE OPERAND
01657  165F  A9 00              LDA #$00        ;ZERO BYTE
01658  1661  8D 46 08           STA WORKED+1    ;ZERO HIGH BYTE
01659  1664  AD 12 08           LDA PASS        ;GET PASS COUNT
01660  1667  CD 13 08           CMP IPASS       ;INTERNAL
01661  166A  F0 54              BEQ OPCPUT      ;TABLE OPERAND
01662  166C  CD 14 08           CMP EPASS       ;EXTERNAL
01663  166F  F0 52              BEQ OPCSYM      ;EXTERNAL EQUATE
01664  1671              ;*********************************
01665  1671              ; OUTPUT OPERAND
01666  1671              ;*********************************
01667  1671  20 65 23           JSR SYMOP       ;CHECK FOR SYMBOL
01668  1674  B0 50              BCS TWOB        ;SYMBOL FOUND






DISASSEMBLER64......PAGE 0035

LINE# LOC   CODE        LINE


01669  1676  20 45 1A           JSR RANGE       ;IS IT INTERNAL
01670  1679  90 06              BCC ONEBY       ;GENERATE LABEL
01671  167B  20 D9 18           JSR DOLLAR      ;EXTERNAL
01672  167E  4C 84 16           JMP ONEBX       ;PRINT ADDRESS
01673  1681  20 89 18    ONEBY  JSR PRLA        ;PRINT XX
01674  1684  AD 45 08    ONEBX  LDA WORKED      ;GET OPERAND
01675  1687  4C AE 13           JMP PRBYT       ;PRINT BYTE
01676  168A              ;********************************
01677  168A              ;      BIT ABS TWO-BYTE OPERAND
01678  168A              ;********************************
01679  168A  EA          TWOBIT NOP
01680  168B              ;********************************
01681  168B              ;      TWO-BYTE OPERAND
01682  168B              ;********************************
01683  168B  20 2C 19    TWOBYT JSR INCSL       ;INC TO BYTE
01684  168E  20 35 19           JSR GETSL       ;GET BYTE
01685  1691  8D 45 08           STA WORKED      ;STORE LOW BYTE
01686  1694  20 2C 19           JSR INCSL       ;INC TO BYTE
01687  1697  20 35 19           JSR GETSL       ;GET BYTE
01688  169A  8D 46 08           STA WORKED+1    ;STORE HIGH BYTE
01689  169D  AD 12 08           LDA PASS        ;GET PASS COUNT
01690  16A0  CD 13 08           CMP IPASS       ;INTERNAL
01691  16A3  F0 1B              BEQ OPCPUT      ;TABLE OPERNAD
01692  16A5  CD 14 08           CMP EPASS       ;EXTERNAL
01693  16A8  F0 19              BEQ OPCSYM      ;EXTERNAL EQUATE
01694  16AA              ;********************************
01695  16AA              ;  OUTPUT OPERAND
01696  16AA              ;********************************
01697  16AA  20 65 23           JSR SYMOP       ;CHECK SYMBOL
01698  16AD  B0 17              BCS TWOB        ;C=1 FOUND ONE
01699  16AF  20 45 1A           JSR RANGE       ;IS IT INTERNAL
01700  16B2  90 06              BCC TWOBY       ;GERNERATE LABEL
01701  16B4  20 D9 18           JSR DOLLAR      ;EXTERNAL
01702  16B7  4C BD 16           JMP TWOBX       ;
01703  16BA              ;********************************
01704  16BA              ;  OUTPUT OPERAND
01705  16BA              ;********************************
01706  16BA              TWOBY  =*
01707  16BA  20 89 18           JSR PRLA        ;PRINT XX
01708  16BD              TWOBX  = *
01709  16BD  4C CB 18           JMP PWORKD      ;PRINT ADDRESS
01710  16C0              OPCPUT = *
01711  16C0  4C BC 1A           JMP PUTI        ;PUT IN TABLE
01712  16C3              OPCSYM = *
01713  16C3  4C 65 23           JMP SYMOP       ;CHECK EXT EQUATE
01714  16C6              TWOB   = *
01715  16C6  60                 RTS             ;RETURN
01716  16C7              ;*********************************
01717  16C7              ; ILLEGAL MODES, UNUSED OPCODES
01718  16C7              ;
01719  16C7              ; ZZZZ XX .BYTE $XX ;'Y' ;??? ILLEGAL OPCODE
01720  16C7              ;
01721  16C7              ;*********************************
01722  16C7  EE 5A 08    ILLEGL INC ERRCT       ;INC ERROR COUNT
01723  16CA  D0 03              BNE *+5         ;SKIP NEXT LINE






DISASSEMBLER64......PAGE 0036

LINE# LOC   CODE        LINE


01724  16CC  EE 5B 08           INC ERRCT+1     ;INC ERROR COUNT
01725  16CF  A0 1F              LDY #>MBYTE     ;.BYTE
01726  16D1  A9 35              LDA #<MBYTE     ;
01727  16D3  20 C4 13           JSR STRPNT      ;PRINT STRING
01728  16D6  20 D9 18           JSR DOLLAR      ;PRINT $
01729  16D9  20 35 19           JSR GETSL       ;GET ILLEGAL BYTE
01730  16DC                     
01731  16DC              ;BEGIN REV 2017-3
01732  16DC  48                 PHA             ;PUT BYTE ON STACK
01733  16DD              ;
01734  16DD  20 AE 13           JSR PRBYT       ;PRINT IT
01735  16E0  20 0E 19           JSR SPACE       ;SPACE OVER
01736  16E3              ;
01737  16E3  68                 PLA             ;POP BYTE OFF STACK
01738  16E4  20 3D 1E           JSR CASCII      ;IS IT PRINTABLE ASCII
01739  16E7  B0 18              BCS ISKIP       ;IF NOT EXIT
01740  16E9  48                 PHA             ;STACK IT
01741  16EA  20 0E 19           JSR SPACE       ;SPACE OVER
01742  16ED  20 D4 18           JSR SEMIC       ;COMMENT
01743  16F0  A9 27              LDA #'''        ;QUOTE
01744  16F2  20 1A 14           JSR PCHAR       ;PRINT IT
01745  16F5  68                 PLA             ;POP IT
01746  16F6  20 1A 14           JSR PCHAR       ;PRINT IT
01747  16F9  A9 27              LDA #'''        ;QUOTE
01748  16FB  20 1A 14           JSR PCHAR       ;PRINT IT
01749  16FE  20 0E 19           JSR SPACE       ;SPACE OVER
01750  1701              ;
01751  1701              ISKIP  = *
01752  1701              ;END REV 2017-3
01753  1701  A0 19              LDY #>ILLMSG
01754  1703  A9 87              LDA #<ILLMSG
01755  1705  4C C4 13           JMP STRPNT
01756  1708              ;********************************
01757  1708              ;      ACCUMULATOR MODE
01758  1708              ;********************************
01759  1708  A9 41       ACC    LDA #'A'        ;ASCII A
01760  170A  4C 1A 14           JMP PCHAR       ;PRINT IT
01761  170D              ;********************************
01762  170D              ;       IMMEDIATE MODE
01763  170D              ;********************************
01764  170D  20 2C 19    IMMEDT JSR INCSL       ;INC TO DATA BYTE
01765  1710  AE 12 08           LDX PASS        ;GET PASS
01766  1713  EC 15 08           CPX CPASS       ;LAST PASS
01767  1716  D0 2A              BNE IMEXIT      ;EXIT
01768  1718  A9 23              LDA #'#'        ;ASCII #
01769  171A  20 1A 14           JSR PCHAR       ;PRINT IT
01770  171D  20 D9 18           JSR DOLLAR      ;PRINT $
01771  1720  20 35 19           JSR GETSL       ;GET BYTE
01772  1723  48                 PHA             ;STACK IT
01773  1724  20 AE 13           JSR PRBYT       ;PRINT IT
01774  1727  68                 PLA             ;POP IT
01775  1728  20 3D 1E           JSR CASCII      ;PRINTABLE ASCII
01776  172B  B0 15              BCS IMEXIT      ;IF NOT EXIT
01777  172D  48                 PHA             ;STACK IT
01778  172E  20 01 19           JSR SPAC6       ;SPACE OVER






DISASSEMBLER64......PAGE 0037

LINE# LOC   CODE        LINE


01779  1731  20 D4 18           JSR SEMIC       ;COMMENT
01780  1734  A9 27              LDA #'''        ;QUOTE
01781  1736  20 1A 14           JSR PCHAR       ;PRINT IT
01782  1739  68                 PLA             ;POP IT
01783  173A  20 1A 14           JSR PCHAR       ;PRINT IT
01784  173D  A9 27              LDA #'''        ;QUOTE
01785  173F  20 1A 14           JSR PCHAR       ;PRINT IT
01786  1742  60          IMEXIT RTS             ;EXIT
01787  1743              ;*********************************
01788  1743              ;      BIT ZERO PAGE MODE
01789  1743              ;*********************************
01790  1743  EA          ZERBIT NOP
01791  1744              ;*********************************
01792  1744              ;      ZERO PAGE MODE
01793  1744              ;*********************************
01794  1744  4C 56 16    ZEROPG JMP ONEBYT      ;PRINT ONE BYTE
01795  1747              ;*********************************
01796  1747              ;      ZERO PAGE,X MODE
01797  1747              ;********************************
01798  1747  20 56 16    ZEROX  JSR ONEBYT      ;PRINT ONE BYTE
01799  174A  4C E8 18           JMP XINDEX      ;PRINT ,X
01800  174D              ;********************************
01801  174D              ;       ZERO PAGE,Y MODE
01802  174D              ;********************************
01803  174D  20 56 16    ZEROY  JSR ONEBYT      ;PRINT ONE BYTE
01804  1750  4C F2 18           JMP YINDEX      ;PRINT ,Y
01805  1753              ;*********************************
01806  1753              ;         BIT ABSOLUTE MODE
01807  1753              ;*********************************
01808  1753  EA          ABSBIT NOP
01809  1754              ;*********************************
01810  1754              ;         ABSOLUTE MODE
01811  1754              ;*********************************
01812  1754  20 8B 16    ABSLUT JSR TWOBYT      ;PRINT TWO BYTE
01813  1757  20 4B 19           JSR DECSL       ;DEC TO SECOND
01814  175A  20 4B 19           JSR DECSL       ;DEC TO OPCODE
01815  175D  20 35 19           JSR GETSL       ;GET BYTE
01816  1760  48                 PHA
01817  1761  20 2C 19           JSR INCSL
01818  1764  20 2C 19           JSR INCSL
01819  1767  68                 PLA
01820  1768  C9 4C              CMP #$4C        ;IS IT JMP
01821  176A  D0 0C              BNE ABSEXT      ;IF NOT EXIT
01822  176C  20 07 13           JSR NEWLIN      ;NEXT LINE
01823  176F  20 2C 19           JSR INCSL
01824  1772  20 70 18           JSR COMET       ;COMMENT LINE
01825  1775  20 4B 19           JSR DECSL
01826  1778  60          ABSEXT RTS             ;RETURN
01827  1779              ;*********************************
01828  1779              ;       ABSOLUTE,X MODE
01829  1779              ;********************************
01830  1779  20 8B 16    ABSX   JSR TWOBYT      ;PRINT TWO BYTE
01831  177C  4C E8 18           JMP XINDEX      ;PRINT ,X
01832  177F              ;********************************
01833  177F              ;       ABSOLUTE,Y MODE






DISASSEMBLER64......PAGE 0038

LINE# LOC   CODE        LINE


01834  177F              ;********************************
01835  177F  20 8B 16    ABSY   JSR TWOBYT      ;PRINT TWO BYTE
01836  1782  4C F2 18           JMP YINDEX      ;PRINT ,Y
01837  1785              ;********************************
01838  1785              ;       IMPLIED MODE
01839  1785              ;********************************
01840  1785  20 35 19    IMPLID JSR GETSL       ;GET BYTE
01841  1788  F0 09              BEQ IMPLI1      ;BRK
01842  178A  C9 60              CMP #$60        ;CHECK CODE
01843  178C  F0 05              BEQ IMPLI1      ;RTS
01844  178E  C9 40              CMP #$40        ;CHECK CODE
01845  1790  F0 01              BEQ IMPLI1      ;RTI
01846  1792  60          IMPONE RTS             ;RETURN
01847  1793  20 07 13    IMPLI1 JSR NEWLIN      ;PRINT NEW LINE
01848  1796  20 2C 19           JSR INCSL
01849  1799  20 70 18           JSR COMET       ;COMMENT LINE
01850  179C  4C 4B 19           JMP DECSL
01851  179F              ;********************************
01852  179F              ;       INDIRECT MODE
01853  179F              ;********************************
01854  179F  20 DE 18    INDRCT JSR LPAREN      ;PRINT (
01855  17A2  20 8B 16           JSR TWOBYT      ;PRINT TWO BYTE
01856  17A5  20 E3 18           JSR RPAREN      ;PRINT )
01857  17A8  20 07 13           JSR NEWLIN      ;NEXT LINE
01858  17AB  20 2C 19           JSR INCSL
01859  17AE  20 70 18           JSR COMET       ;COMMENT LINE
01860  17B1  4C 4B 19           JMP DECSL
01861  17B4              ;********************************
01862  17B4              ;     INDIRECT,X MODE
01863  17B4              ;********************************
01864  17B4  20 DE 18    INDX   JSR LPAREN      ;PRINT (
01865  17B7  20 47 17           JSR ZEROX       ;PRINT $HH,X
01866  17BA  4C E3 18           JMP RPAREN      ;PRINT )
01867  17BD              ;********************************
01868  17BD              ;     INDIRECT,Y MODE
01869  17BD              ;********************************
01870  17BD  20 DE 18    INDY   JSR LPAREN      ;PRINT (
01871  17C0  20 56 16           JSR ONEBYT      ;PRINT ONE BYTE
01872  17C3  20 E3 18           JSR RPAREN      ;PRINT )
01873  17C6  4C F2 18           JMP YINDEX      ;PRINT ,Y
01874  17C9              ;*********************************
01875  17C9              ;      RELATIVE MODE
01876  17C9              ;*********************************
01877  17C9  20 2C 19    RELATV JSR INCSL       ;INC BYTE POINTER
01878  17CC  AD 12 08           LDA PASS        ;GET PASS COUNT
01879  17CF  CD 14 08           CMP EPASS       ;EXTERNAL
01880  17D2  F0 44              BEQ RELSYM      ;EXIT ON EXTERNAL
01881  17D4              ;
01882  17D4  AD 22 08           LDA SELECT      ;GET LOW POINTER
01883  17D7  8D 45 08           STA WORKED      ;STORE TEMP
01884  17DA  AD 23 08           LDA SELECT+1    ;GET HIGH POINTER
01885  17DD  8D 46 08           STA WORKED+1    ;STORE TEMP
01886  17E0  EE 45 08           INC WORKED      ;ADD 1 TO ADDRESS
01887  17E3  D0 03              BNE *+5         ;ZERO MEANS CARRY
01888  17E5  EE 46 08           INC WORKED+1    ;INC HIGH ADDRESS






DISASSEMBLER64......PAGE 0039

LINE# LOC   CODE        LINE


01889  17E8              ;
01890  17E8  20 35 19           JSR GETSL       ;GET BYTE BRANCH OFFSET
01891  17EB  C9 00              CMP #$00        ;IS IT ZERO
01892  17ED  10 03              BPL FORWRD      ;IF SO BRANCH
01893  17EF  CE 46 08           DEC WORKED+1    ;DEC HIGH POINTER
01894  17F2  18          FORWRD CLC             ;CLEAR CARRY FLAG
01895  17F3  6D 45 08           ADC WORKED      ;ADD IN OPERAND
01896  17F6  90 03              BCC RELND       ;TO SELECT ADDRES
01897  17F8  EE 46 08           INC WORKED+1    ;AND NOW POINTS
01898  17FB  8D 45 08    RELND  STA WORKED      ;TARGET ADDRESS
01899  17FE              ;
01900  17FE  AD 12 08           LDA PASS        ;GET PASS COUNT
01901  1801  CD 13 08           CMP IPASS       ;INTERNAL
01902  1804  F0 0F              BEQ RELPUT      ;ADDRESS TABLE
01903  1806              ;
01904  1806  20 65 23           JSR SYMOP       ;CHECK FOR SYMBOL
01905  1809  B0 0D              BCS RELSYM      ;C=1 SYMBOL
01906  180B              ;
01907  180B  AD 18 08           LDA ROPT        ;CHECK OPTION
01908  180E  C9 01              CMP #$01        ;REL TO * ?
01909  1810  F0 07              BEQ RELPC       ;IF SO DO IT
01910  1812              ;
01911  1812  4C C8 18           JMP PWORK       ;PRINT ADDRESS
01912  1815              ;
01913  1815              RELPUT = *
01914  1815  4C BC 1A           JMP PUTI        ;PUT IN TABLE
01915  1818              ;
01916  1818  60          RELSYM RTS             ;RETURN
01917  1819              ;*********************************
01918  1819              ; PRINT RELATIVE TO PC
01919  1819              ;*********************************
01920  1819  20 35 19    RELPC  JSR GETSL       ;GET BRANCH DATA
01921  181C  48                 PHA             ;SAVE ON STACK
01922  181D  30 07              BMI RELNEG      ;BACKWARD ?
01923  181F  A9 7A              LDA #<POSREL
01924  1821  A0 19              LDY #>POSREL
01925  1823  4C 2A 18           JMP RELPM
01926  1826  A9 7E       RELNEG LDA #<NEGREL
01927  1828  A0 19              LDY #>NEGREL
01928  182A  20 C4 13    RELPM  JSR STRPNT
01929  182D  68                 PLA             ;GET BRANCH DATA
01930  182E  18                 CLC             ;CLEAR CARRY
01931  182F  69 02              ADC #$02        ;ADD 2 FOR BRANCH
01932  1831  10 05              BPL RELP        ;FORWARD ?
01933  1833  18                 CLC             ;CLEAR CARRY
01934  1834  49 FF              EOR #$FF        ;COMPLMENT
01935  1836  69 01              ADC #$01        ;ADD 1 FOR 2'S
01936  1838  20 AE 13    RELP   JSR PRBYT       ;PRINT BRANCH
01937  183B  20 01 19           JSR SPAC6       ;SPACE
01938  183E  20 D4 18           JSR SEMIC       ;COMMENT CHAR
01939  1841  4C C8 18           JMP PWORK       ;PRINT ADDRESS
01940  1844              ;*********************************
01941  1844              ;  ORGIN LABEL
01942  1844              ;*********************************
01943  1844  20 32 1A    ORGIN  JSR PRTOTH      ;PRINT LINE DATA






DISASSEMBLER64......PAGE 0040

LINE# LOC   CODE        LINE


01944  1847  A9 2A              LDA #'*'        ;PC
01945  1849  20 1A 14           JSR PCHAR       ;PRINT IT
01946  184C  A9 3D              LDA #'='        ;EQUALS
01947  184E  20 1A 14           JSR PCHAR       ;PRINT IT
01948  1851  20 D9 18           JSR DOLLAR      ;ASCII $
01949  1854  20 BF 18           JSR PSELEC      ;PRINT ADDRESS
01950  1857  4C 07 13           JMP NEWLIN      ;START NEWLINE
01951  185A              ;*********************************
01952  185A              ; END OF FILE LABLE
01953  185A              ;*********************************
01954  185A  20 6A 18    EFILE  JSR COMENT      ;COMMENT LINE
01955  185D  20 32 1A           JSR PRTOTH      ;PRINT LINE DATA
01956  1860  A9 82              LDA #<MSGEND    ;END MESSAGE
01957  1862  A0 19              LDY #>MSGEND
01958  1864  20 C4 13           JSR STRPNT      ;PRINT IT
01959  1867  4C 07 13           JMP NEWLIN      ;NEW LINE
01960  186A              ;*********************************
01961  186A              ; PRINT COMMENT LINE
01962  186A              ;*********************************
01963  186A  20 70 18    COMENT JSR COMET       ;PRINT COMMENT
01964  186D  4C 07 13           JMP NEWLIN      ;NEXT LINE
01965  1870              ;*********************************
01966  1870  20 32 1A    COMET  JSR PRTOTH      ;PRINT LINE DATA
01967  1873  20 D4 18           JSR SEMIC       ;PRINT COMMENT
01968  1876  AD 1C 08           LDA FOROPT
01969  1879  D0 03              BNE CSHORT
01970  187B  A0 20              LDY #$20        ;COUNTER
01971  187D  2C                 .BYTE $2C
01972  187E  A0 10       CSHORT LDY #$10
01973  1880  A9 2A       COMPT  LDA #'*'        ;STAR
01974  1882  20 1A 14           JSR PCHAR       ;PRINT CHAR
01975  1885  88                 DEY             ;DEC COUNTER
01976  1886  D0 F8              BNE COMPT       ;20 OR 10 STARS
01977  1888  60                 RTS             ;RETURN
01978  1889              ;*********************************
01979  1889              ;     PRINT SELECTED ADDRESS
01980  1889              ;*********************************
01981  1889  A9 58       PRLA   LDA #'X'        ;XX LABEL
01982  188B  20 1A 14           JSR PCHAR       ;
01983  188E  A9 58              LDA #'X'        ;
01984  1890  4C 1A 14           JMP PCHAR       ;
01985  1893              ;*********************************
01986  1893              ; PRINT CODE ADDRESS
01987  1893              ;*********************************
01988  1893  20 51 23    PRAD   JSR SYM         ;CHECK FOR SYMBOLIC
01989  1896  B0 1F              BCS NPRAD1      ;C=1 SYMBOLIC LABEL
01990  1898  AD 17 08           LDA XOPT        ;CHECK GENERATION
01991  189B  F0 10              BEQ P1          ;NO LABELS
01992  189D  20 1B 1B           JSR INTCHA      ;IS ADDRESS IN TAB
01993  18A0  B0 0B              BCS P1          ;C=1 YES
01994  18A2  AD 1C 08           LDA FOROPT      ;CHECK FORMAT
01995  18A5  F0 03              BEQ POVER       ;STD FORMAT
01996  18A7  4C 0E 19           JMP SPACE       ;ONE SPACE
01997  18AA  4C 01 19    POVER  JMP SPAC6       ;SPACE OVER
01998  18AD              ;*********************************






DISASSEMBLER64......PAGE 0041

LINE# LOC   CODE        LINE


01999  18AD              ; PRINT ADDRESS AS LABEL
02000  18AD              ;*********************************
02001  18AD  20 89 18    P1     JSR PRLA        ;PRINT XX
02002  18B0  20 BF 18           JSR PSELEC      ;PRINT ADDRESS
02003  18B3  EA                 NOP
02004  18B4  EA                 NOP
02005  18B5  EA                 NOP
02006  18B6  60          NPRAD  RTS             ;RETURN
02007  18B7              ;*********************************
02008  18B7  AD 1C 08    NPRAD1 LDA FOROPT
02009  18BA  D0 FA              BNE NPRAD
02010  18BC  4C 02 24           JMP FIXSYM
02011  18BF              ;*********************************
02012  18BF              ; PRINT SELECT ADDRESS
02013  18BF              ;*********************************
02014  18BF  AD 22 08    PSELEC LDA SELECT      ;LOW BYTE
02015  18C2  AC 23 08           LDY SELECT+1    ;HIGH BYTE
02016  18C5  4C A8 13           JMP PRBYTS      ;PRINT THEM
02017  18C8              ;*********************************
02018  18C8              ; PRINT WORKED ADDRESS WITH XX
02019  18C8              ;*********************************
02020  18C8  20 89 18    PWORK  JSR PRLA        ;PRINT XX
02021  18CB              ;*********************************
02022  18CB              ; PRINT WORKED ADDRESS
02023  18CB              ;*********************************
02024  18CB  AD 45 08    PWORKD LDA WORKED      ;LOW BYTE
02025  18CE  AC 46 08           LDY WORKED+1    ;HIGH BYTE
02026  18D1  4C A8 13           JMP PRBYTS      ;PRINT THEM
02027  18D4              ;********************************
02028  18D4              ; PRINT SEMICOLON FOR COMMENT
02029  18D4              ;********************************
02030  18D4  A9 3B       SEMIC  LDA #';'
02031  18D6  4C 1A 14           JMP PCHAR
02032  18D9              ;********************************
02033  18D9              ; PRINT DOLLAR SIGN FOR HEX
02034  18D9              ;********************************
02035  18D9  A9 24       DOLLAR LDA #'$'
02036  18DB  4C 1A 14           JMP PCHAR
02037  18DE              ;********************************
02038  18DE              ; PRINT LEFT PARENTTHESES
02039  18DE              ;********************************
02040  18DE  A9 28       LPAREN LDA #'('
02041  18E0  4C 1A 14           JMP PCHAR
02042  18E3              ;********************************
02043  18E3              ; PRINT RIGHT PARENTTHESES
02044  18E3              ;********************************
02045  18E3  A9 29       RPAREN LDA #')'
02046  18E5  4C 1A 14           JMP PCHAR
02047  18E8              ;********************************
02048  18E8              ; PRINT A COMMA AND AN "X"
02049  18E8              ;********************************
02050  18E8  A9 2C       XINDEX LDA #','
02051  18EA  20 1A 14           JSR PCHAR
02052  18ED  A9 58              LDA #'X'
02053  18EF  4C 1A 14           JMP PCHAR






DISASSEMBLER64......PAGE 0042

LINE# LOC   CODE        LINE


02054  18F2              ;********************************
02055  18F2              ; PRINT A COMMA AND A "Y"
02056  18F2              ;********************************
02057  18F2  A9 2C       YINDEX LDA #','
02058  18F4  20 1A 14           JSR PCHAR
02059  18F7  A9 59              LDA #'Y'
02060  18F9  4C 1A 14           JMP PCHAR
02061  18FC              ;********************************
02062  18FC              ; PRINT CARRAIGE RETURN
02063  18FC              ;*********************************
02064  18FC  A9 0D       CRLF   LDA #$0D        ;ASCII CR
02065  18FE  4C 1A 14           JMP PCHAR       ;PRINT
02066  1901              ;*********************************
02067  1901              ; PRINT SIX SPACES
02068  1901              ;*********************************
02069  1901  A9 05       SPAC6  LDA #$05
02070  1903  8D 51 08    SPACM  STA TEMP
02071  1906  20 0E 19    SPAC   JSR SPACE
02072  1909  CE 51 08           DEC TEMP
02073  190C  D0 F8              BNE SPAC
02074  190E              ;*********************************
02075  190E              ; PRINT SPACE
02076  190E              ;*********************************
02077  190E  A9 20       SPACE  LDA #$20        ;ASCII SPACE
02078  1910  4C 1A 14           JMP PCHAR       ;PRINT
02079  1913              ;*********************************
02080  1913              ; SELECT NEXT BYTE
02081  1913              ;*********************************
02082  1913  AD 23 08    NEXTSL LDA SELECT+1
02083  1916  CD 21 08           CMP EA+1
02084  1919  90 0A              BCC SLOK
02085  191B  D0 0D              BNE NOINC
02086  191D  AD 22 08           LDA SELECT
02087  1920  CD 20 08           CMP EA
02088  1923  B0 05              BCS NOINC
02089  1925  20 2C 19    SLOK   JSR INCSL
02090  1928  18                 CLC
02091  1929  60                 RTS
02092  192A  38          NOINC  SEC
02093  192B  60                 RTS
02094  192C              ;*********************************
02095  192C              ; INC SELECTED BYTE
02096  192C              ;*********************************
02097  192C  EE 22 08    INCSL  INC SELECT
02098  192F  D0 03              BNE *+5
02099  1931  EE 23 08           INC SELECT+1
02100  1934  60                 RTS
02101  1935              ;*********************************
02102  1935              ; GET SELECTED BYTE
02103  1935              ;*********************************
02104  1935  18          GETSL  CLC
02105  1936  AD 22 08           LDA SELECT
02106  1939  6D 24 08           ADC OFFSET
02107  193C  85 02              STA ZEROUR
02108  193E  AD 23 08           LDA SELECT+1






DISASSEMBLER64......PAGE 0043

LINE# LOC   CODE        LINE


02109  1941  6D 25 08           ADC OFFSET+1
02110  1944  85 03              STA ZEROUR+1
02111  1946  A0 00              LDY #$00
02112  1948  B1 02              LDA (ZEROUR),Y
02113  194A  60                 RTS
02114  194B              ;*********************************
02115  194B              ; DEC SLECTED BYTE
02116  194B              ;*********************************
02117  194B  AD 22 08    DECSL  LDA SELECT
02118  194E  D0 03              BNE *+5
02119  1950  CE 23 08           DEC SELECT+1
02120  1953  CE 22 08           DEC SELECT
02121  1956  60                 RTS
02122  1957              ;*********************************
02123  1957              ; INITIALIZE SELECT
02124  1957              ;*********************************
02125  1957  AD 1E 08    INTSA  LDA SA
02126  195A  8D 22 08           STA SELECT
02127  195D  AD 1F 08           LDA SA+1
02128  1960  8D 23 08           STA SELECT+1
02129  1963  60                 RTS
02130  1964              ;*********************************
02131  1964              ; ASCII STRING DATA
02132  1964              ;*********************************
02133  1964  2E 42       MSGBIT .BYTE '.BYTE $',0
02133  196B  00 
02134  196C  20 3B       MSGBZP .BYTE '         ;BIT ZP SKIP',0
02134  1979  00 
02135  197A  2A 2B 24    POSREL .BYTE '*+$',0
02135  197D  00 
02136  197E  2A 2D 24    NEGREL .BYTE '*-$',0
02136  1981  00 
02137  1982  2E 45       MSGEND .BYTE '.END',0
02137  1986  00 
02138  1987  3B 3F       ILLMSG .BYTE ';??? ILLEGAL OPCODE',0
02138  199A  00 
02139  199B              ;*********************************
02140  199B              ; PRINT ONE BYTE OPCODE DATA
02141  199B              ;*********************************
02142  199B  20 35 19    PRTONE JSR GETSL       ;GET BYTE
02143  199E  20 AE 13           JSR PRBYT       ;PRINT BYTE
02144  19A1  AD 1C 08           LDA FOROPT
02145  19A4  F0 03              BEQ PRTON1
02146  19A6  A9 07              LDA #$07
02147  19A8  2C                 .BYTE $2C
02148  19A9  A9 09       PRTON1 LDA #$09        ;10 SPACES
02149  19AB  20 03 19           JSR SPACM       ;
02150  19AE  4C 07 1A           JMP PRTEST      ;RESET I/O DEVICE
02151  19B1              ;*********************************
02152  19B1              ; PRINT TWO BYTE OPCODE DATA
02153  19B1              ;*********************************
02154  19B1  20 35 19    PRTTWO JSR GETSL       ;GET BYTE
02155  19B4  20 AE 13           JSR PRBYT       ;PRINT BYTE
02156  19B7  20 0E 19           JSR SPACE       ;
02157  19BA  20 2C 19           JSR INCSL       ;INC TO OPERAND






DISASSEMBLER64......PAGE 0044

LINE# LOC   CODE        LINE


02158  19BD  20 35 19           JSR GETSL       ;GET BYTE
02159  19C0  20 AE 13           JSR PRBYT       ;PRINT IT
02160  19C3  AD 1C 08           LDA FOROPT
02161  19C6  F0 03              BEQ PRTTW1
02162  19C8  A9 04              LDA #$04
02163  19CA  2C                 .BYTE $2C
02164  19CB  A9 06       PRTTW1 LDA #$06        ;7 SPACES
02165  19CD  20 03 19           JSR SPACM       ;
02166  19D0  20 4B 19           JSR DECSL       ;RESET POINTER
02167  19D3  4C 07 1A           JMP PRTEST      ;RESET I/O DEVICE
02168  19D6              ;*********************************
02169  19D6              ; PRINT THREE BYTE OPCODE DATA
02170  19D6              ;*********************************
02171  19D6  20 35 19    PRTTHE JSR GETSL       ;GET BYTE
02172  19D9  20 AE 13           JSR PRBYT       ;PRINT BYTE
02173  19DC  20 0E 19           JSR SPACE       ;
02174  19DF  20 2C 19           JSR INCSL       ;INC TO OPERAND
02175  19E2  20 35 19           JSR GETSL       ;GET BYTE
02176  19E5  20 AE 13           JSR PRBYT       ;PRINT IT
02177  19E8  20 0E 19           JSR SPACE       ;
02178  19EB  20 2C 19           JSR INCSL       ;INC TO LAST BYTE
02179  19EE  20 35 19           JSR GETSL       ;GET BYTE
02180  19F1  20 AE 13           JSR PRBYT       ;PRINT IT
02181  19F4  AD 1C 08           LDA FOROPT
02182  19F7  F0 03              BEQ PRTTH1
02183  19F9  A9 01              LDA #$01
02184  19FB  2C                 .BYTE $2C
02185  19FC  A9 03       PRTTH1 LDA #$03        ;4 SPACES
02186  19FE  20 03 19           JSR SPACM       ;
02187  1A01  20 4B 19           JSR DECSL       ;DEC POINTER
02188  1A04  20 4B 19           JSR DECSL       ;DEC POINTER
02189  1A07              ;*********************************
02190  1A07              ; RESET I/O DEVICE (DISK IF USED)
02191  1A07              ;*********************************
02192  1A07  AD 1A 08    PRTEST LDA OUTPUT      ;GET I/O DEVICE
02193  1A0A  8D 19 08           STA DEVICE      ;RESET I/O
02194  1A0D  60                 RTS             ;RETURN
02195  1A0E              ;*********************************
02196  1A0E              ; PRINT LINE DATA FOR OPCODE
02197  1A0E              ;*********************************
02198  1A0E  AD 19 08    PRTDAT LDA DEVICE      ;OUTPUT DEVICE
02199  1A11  29 07              AND #$07        ;MASK DISK
02200  1A13  8D 19 08           STA DEVICE      ;RESET
02201  1A16  AD 1C 08           LDA FOROPT      ;CHECK FORMAT
02202  1A19  D0 0F              BNE PRTDAF      ;SKIP LINE #
02203  1A1B  AD 59 08           LDA LINECT+1    ;HIH BYTE LINE
02204  1A1E  AE 58 08           LDX LINECT      ;LOW BYTE LINE
02205  1A21  20 E0 13           JSR PRTNUM      ;PRINT NUMBER
02206  1A24  20 0E 19           JSR SPACE       ;
02207  1A27  20 0E 19           JSR SPACE       ;
02208  1A2A  20 BF 18    PRTDAF JSR PSELEC      ;PRINT ADDRESS
02209  1A2D  A9 01              LDA #$01        ;2 SPACES
02210  1A2F  4C 03 19           JMP SPACM       ;
02211  1A32              ;*********************************
02212  1A32              ; PRINT LINE DATA FOR OTHER LINES






DISASSEMBLER64......PAGE 0045

LINE# LOC   CODE        LINE


02213  1A32              ;*********************************
02214  1A32  20 0E 1A    PRTOTH JSR PRTDAT      ;PRINT LINE
02215  1A35  AD 1C 08           LDA FOROPT
02216  1A38  F0 03              BEQ PRTOT1
02217  1A3A  A9 09              LDA #$09
02218  1A3C  2C                 .BYTE $2C
02219  1A3D  A9 0B       PRTOT1 LDA #$0B        ;12 SPACES
02220  1A3F  20 03 19           JSR SPACM       ;
02221  1A42  4C 07 1A           JMP PRTEST      ;RESET I/O
02222  1A45              ;********************************
02223  1A45              ;.FIL 0:INTERNAL.ASM
02224  1A45              ;********************************
02225  1A45              ;.END
02226  1A45              ;*********************************
02227  1A45              ; FILE INTERNAL.ASM
02228  1A45              ;*********************************
02229  1A45              ;
02230  1A45              ;        DISASSEMBLER64
02231  1A45              ;    SYMBOLIC DISASSEMBLER
02232  1A45              ;       BY DENTON MARLOWE
02233  1A45              ;
02234  1A45              ;  (C)1986 BY DENTON MARLOWE
02235  1A45              ;
02236  1A45              ;*********************************
02237  1A45              ; INTERNAL ADDRESS TABLE ROUTINES
02238  1A45              ;*********************************
02239  1A45              ; CHECK FOR OUT OF RANGE ADDRESS
02240  1A45              ;*********************************
02241  1A45  AD 46 08    RANGE  LDA WORKED+1    ;GET HIGH
02242  1A48  CD 29 08           CMP EAGOL+1     ;COMPARE
02243  1A4B  90 0A              BCC RANG        ;< CHECK START
02244  1A4D  D0 1A              BNE ROUT        ;> OUT OF RANGE
02245  1A4F  AD 45 08           LDA WORKED      ;GET LOW
02246  1A52  CD 28 08           CMP EAGOL       ;COMPARE
02247  1A55  B0 12              BCS ROUT        ;> OUT OF RANGE
02248  1A57              ;*********************************
02249  1A57  AD 46 08    RANG   LDA WORKED+1    ;GET HIGH
02250  1A5A  CD 27 08           CMP SAGOL+1     ;COMPARE
02251  1A5D  90 0A              BCC ROUT        ;< OUT OF RANGE
02252  1A5F  AD 45 08           LDA WORKED      ;GET LOW
02253  1A62  CD 26 08           CMP SAGOL       ;COMPARE
02254  1A65  90 02              BCC ROUT        ;< OUT OF RANGE
02255  1A67              ;*********************************
02256  1A67  18                 CLC             ;C=0 IN RANGE
02257  1A68  60                 RTS
02258  1A69  38          ROUT   SEC             ;C=1 OUT RANGE
02259  1A6A  60                 RTS
02260  1A6B              ;*********************************
02261  1A6B              ; INITIALIZE INTERNAL TABLE
02262  1A6B              ;*********************************
02263  1A6B  AD EF 08    INITIN LDA DATABE
02264  1A6E  8D 30 08           STA TABINS
02265  1A71  8D 32 08           STA TABINE
02266  1A74  AD F0 08           LDA DATABE+1
02267  1A77  8D 31 08           STA TABINS+1






DISASSEMBLER64......PAGE 0046

LINE# LOC   CODE        LINE


02268  1A7A  8D 33 08           STA TABINE+1
02269  1A7D              ;*********************************
02270  1A7D              ; INITIALIZE INTERNAL TABLE POINT
02271  1A7D              ;*********************************
02272  1A7D  AD 30 08    INTSET LDA TABINS
02273  1A80  8D 2E 08           STA TABINP
02274  1A83  AD 31 08           LDA TABINS+1
02275  1A86  8D 2F 08           STA TABINP+1
02276  1A89  60                 RTS
02277  1A8A              ;*********************************
02278  1A8A              ; SAVE INTERNAL TABLE POINTERS
02279  1A8A              ;*********************************
02280  1A8A  AD 30 08    SAVINT LDA TABINS
02281  1A8D  8D 4B 08           STA SAVES
02282  1A90  AD 31 08           LDA TABINS+1
02283  1A93  8D 4C 08           STA SAVES+1
02284  1A96  AD 32 08           LDA TABINE
02285  1A99  8D 4D 08           STA SAVEE
02286  1A9C  AD 33 08           LDA TABINE+1
02287  1A9F  8D 4E 08           STA SAVEE+1
02288  1AA2  60                 RTS
02289  1AA3              ;*********************************
02290  1AA3              ; RESTORE INTERNAL TABLE POINTERS
02291  1AA3              ;*********************************
02292  1AA3  AD 4B 08    RESINT LDA SAVES
02293  1AA6  8D 30 08           STA TABINS
02294  1AA9  AD 4C 08           LDA SAVES+1
02295  1AAC  8D 31 08           STA TABINS+1
02296  1AAF  AD 4D 08           LDA SAVEE
02297  1AB2  8D 32 08           STA TABINE
02298  1AB5  AD 4E 08           LDA SAVEE+1
02299  1AB8  8D 33 08           STA TABINE+1
02300  1ABB  60                 RTS
02301  1ABC              ;*********************************
02302  1ABC              ; PUT ADDRESS IN INTERNAL TABLE
02303  1ABC              ;*********************************
02304  1ABC  38          PUTI   SEC
02305  1ABD  AD 30 08           LDA TABINS
02306  1AC0  ED 32 08           SBC TABINE
02307  1AC3  8D 51 08           STA TEMP
02308  1AC6  AD 31 08           LDA TABINS+1
02309  1AC9  ED 33 08           SBC TABINE+1
02310  1ACC  0D 51 08           ORA TEMP
02311  1ACF  F0 05              BEQ PUIT
02312  1AD1              ;
02313  1AD1  20 27 1B           JSR INTCHK      ;IS ADDRESS IN TAB
02314  1AD4  B0 23              BCS INTEXT      ;IF SO EXIT
02315  1AD6              ;
02316  1AD6  AD 32 08    PUIT   LDA TABINE      ;GET LOW END
02317  1AD9  85 02              STA ZEROUR      ;STORE
02318  1ADB  AD 33 08           LDA TABINE+1    ;GET HIGH END
02319  1ADE  85 03              STA ZEROUR+1    ;STORE
02320  1AE0  A0 00              LDY #$00        ;OFFSET
02321  1AE2  AD 45 08           LDA WORKED      ;GET LOW ADDRESS
02322  1AE5  91 02              STA (ZEROUR),Y  ;PUT IN TABLE






DISASSEMBLER64......PAGE 0047

LINE# LOC   CODE        LINE


02323  1AE7  C8                 INY             ;OFFSET TO HIGH
02324  1AE8  AD 46 08           LDA WORKED+1    ;GET HIGH ADDRESS
02325  1AEB  91 02              STA (ZEROUR),Y  ;PUT IN TABLE
02326  1AED              ;
02327  1AED  20 D4 18           JSR SEMIC       ;PRINT ;
02328  1AF0  20 CB 18           JSR PWORKD      ;PRINT ADDRESS
02329  1AF3              ;*********************************
02330  1AF3  20 FB 1A           JSR INCIE       ;INC TO HIGH & LOW
02331  1AF6  4C FB 1A           JMP INCIE       ;INC TO HIGH & LOW
02332  1AF9              ;
02333  1AF9              INTEXT = *
02334  1AF9  18                 CLC             ;C=0 FOR NO MATCH
02335  1AFA  60                 RTS             ;RETURN
02336  1AFB              ;*********************************
02337  1AFB              ; INC INTERNAL END TABLE POINTER
02338  1AFB              ;*********************************
02339  1AFB  EE 32 08    INCIE  INC TABINE
02340  1AFE  D0 03              BNE *+5
02341  1B00  EE 33 08           INC TABINE+1
02342  1B03              ;*********************************
02343  1B03              ; INC INTERNAL ADDRESS POINTER
02344  1B03              ;*********************************
02345  1B03  EE 2E 08    INCI   INC TABINP
02346  1B06  D0 03              BNE *+5
02347  1B08  EE 2F 08           INC TABINP+1
02348  1B0B  60                 RTS
02349  1B0C              ;*********************************
02350  1B0C              ; GET BYTE FROM INTERNAL TABLE
02351  1B0C              ;*********************************
02352  1B0C  AD 2E 08    GETI   LDA TABINP
02353  1B0F  85 02              STA ZEROUR
02354  1B11  AD 2F 08           LDA TABINP+1
02355  1B14  85 03              STA ZEROUR+1
02356  1B16  A0 00              LDY #$00
02357  1B18  B1 02              LDA (ZEROUR),Y
02358  1B1A  60                 RTS
02359  1B1B              ;*********************************
02360  1B1B              ; CHECK IF ADDRESS IN TABLE
02361  1B1B              ;*********************************
02362  1B1B  AD 22 08    INTCHA LDA SELECT
02363  1B1E  8D 45 08           STA WORKED
02364  1B21  AD 23 08           LDA SELECT+1
02365  1B24  8D 46 08           STA WORKED+1
02366  1B27              ;*********************************
02367  1B27  20 7D 1A    INTCHK JSR INTSET
02368  1B2A  20 0C 1B    INTCH  JSR GETI
02369  1B2D  8D 47 08           STA WORKER
02370  1B30  20 03 1B           JSR INCI
02371  1B33  20 0C 1B           JSR GETI
02372  1B36  8D 48 08           STA WORKER+1
02373  1B39  38                 SEC
02374  1B3A  AD 46 08           LDA WORKED+1
02375  1B3D  ED 48 08           SBC WORKER+1
02376  1B40  8D 51 08           STA TEMP
02377  1B43  AD 45 08           LDA WORKED






DISASSEMBLER64......PAGE 0048

LINE# LOC   CODE        LINE


02378  1B46  ED 47 08           SBC WORKER
02379  1B49  0D 51 08           ORA TEMP
02380  1B4C  F0 17              BEQ INTMAT
02381  1B4E              ;*********************************
02382  1B4E  20 03 1B           JSR INCI
02383  1B51  AD 2F 08           LDA TABINP+1
02384  1B54  CD 33 08           CMP TABINE+1
02385  1B57  90 D1              BCC INTCH
02386  1B59  D0 08              BNE INTEND
02387  1B5B  AD 2E 08           LDA TABINP
02388  1B5E  CD 32 08           CMP TABINE
02389  1B61  90 C7              BCC INTCH
02390  1B63              ;*********************************
02391  1B63  18          INTEND CLC
02392  1B64  60                 RTS
02393  1B65  38          INTMAT SEC
02394  1B66  60                 RTS
02395  1B67              ;*********************************
02396  1B67              ; 2 BYTE TABLE SORT ROUTINE
02397  1B67              ;*********************************
02398  1B67  20 7D 1A    SORT   JSR INTSET      ;SET POINTERS
02399  1B6A  AD 30 08           LDA TABINS
02400  1B6D  8D 34 08           STA SMALLS
02401  1B70  8D 36 08           STA SMALLP
02402  1B73  AD 31 08           LDA TABINS+1
02403  1B76  8D 35 08           STA SMALLS+1
02404  1B79  8D 37 08           STA SMALLP+1
02405  1B7C              ;*********************************
02406  1B7C              ; PUT FIRST WORD INTO TEMP
02407  1B7C              ;*********************************
02408  1B7C  20 0C 1B    SORT1  JSR GETI
02409  1B7F  8D 51 08           STA TEMP
02410  1B82  20 03 1B           JSR INCI
02411  1B85  20 0C 1B           JSR GETI
02412  1B88  8D 52 08           STA TEMP+1
02413  1B8B              ;*********************************
02414  1B8B              ; INC TO NEXT WORD AND COMPARE
02415  1B8B              ; SMALLP POINTS TO LOW BYTE
02416  1B8B              ;*********************************
02417  1B8B  20 03 1B    SORT2  JSR INCI
02418  1B8E  AD 2E 08           LDA TABINP
02419  1B91  8D 36 08           STA SMALLP
02420  1B94  AD 2F 08           LDA TABINP+1
02421  1B97  8D 37 08           STA SMALLP+1
02422  1B9A  20 0C 1B           JSR GETI
02423  1B9D  8D 45 08           STA WORKED
02424  1BA0  20 03 1B           JSR INCI
02425  1BA3  AD 2F 08           LDA TABINP+1
02426  1BA6  CD 33 08           CMP TABINE+1
02427  1BA9  90 0D              BCC T2
02428  1BAB  D0 08              BNE S3
02429  1BAD  AD 2E 08           LDA TABINP
02430  1BB0  CD 32 08           CMP TABINE
02431  1BB3  90 03              BCC T2
02432  1BB5  4C 0D 1C    S3     JMP SORT3






DISASSEMBLER64......PAGE 0049

LINE# LOC   CODE        LINE


02433  1BB8  20 0C 1B    T2     JSR GETI
02434  1BBB  8D 46 08           STA WORKED+1
02435  1BBE  CD 52 08           CMP TEMP+1
02436  1BC1  90 0D              BCC SMALL
02437  1BC3  D0 08              BNE LARGE
02438  1BC5  AD 45 08           LDA WORKED
02439  1BC8  CD 51 08           CMP TEMP
02440  1BCB  90 03              BCC SMALL
02441  1BCD  4C 8B 1B    LARGE  JMP SORT2
02442  1BD0              ;*********************************
02443  1BD0              ; WORD IS SMALL THAN TEMP PUT IT
02444  1BD0              ; WHERE TEMP CAME FROM (SMALLS)
02445  1BD0              ;*********************************
02446  1BD0  AD 34 08    SMALL  LDA SMALLS
02447  1BD3  85 02              STA ZEROUR
02448  1BD5  AD 35 08           LDA SMALLS+1
02449  1BD8  85 03              STA ZEROUR+1
02450  1BDA  A0 00              LDY #$00
02451  1BDC  AD 45 08           LDA WORKED
02452  1BDF  91 02              STA (ZEROUR),Y
02453  1BE1  C8                 INY
02454  1BE2  AD 46 08           LDA WORKED+1
02455  1BE5  91 02              STA (ZEROUR),Y
02456  1BE7              ;*********************************
02457  1BE7              ; PUT TEMP IN PLACE OF WORD
02458  1BE7              ; SMALLP POINTS TO LO ADDRESS
02459  1BE7              ;*********************************
02460  1BE7  AD 36 08           LDA SMALLP
02461  1BEA  85 02              STA ZEROUR
02462  1BEC  AD 37 08           LDA SMALLP+1
02463  1BEF  85 03              STA ZEROUR+1
02464  1BF1  A0 00              LDY #$00
02465  1BF3  AD 51 08           LDA TEMP
02466  1BF6  91 02              STA (ZEROUR),Y
02467  1BF8  C8                 INY
02468  1BF9  AD 52 08           LDA TEMP+1
02469  1BFC  91 02              STA (ZEROUR),Y
02470  1BFE              ;*********************************
02471  1BFE  AD 34 08           LDA SMALLS
02472  1C01  8D 2E 08           STA TABINP
02473  1C04  AD 35 08           LDA SMALLS+1
02474  1C07  8D 2F 08           STA TABINP+1
02475  1C0A  4C 7C 1B           JMP SORT1
02476  1C0D              ;*********************************
02477  1C0D              ; IF AFTER SCAN TO TABLE GOTO NEXT
02478  1C0D              ; WORD IN TABLE FOR CHECK
02479  1C0D              ;*********************************
02480  1C0D  18          SORT3  CLC
02481  1C0E  AD 34 08           LDA SMALLS
02482  1C11  69 02              ADC #$02
02483  1C13  8D 34 08           STA SMALLS
02484  1C16  8D 2E 08           STA TABINP
02485  1C19  AD 35 08           LDA SMALLS+1
02486  1C1C  69 00              ADC #$00
02487  1C1E  8D 35 08           STA SMALLS+1






DISASSEMBLER64......PAGE 0050

LINE# LOC   CODE        LINE


02488  1C21  8D 2F 08           STA TABINP+1
02489  1C24  AD 35 08           LDA SMALLS+1
02490  1C27  CD 33 08           CMP TABINE+1
02491  1C2A  90 0A              BCC SORTOK
02492  1C2C  D0 0B              BNE SORT4
02493  1C2E  AD 34 08           LDA SMALLS
02494  1C31  CD 32 08           CMP TABINE
02495  1C34  B0 03              BCS SORT4
02496  1C36  4C 7C 1B    SORTOK JMP SORT1
02497  1C39              ;*********************************
02498  1C39  4C 7D 1A    SORT4  JMP INTSET
02499  1C3C              ;*********************************
02500  1C3C              ; PRINT INTERNAL ADDRESS TABLE
02501  1C3C              ;*********************************
02502  1C3C  38          INTPRT SEC
02503  1C3D  AD 30 08           LDA TABINS
02504  1C40  ED 32 08           SBC TABINE
02505  1C43  8D 51 08           STA TEMP
02506  1C46  AD 31 08           LDA TABINS+1
02507  1C49  ED 33 08           SBC TABINE+1
02508  1C4C  0D 51 08           ORA TEMP
02509  1C4F  D0 01              BNE INTOUT
02510  1C51  60                 RTS
02511  1C52              ;*********************************
02512  1C52  20 F1 14    INTOUT JSR HEADSY
02513  1C55  20 67 1B           JSR SORT
02514  1C58              ;*********************************
02515  1C58  A9 03       LOOP1  LDA #$03
02516  1C5A  8D 52 08           STA SAVA
02517  1C5D  20 0C 1B    INTPR  JSR GETI
02518  1C60  8D 45 08           STA WORKED
02519  1C63  20 03 1B           JSR INCI
02520  1C66  20 0C 1B           JSR GETI
02521  1C69  8D 46 08           STA WORKED+1
02522  1C6C  20 0E 19           JSR SPACE
02523  1C6F  20 65 23           JSR SYMOP
02524  1C72  90 0B              BCC INTPRS
02525  1C74  20 02 24           JSR FIXSYM
02526  1C77  A9 02              LDA #$02
02527  1C79  20 03 19           JSR SPACM
02528  1C7C  4C 84 1C           JMP INTPRM
02529  1C7F  A9 08       INTPRS LDA #$08
02530  1C81  20 03 19           JSR SPACM
02531  1C84  20 CB 18    INTPRM JSR PWORKD
02532  1C87  20 03 1B           JSR INCI
02533  1C8A  AD 2F 08           LDA TABINP+1
02534  1C8D  CD 33 08           CMP TABINE+1
02535  1C90  90 0A              BCC PRTOK
02536  1C92  D0 15              BNE PREND
02537  1C94  AD 2E 08           LDA TABINP
02538  1C97  CD 32 08           CMP TABINE
02539  1C9A  B0 0D              BCS PREND
02540  1C9C  CE 52 08    PRTOK  DEC SAVA
02541  1C9F  30 0B              BMI LOOP2
02542  1CA1  A9 02              LDA #$02






DISASSEMBLER64......PAGE 0051

LINE# LOC   CODE        LINE


02543  1CA3  20 03 19           JSR SPACM
02544  1CA6  4C 5D 1C           JMP INTPR
02545  1CA9  4C C6 14    PREND  JMP NEXPTS
02546  1CAC  20 C6 14    LOOP2  JSR NEXPTS
02547  1CAF  4C 58 1C           JMP LOOP1
02548  1CB2              ;*********************************
02549  1CB2              ;.FIL 0:ASC.ASM
02550  1CB2              ;*********************************
02551  1CB2              ;.END
02552  1CB2              ;*********************************
02553  1CB2              ; FILE ASC.ASM
02554  1CB2              ;*********************************
02555  1CB2              ;
02556  1CB2              ;        DISASSEMBLER64
02557  1CB2              ;    SYMBOLIC DISASSEMBLER
02558  1CB2              ;       BY DENTON MARLOWE
02559  1CB2              ;
02560  1CB2              ;  (C)1986 BY DENTON MARLOWE
02561  1CB2              ;
02562  1CB2              ;*********************************
02563  1CB2              ; DATA TABLE HANDLER
02564  1CB2              ;*********************************
02565  1CB2  AD E9 08    DATAOP LDA NDATA       ;GET NUM TABLES
02566  1CB5  F0 07              BEQ ENDAX       ;IF ZERO EXIT
02567  1CB7  A9 00              LDA #$00        ;ZERO BYTE
02568  1CB9  8D E7 08           STA CDATA       ;SET FIRST TABLE
02569  1CBC  F0 03              BEQ DATAO1      ;
02570  1CBE  4C A2 1D    ENDAX  JMP ENDDAT      ;
02571  1CC1              ;*********************************
02572  1CC1  AD E7 08    DATAO1 LDA CDATA       ;CURRENT TABLE
02573  1CC4  CD E9 08           CMP NDATA       ;LAST TABLE DONE
02574  1CC7  F0 F5              BEQ ENDAX       ;IF SO EXIT
02575  1CC9  0A                 ASL A           ;CDATA*2
02576  1CCA  0A                 ASL A           ;CDATA*4
02577  1CCB  18                 CLC
02578  1CCC  6D E7 08           ADC CDATA       ;CDATA*5
02579  1CCF  A8                 TAY             ;PUT INTO INDEX
02580  1CD0  B9 F1 08           LDA TDATA,Y     ;START LOW
02581  1CD3  8D 47 08           STA WORKER      ;STORE
02582  1CD6  C8                 INY             ;INC OFFSET
02583  1CD7  B9 F1 08           LDA TDATA,Y     ;START HIGH
02584  1CDA  8D 48 08           STA WORKER+1    ;STORE
02585  1CDD  38                 SEC             ;C=1
02586  1CDE  AD 47 08           LDA WORKER      ;
02587  1CE1  ED 22 08           SBC SELECT      ;
02588  1CE4  8D 51 08           STA TEMP        ;
02589  1CE7  AD 48 08           LDA WORKER+1    ;
02590  1CEA  ED 23 08           SBC SELECT+1    ;
02591  1CED  0D 51 08           ORA TEMP        ;
02592  1CF0  F0 05              BEQ DATAO2      ;MATCH
02593  1CF2  EE E7 08           INC CDATA       ;NEXT TABLE
02594  1CF5  D0 CA              BNE DATAO1      ;CHECK FOR MATCH
02595  1CF7              ;*********************************
02596  1CF7              ; GET TABLE DATA
02597  1CF7              ;*********************************






DISASSEMBLER64......PAGE 0052

LINE# LOC   CODE        LINE


02598  1CF7  C8          DATAO2 INY             ;INC OFFSET
02599  1CF8  B9 F1 08           LDA TDATA,Y     ;END LOW
02600  1CFB  8D E4 08           STA EAS         ;STORE
02601  1CFE  C8                 INY             ;INC OFFSET
02602  1CFF  B9 F1 08           LDA TDATA,Y     ;END HIGH
02603  1D02  8D E5 08           STA EAS+1       ;STORE
02604  1D05  C8                 INY             ;INC OFFSET
02605  1D06  B9 F1 08           LDA TDATA,Y     ;DATA TYPE
02606  1D09  8D E6 08           STA TEXTER      ;STORE
02607  1D0C  C9 53              CMP #'S'        ;IS IT SKIPPER
02608  1D0E  D0 23              BNE ASCCCC      ;
02609  1D10              ;*********************************
02610  1D10              ; SKIP RANGE OF ADDRESSES
02611  1D10              ;*********************************
02612  1D10  AD 12 08           LDA PASS
02613  1D13  CD 15 08           CMP CPASS
02614  1D16  D0 1B              BNE ASCCCC
02615  1D18  AD E4 08           LDA EAS
02616  1D1B  8D 22 08           STA SELECT
02617  1D1E  AD E5 08           LDA EAS+1
02618  1D21  8D 23 08           STA SELECT+1
02619  1D24  20 2C 19           JSR INCSL
02620  1D27  20 44 18           JSR ORGIN
02621  1D2A  20 4B 19           JSR DECSL
02622  1D2D  20 6A 18           JSR COMENT
02623  1D30  4C 9F 1D           JMP DATUT
02624  1D33              ;*********************************
02625  1D33              ; CHECK PASS
02626  1D33              ;*********************************
02627  1D33  AD 12 08    ASCCCC LDA PASS
02628  1D36  CD 14 08           CMP EPASS       ;EXTERNAL
02629  1D39  D0 0F              BNE ASCKK
02630  1D3B  AD E4 08    SKIPER LDA EAS
02631  1D3E  8D 22 08           STA SELECT
02632  1D41  AD E5 08           LDA EAS+1
02633  1D44  8D 23 08           STA SELECT+1
02634  1D47  4C 9F 1D           JMP DATUT
02635  1D4A              ;*********************************
02636  1D4A              ; DISASSEMBLER LOOP FOR DATA
02637  1D4A              ;*********************************
02638  1D4A  AD 12 08    ASCKK  LDA PASS        ;GET PASS
02639  1D4D  CD 15 08           CMP CPASS       ;IS IT LAST
02640  1D50  D0 0E              BNE ASCI1       ;NO PRINT
02641  1D52  20 6A 18           JSR COMENT      ;COMMENT LINE
02642  1D55  AD 12 08    ASCII  LDA PASS        ;GET PASS
02643  1D58  CD 15 08           CMP CPASS       ;IS IT LAST
02644  1D5B  D0 03              BNE ASCI1       ;NO PRINT
02645  1D5D  20 0E 1A           JSR PRTDAT      ;PRINT LINE
02646  1D60  20 A5 1D    ASCI1  JSR ACHECK      ;DIS ONE LINE
02647  1D63  B0 29              BCS ASCIIQ      ;IF EA STOP
02648  1D65              ;*********************************
02649  1D65  20 E1 FF           JSR STOP
02650  1D68  F0 24              BEQ ASCIIQ
02651  1D6A  20 E4 FF           JSR GETIN
02652  1D6D  F0 E6              BEQ ASCII






DISASSEMBLER64......PAGE 0053

LINE# LOC   CODE        LINE


02653  1D6F  C9 20              CMP #' '
02654  1D71  D0 E2              BNE ASCII
02655  1D73  AD 19 08           LDA DEVICE
02656  1D76  48                 PHA
02657  1D77  A9 03              LDA #$03
02658  1D79  8D 19 08           STA DEVICE
02659  1D7C  A9 F8              LDA #<PMSG
02660  1D7E  A0 09              LDY #>PMSG
02661  1D80  20 C4 13           JSR STRPNT
02662  1D83  68                 PLA
02663  1D84  8D 19 08           STA DEVICE
02664  1D87  20 E4 FF    PAUS1  JSR GETIN
02665  1D8A  F0 FB              BEQ PAUS1
02666  1D8C  D0 C7              BNE ASCII
02667  1D8E              ;*********************************
02668  1D8E  AD 12 08    ASCIIQ LDA PASS        ;GET PASS
02669  1D91  CD 15 08           CMP CPASS       ;IS IT LAST
02670  1D94  D0 09              BNE DATUT       ;EXIT
02671  1D96  20 2C 19           JSR INCSL
02672  1D99  20 6A 18           JSR COMENT      ;COMMENT LINE
02673  1D9C  20 4B 19           JSR DECSL
02674  1D9F              ;*********************************
02675  1D9F              ; EXIT TO NEXTSL
02676  1D9F              ;*********************************
02677  1D9F  A9 FF       DATUT  LDA #$FF        ;SET N=1
02678  1DA1  60                 RTS             ;RETURN
02679  1DA2  A9 00       ENDDAT LDA #$00        ;SET N=0
02680  1DA4  60                 RTS             ;RETURN
02681  1DA5              ;*********************************
02682  1DA5              ; CHECK OPTIONS
02683  1DA5              ;*********************************
02684  1DA5  AD E6 08    ACHECK LDA TEXTER      ;GET DATA TYPE
02685  1DA8  C9 34              CMP #'4'         ;WORD-1
02686  1DAA  F0 0B              BEQ AC0
02687  1DAC  C9 33              CMP #'3'         ;DBYTE
02688  1DAE  F0 0A              BEQ AC1
02689  1DB0  C9 32              CMP #'2'         ;WORD
02690  1DB2  F0 03              BEQ AC0
02691  1DB4  4C BD 1D           JMP BYTES       ;BYTE OR ASCII
02692  1DB7  4C 79 1E    AC0    JMP WORDS       ;WORD OR WORD-1
02693  1DBA  4C 49 1E    AC1    JMP DBYTES      ;DBYTES
02694  1DBD              ;*********************************
02695  1DBD              ; .BYTE DIRECTIVE
02696  1DBD              ;*********************************
02697  1DBD  AD 12 08    BYTES  LDA PASS        ;GET PASS
02698  1DC0  CD 15 08           CMP CPASS       ;IS IT LAST
02699  1DC3  D0 20              BNE BYTESX      ;IF NOT EXIT
02700  1DC5  20 9B 19           JSR PRTONE      ;PRINT BYTE
02701  1DC8  20 93 18           JSR PRAD        ;PRINT ADDRESS
02702  1DCB  A0 1F              LDY #>MBYTE     ;.BYTE
02703  1DCD  A9 35              LDA #<MBYTE     ;
02704  1DCF  20 C4 13           JSR STRPNT      ;PRINT IT
02705  1DD2  AD E6 08           LDA TEXTER      ;GET TYPE
02706  1DD5  C9 30              CMP #'0'          ;ASCII
02707  1DD7  F0 0F              BEQ ALINE       ;ASCII BYTES






DISASSEMBLER64......PAGE 0054

LINE# LOC   CODE        LINE


02708  1DD9  20 D9 18           JSR DOLLAR      ;PRINT $
02709  1DDC  20 35 19           JSR GETSL       ;GET BYTE
02710  1DDF  20 AE 13           JSR PRBYT       ;PRINT BYTE
02711  1DE2  20 07 13           JSR NEWLIN      ;NEXT LINE
02712  1DE5  4C 1C 1F    BYTESX JMP NEXTBY      ;NEXT BYTE
02713  1DE8              ;*********************************
02714  1DE8              ; ASCII TEXT
02715  1DE8              ;*********************************
02716  1DE8  A9 00       ALINE  LDA #$00        ;ZERO BYTE
02717  1DEA  8D 51 08           STA TEMP        ;STORE IN COUNT
02718  1DED              ;*********************************
02719  1DED              ; CHECK FIRST BYTE OF LINE
02720  1DED              ;*********************************
02721  1DED  20 35 19           JSR GETSL       ;GET BYTE
02722  1DF0  20 3D 1E           JSR CASCII      ;CHECK FOR ASCII
02723  1DF3  B0 39              BCS NASCII      ;IF NOT BRANCH
02724  1DF5  A9 27              LDA #'''        ;PRINT ONE QUOTE
02725  1DF7  20 1A 14           JSR PCHAR       ;PRINT IT
02726  1DFA              ;*********************************
02727  1DFA  20 35 19    ALOP   JSR GETSL       ;GET BYTE
02728  1DFD  20 3D 1E           JSR CASCII      ;IS IT ASCII
02729  1E00  B0 24              BCS EASCII      ;IF NOT END LINE
02730  1E02  20 1A 14           JSR PCHAR       ;PRINT ASCII
02731  1E05              ; REV 2-12-2018 START
02732  1E05              ; IF CHAR = ' THEN PRINT SECOND '
02733  1E05  20 35 19           JSR GETSL       ; GET BYTE AGAIN
02734  1E08  C9 27              CMP #$27        ;'''
02735  1E0A  D0 03              BNE Q00000
02736  1E0C  20 1A 14           JSR PCHAR       ;PRINT ASCII
02737  1E0F              Q00000 = *
02738  1E0F              ; REV 2-12-2018 END
02739  1E0F  20 1C 1F           JSR NEXTBY      ;INC SELECT
02740  1E12  B0 0D              BCS EASCI1      ;C=1 IF END
02741  1E14  EE 51 08           INC TEMP        ;INC COUNT
02742  1E17  AD 51 08           LDA TEMP        ;LOAD COUNT
02743  1E1A  C9 28              CMP #$28        ;40 CHAR
02744  1E1C  F0 08              BEQ EASCII      ;IF SO END
02745  1E1E  4C FA 1D           JMP ALOP        ;NEXT
02746  1E21              ;*********************************
02747  1E21  20 26 1E    EASCI1 JSR EASCII
02748  1E24  38                 SEC
02749  1E25  60                 RTS
02750  1E26              ;*********************************
02751  1E26  A9 27       EASCII LDA #'''        ;PRINT ONE QUOTE
02752  1E28  20 1A 14           JSR PCHAR       ;
02753  1E2B  4C 07 13           JMP NEWLIN      ;PRINT CR
02754  1E2E              ;*********************************
02755  1E2E  20 D9 18    NASCII JSR DOLLAR      ;PRINT $
02756  1E31  20 35 19           JSR GETSL       ;GET BYTE
02757  1E34  20 AE 13           JSR PRBYT       ;PRINT IT
02758  1E37  20 07 13           JSR NEWLIN      ;PRINT CR
02759  1E3A  4C 1C 1F           JMP NEXTBY      ;NEXT SL
02760  1E3D              ;*********************************
02761  1E3D              ; CHECK ACCUM FOR PRINTABLE ASCII
02762  1E3D              ;*********************************






DISASSEMBLER64......PAGE 0055

LINE# LOC   CODE        LINE


02763  1E3D  C9 20       CASCII CMP #$20        ;< SPACE
02764  1E3F  30 06              BMI NOASC       ;IF LESS NOASCII
02765  1E41  C9 60              CMP #$60        ;> _
02766  1E43  B0 02              BCS NOASC       ;IF GREATER NO
02767  1E45  18                 CLC             ;CLEAR CARRY OK
02768  1E46  60                 RTS             ;RETURN
02769  1E47  38          NOASC  SEC             ;SET CARRY BAD
02770  1E48  60                 RTS             ;RETURN
02771  1E49              ;*********************************
02772  1E49              ; .DBYTE DIRECTIVE
02773  1E49              ;*********************************
02774  1E49  AD 12 08    DBYTES LDA PASS        ;CHECK PASS
02775  1E4C  CD 15 08           CMP CPASS       ;LAST PASS
02776  1E4F  D0 25              BNE DBYTEX      ;EXIT
02777  1E51  20 B1 19           JSR PRTTWO      ;PRINT 2 BYTES
02778  1E54  20 93 18           JSR PRAD        ;PRINT ADDRESS
02779  1E57  A0 1F              LDY #>MDBYTE    ;.DBYTE
02780  1E59  A9 45              LDA #<MDBYTE    ;
02781  1E5B  20 C4 13           JSR STRPNT      ;PRINT IT
02782  1E5E  20 35 19           JSR GETSL       ;GET BYTE
02783  1E61  8D 46 08           STA WORKED+1    ;STORE
02784  1E64  20 2C 19           JSR INCSL       ;GET BYTE
02785  1E67  20 35 19           JSR GETSL       ;GET BYTE
02786  1E6A  8D 45 08           STA WORKED      ;STORE
02787  1E6D  20 D9 18           JSR DOLLAR      ;PRINT $
02788  1E70  20 CB 18           JSR PWORKD      ;PRINT WORD
02789  1E73  20 07 13           JSR NEWLIN      ;PRINT CR
02790  1E76  4C 1C 1F    DBYTEX JMP NEXTBY      ;NEXT SL
02791  1E79              ;*********************************
02792  1E79              ; .WORD DIRECTIVE
02793  1E79              ;*********************************
02794  1E79  AD 12 08    WORDS  LDA PASS        ;GET PASS
02795  1E7C  CD 15 08           CMP CPASS         ;LAST
02796  1E7F  D0 0D              BNE WORD1       ;IF NOT BRANCH
02797  1E81  20 B1 19           JSR PRTTWO      ;PRINT 2 BYTES
02798  1E84  20 93 18           JSR PRAD        ;PRINT ADDRESS
02799  1E87  A0 1F              LDY #>MWORD     ;.WORD
02800  1E89  A9 3D              LDA #<MWORD     ;
02801  1E8B  20 C4 13           JSR STRPNT      ;PRINT IT
02802  1E8E              ;*********************************
02803  1E8E              ; GET WORD INTO WORKED
02804  1E8E              ;*********************************
02805  1E8E  20 35 19    WORD1  JSR GETSL       ;GET BYTE
02806  1E91  8D 45 08           STA WORKED      ;STORE BYTE
02807  1E94  8D 36 08           STA SMALLP      ;STORE BYTE
02808  1E97  20 2C 19           JSR INCSL       ;GET BYTE
02809  1E9A  20 35 19           JSR GETSL       ;GET BYTE
02810  1E9D  8D 46 08           STA WORKED+1    ;STORE BYTE
02811  1EA0  8D 37 08           STA SMALLP+1    ;STORE BYTE
02812  1EA3  AD E6 08           LDA TEXTER      ;GET OPTION
02813  1EA6  C9 34              CMP #'4'          ;.WORD ADRS-1
02814  1EA8  F0 2A              BEQ WORDM       ;BRANCH
02815  1EAA              ;*********************************
02816  1EAA              ; CHECK PASS
02817  1EAA              ;*********************************






DISASSEMBLER64......PAGE 0056

LINE# LOC   CODE        LINE


02818  1EAA  AD 12 08           LDA PASS        ;CHECK PASS
02819  1EAD  CD 13 08           CMP IPASS       ;INTERNAL
02820  1EB0  F0 16              BEQ WORDPT      ;TABLE WORD
02821  1EB2  CD 14 08           CMP EPASS
02822  1EB5  F0 17              BEQ WORDSY
02823  1EB7              ;*********************************
02824  1EB7              ; PRINT WORD
02825  1EB7              ;*********************************
02826  1EB7  20 65 23           JSR SYMOP       ;CHECK SYMBOL
02827  1EBA  B0 5A              BCS WORDS3      ;C=1 SYMBOL
02828  1EBC  20 D9 18           JSR DOLLAR      ;PRINT $
02829  1EBF  20 CB 18           JSR PWORKD      ;PRINT WORD
02830  1EC2  20 07 13           JSR NEWLIN      ;PRINT CR
02831  1EC5  4C 1C 1F    WORDSX JMP NEXTBY      ;NEXT SL
02832  1EC8  20 BC 1A    WORDPT JSR PUTI        ;PUT IN TABLE
02833  1ECB  4C 1C 1F           JMP NEXTBY      ;NEXT SL
02834  1ECE  20 65 23    WORDSY JSR SYMOP
02835  1ED1  4C 1C 1F           JMP NEXTBY
02836  1ED4              ;*********************************
02837  1ED4              ; .WORD ADDRESS-1
02838  1ED4              ;*********************************
02839  1ED4  18          WORDM  CLC
02840  1ED5  AD 45 08           LDA WORKED
02841  1ED8  69 01              ADC #$01
02842  1EDA  8D 45 08           STA WORKED
02843  1EDD  AD 46 08           LDA WORKED+1
02844  1EE0  69 00              ADC #$00
02845  1EE2  8D 46 08           STA WORKED+1
02846  1EE5              ;*********************************
02847  1EE5              ; CHECK PASS
02848  1EE5              ;*********************************
02849  1EE5  AD 12 08           LDA PASS        ;CHECK PASS
02850  1EE8  CD 13 08           CMP IPASS       ;INTERNAL
02851  1EEB  F0 DB              BEQ WORDPT      ;TABLE WORD
02852  1EED  CD 14 08           CMP EPASS       ;EXTERNAL
02853  1EF0  F0 DC              BEQ WORDSY      ;TABLE WORD
02854  1EF2              ;*********************************
02855  1EF2              ; PRINT WORD
02856  1EF2              ;*********************************
02857  1EF2  20 65 23           JSR SYMOP       ;CHECK SYMBOL
02858  1EF5  90 0D              BCC WORDS2      ;C=0 NO SYMBOL
02859  1EF7  A9 2D              LDA #'-'
02860  1EF9  20 1A 14           JSR PCHAR
02861  1EFC  A9 31              LDA #'1'
02862  1EFE  20 1A 14           JSR PCHAR
02863  1F01  4C 16 1F           JMP WORDS3
02864  1F04              ;*********************************
02865  1F04  20 D9 18    WORDS2 JSR DOLLAR      ;PRINT $
02866  1F07  AD 36 08           LDA SMALLP
02867  1F0A  8D 45 08           STA WORKED
02868  1F0D  AD 37 08           LDA SMALLP+1
02869  1F10  8D 46 08           STA WORKED+1
02870  1F13  20 CB 18           JSR PWORKD      ;PRINT WORD
02871  1F16  20 07 13    WORDS3 JSR NEWLIN      ;PRINT CR
02872  1F19  4C 1C 1F    WORDXX JMP NEXTBY      ;NEXT SL






DISASSEMBLER64......PAGE 0057

LINE# LOC   CODE        LINE


02873  1F1C              ;*********************************
02874  1F1C              ; SELECT NEXT BYTE OF DATA
02875  1F1C              ;*********************************
02876  1F1C  AD 23 08    NEXTBY LDA SELECT+1
02877  1F1F  CD E5 08           CMP EAS+1
02878  1F22  90 0A              BCC SBLOK
02879  1F24  D0 0D              BNE NOBINC
02880  1F26  AD 22 08           LDA SELECT
02881  1F29  CD E4 08           CMP EAS
02882  1F2C  B0 05              BCS NOBINC
02883  1F2E  20 2C 19    SBLOK  JSR INCSL
02884  1F31  18                 CLC
02885  1F32  60                 RTS
02886  1F33  38          NOBINC SEC
02887  1F34  60                 RTS
02888  1F35              ;*********************************
02889  1F35  20 2E       MBYTE  .BYTE ' .BYTE ',0
02889  1F3C  00 
02890  1F3D  20 2E       MWORD  .BYTE ' .WORD ',0
02890  1F44  00 
02891  1F45  20 2E       MDBYTE .BYTE ' .DBYTE ',0
02891  1F4D  00 
02892  1F4E              ;*********************************
02893  1F4E              ;.FIL 0:TABLE.ASM
02894  1F4E              ;*********************************
02895  1F4E              ;.END
02896  1F4E              ;*********************************
02897  1F4E              ; FILE TABLE.ASM
02898  1F4E              ;*********************************
02899  1F4E              ;
02900  1F4E              ;        DISASSEMBLER64
02901  1F4E              ;    SYMBOLIC DISASSEMBLER
02902  1F4E              ;       BY DENTON MARLOWE
02903  1F4E              ;
02904  1F4E              ;  (C)1986 BY DENTON MARLOWE
02905  1F4E              ;
02906  1F4E              ;*********************************
02907  1F4E              ;       PRINT MNEMONIC
02908  1F4E              ;
02909  1F4E              ; OPCODE IN A
02910  1F4E              ;
02911  1F4E              ; BUG ILLEGAL OPCODE WOULD PRINT OUT AS
02912  1F4E              ;
02913  1F4E              ; ZZZZ XX                 ...  .BYTE $XX ;??? ILL
EGAL OPCODE
02914  1F4E              ; WHERE THE "..." WERE THREE NULLS
02915  1F4E              ; BECAUSE ILLEGAL OPCODE MNEMONIC IS CODES AS 0,0
,0
02916  1F4E              ;
02917  1F4E              ;*********************************
02918  1F4E  A2 03       MNEMON LDX #3          ;3 CHARACTERS
02919  1F50  8E 51 08           STX TEMP        ;COUNTER
02920  1F53  AA                 TAX             ;CODE IS INDEX
02921  1F54  BD C9 20           LDA MCODES,X    ;GET OFFSET
02922  1F57  AA                 TAX             ;INDEX OFFSET
02923  1F58  BD F1 1F    MNLOOP LDA MNAMES,X    ;GET CHARACTER
02924  1F5B              ;BEGIN REV 2017-0






DISASSEMBLER64......PAGE 0058

LINE# LOC   CODE        LINE


02925  1F5B  F0 09              BEQ ILLOP       ;ILLEGAL OPCODE MNEMONIC C
HAR IS A NULL
02926  1F5D              ;END REV 2017-0
02927  1F5D  8E 53 08           STX SAVX        ;SAVE INDEX
02928  1F60  20 1A 14           JSR PCHAR       ;PRINT CHAR
02929  1F63  AE 53 08           LDX SAVX        ;GET INDEX
02930  1F66              ;BEGIN REV 2017-1
02931  1F66              ILLOP  = *
02932  1F66              ;END REV 2017-0
02933  1F66  E8                 INX             ;NEXT CHAR
02934  1F67  CE 51 08           DEC TEMP        ;DEC COUNT
02935  1F6A  D0 EC              BNE MNLOOP      ;LOOP TILL 0
02936  1F6C  60                 RTS             ;RETURN
02937  1F6D              ;*********************************
02938  1F6D              ;        PRINT OPERAND
02939  1F6D              ;*********************************
02940  1F6D  48          PRTASS PHA             ;STACK INDEX
02941  1F6E  20 0E 1A           JSR PRTDAT      ;PRINT LINE DATA
02942  1F71  68                 PLA             ;PULL INDEX
02943  1F72  A8                 TAY             ;SAVE INDEX
02944  1F73  A9 9D              LDA #<SUBP
02945  1F75  A2 1F              LDX #>SUBP
02946  1F77  4C 87 1F           JMP GETOPE      ;LOOK UP ROUTINE
02947  1F7A              ;*********************************
02948  1F7A  A8          OPERN1 TAY             ;SAVE INDEX
02949  1F7B  A9 B9              LDA #<SUBS1
02950  1F7D  A2 1F              LDX #>SUBS1
02951  1F7F  4C 87 1F           JMP GETOPE      ;LOOK UP ROUTINE
02952  1F82              ;*********************************
02953  1F82  A8          OPERND TAY             ;SAVE INDEX
02954  1F83  A9 D5              LDA #<SUBS
02955  1F85  A2 1F              LDX #>SUBS
02956  1F87              ;*********************************
02957  1F87              ; LOOK UP AND JMP TO ROUTINE
02958  1F87              ;*********************************
02959  1F87  85 02       GETOPE STA ZEROUR      ;LOW TABLE
02960  1F89  86 03              STX ZEROUR+1    ;HIGH TABLE
02961  1F8B  B9 C9 21           LDA MODES,Y     ;GET OFFSET
02962  1F8E  A8                 TAY             ;INDEX OFFSET
02963  1F8F  B1 02              LDA (ZEROUR),Y  ;GET LOW BYTE
02964  1F91  8D 4F 08           STA ADRS        ;STORE
02965  1F94  C8                 INY             ;INC INDEX
02966  1F95  B1 02              LDA (ZEROUR),Y  ;GET HIGH BYTE
02967  1F97  8D 50 08           STA ADRS+1      ;STORE
02968  1F9A  6C 4F 08           JMP (ADRS)      ;INDIRECT JMP
02969  1F9D              ;*********************************
02970  1F9D              ; TABLE OF ADDRESSING MODE SUBS
02971  1F9D              ;*********************************
02972  1F9D              ; MACHINE LANGUAGE ROUTINES
02973  1F9D              ;*********************************
02974  1F9D              SUBP   = *             ; MODES
02975  1F9D  9B 19       .WORD  PRTONE          ; 0  $00
02976  1F9F  9B 19       .WORD  PRTONE          ; 2  $02
02977  1FA1  B1 19       .WORD  PRTTWO          ; 4  $04
02978  1FA3  B1 19       .WORD  PRTTWO          ; 6  $06
02979  1FA5  B1 19       .WORD  PRTTWO          ; 8  $08






DISASSEMBLER64......PAGE 0059

LINE# LOC   CODE        LINE


02980  1FA7  B1 19       .WORD  PRTTWO          ; 10 $0A
02981  1FA9  D6 19       .WORD  PRTTHE          ; 12 $0C
02982  1FAB  D6 19       .WORD  PRTTHE          ; 14 $0E
02983  1FAD  D6 19       .WORD  PRTTHE          ; 16 $10
02984  1FAF  9B 19       .WORD  PRTONE          ; 18 $12
02985  1FB1  B1 19       .WORD  PRTTWO          ; 20 $14
02986  1FB3  B1 19       .WORD  PRTTWO          ; 22 $16
02987  1FB5  B1 19       .WORD  PRTTWO          ; 24 $18
02988  1FB7  D6 19       .WORD  PRTTHE          ; 26 $1A
02989  1FB9              ;*********************************
02990  1FB9              ; CODE ANALYSIS ROUTINES
02991  1FB9              ;*********************************
02992  1FB9              SUBS1  = *             ; MODES
02993  1FB9  92 17       .WORD  IMPONE          ; 0  $00
02994  1FBB  92 17       .WORD  IMPONE          ; 2  $02
02995  1FBD  0D 17       .WORD  IMMEDT          ; 4  $04
02996  1FBF  56 16       .WORD  ONEBYT          ; 6  $06
02997  1FC1  56 16       .WORD  ONEBYT          ; 8  $08
02998  1FC3  56 16       .WORD  ONEBYT          ; 10 $0A
02999  1FC5  8B 16       .WORD  TWOBYT          ; 12 $0C
03000  1FC7  8B 16       .WORD  TWOBYT          ; 14 $0E
03001  1FC9  8B 16       .WORD  TWOBYT          ; 16 $10
03002  1FCB  92 17       .WORD  IMPONE          ; 18 $12
03003  1FCD  C9 17       .WORD  RELATV          ; 20 $14
03004  1FCF  56 16       .WORD  ONEBYT          ; 22 $16
03005  1FD1  56 16       .WORD  ONEBYT          ; 24 $18
03006  1FD3  8B 16       .WORD  TWOBYT          ; 26 $1A
03007  1FD5              ;*********************************
03008  1FD5              ; FINAL PASS ADDRESSING MODES
03009  1FD5              ;*********************************
03010  1FD5              SUBS   = *             ; MODES
03011  1FD5  C7 16       .WORD  ILLEGL          ; 0  $00
03012  1FD7  08 17       .WORD  ACC             ; 2  $02
03013  1FD9  0D 17       .WORD  IMMEDT          ; 4  $04
03014  1FDB  44 17       .WORD  ZEROPG          ; 6  $06
03015  1FDD  47 17       .WORD  ZEROX           ; 8  $08
03016  1FDF  4D 17       .WORD  ZEROY           ; 10 $0A
03017  1FE1  54 17       .WORD  ABSLUT          ; 12 $0C
03018  1FE3  79 17       .WORD  ABSX            ; 14 $0E
03019  1FE5  7F 17       .WORD  ABSY            ; 16 $10
03020  1FE7  85 17       .WORD  IMPLID          ; 18 $12
03021  1FE9  C9 17       .WORD  RELATV          ; 20 $14
03022  1FEB  B4 17       .WORD  INDX            ; 22 $16
03023  1FED  BD 17       .WORD  INDY            ; 24 $18
03024  1FEF  9F 17       .WORD  INDRCT          ; 26 $1A
03025  1FF1              ;*********************************
03026  1FF1              ; LIST OF MNEMONICS
03027  1FF1              ;*********************************
03028  1FF1              MNAMES = *             ; MCODES
03029  1FF1  00          .BYTE  0,0,0           ; 0   $00
03029  1FF2  00 
03029  1FF3  00 
03030  1FF4  41 44 43    .BYTE  'ADC'           ; 3   $03
03031  1FF7  41 4E 44    .BYTE  'AND'           ; 6   $06
03032  1FFA  41 53 4C    .BYTE  'ASL'           ; 9   $09






DISASSEMBLER64......PAGE 0060

LINE# LOC   CODE        LINE


03033  1FFD  42 43 43    .BYTE  'BCC'           ; 12  $0C
03034  2000  42 43 53    .BYTE  'BCS'           ; 15  $0F
03035  2003  42 45 51    .BYTE  'BEQ'           ; 18  $12
03036  2006  42 49 54    .BYTE  'BIT'           ; 21  $15
03037  2009  42 4D 49    .BYTE  'BMI'           ; 24  $18
03038  200C  42 4E 45    .BYTE  'BNE'           ; 27  $1B
03039  200F  42 50 4C    .BYTE  'BPL'           ; 30  $1E
03040  2012  42 52 4B    .BYTE  'BRK'           ; 33  $21
03041  2015  42 56 43    .BYTE  'BVC'           ; 36  $24
03042  2018  42 56 53    .BYTE  'BVS'           ; 39  $27
03043  201B  43 4C 43    .BYTE  'CLC'           ; 42  $2A
03044  201E  43 4C 44    .BYTE  'CLD'           ; 45  $2D
03045  2021  43 4C 49    .BYTE  'CLI'           ; 48  $30
03046  2024  43 4C 56    .BYTE  'CLV'           ; 51  $33
03047  2027  43 4D 50    .BYTE  'CMP'           ; 54  $36
03048  202A  43 50 58    .BYTE  'CPX'           ; 57  $39
03049  202D  43 50 59    .BYTE  'CPY'           ; 60  $3C
03050  2030  44 45 43    .BYTE  'DEC'           ; 63  $3F
03051  2033  44 45 58    .BYTE  'DEX'           ; 66  $42
03052  2036  44 45 59    .BYTE  'DEY'           ; 69  $45
03053  2039  45 4F 52    .BYTE  'EOR'           ; 72  $48
03054  203C  49 4E 43    .BYTE  'INC'           ; 75  $4B
03055  203F  49 4E 58    .BYTE  'INX'           ; 78  $4E
03056  2042  49 4E 59    .BYTE  'INY'           ; 81  $51
03057  2045  4A 4D 50    .BYTE  'JMP'           ; 84  $54
03058  2048  4A 53 52    .BYTE  'JSR'           ; 87  $57
03059  204B  4C 44 41    .BYTE  'LDA'           ; 90  $5A
03060  204E  4C 44 58    .BYTE  'LDX'           ; 93  $5D
03061  2051  4C 44 59    .BYTE  'LDY'           ; 96  $60
03062  2054  4C 53 52    .BYTE  'LSR'           ; 99  $63
03063  2057  4E 4F 50    .BYTE  'NOP'           ; 102 $66
03064  205A  4F 52 41    .BYTE  'ORA'           ; 105 $69
03065  205D  50 48 41    .BYTE  'PHA'           ; 108 $6C
03066  2060  50 48 50    .BYTE  'PHP'           ; 111 $6F
03067  2063  50 4C 41    .BYTE  'PLA'           ; 114 $72
03068  2066  50 4C 50    .BYTE  'PLP'           ; 117 $75
03069  2069  52 4F 4C    .BYTE  'ROL'           ; 120 $78
03070  206C  52 4F 52    .BYTE  'ROR'           ; 123 $7B
03071  206F  52 54 49    .BYTE  'RTI'           ; 126 $7E
03072  2072  52 54 53    .BYTE  'RTS'           ; 129 $81
03073  2075  53 42 43    .BYTE  'SBC'           ; 132 $84
03074  2078  53 45 43    .BYTE  'SEC'           ; 135 $87
03075  207B  53 45 44    .BYTE  'SED'           ; 138 $8A
03076  207E  53 45 49    .BYTE  'SEI'           ; 141 $8D
03077  2081  53 54 41    .BYTE  'STA'           ; 144 $90
03078  2084  53 54 58    .BYTE  'STX'           ; 147 $93
03079  2087  53 54 59    .BYTE  'STY'           ; 150 $96
03080  208A  54 41 58    .BYTE  'TAX'           ; 153 $99
03081  208D  54 41 59    .BYTE  'TAY'           ; 156 $9C
03082  2090  54 53 58    .BYTE  'TSX'           ; 159 $9F
03083  2093  54 58 41    .BYTE  'TXA'           ; 162 $A2
03084  2096  54 58 53    .BYTE  'TXS'           ; 165 $A5
03085  2099  54 59 41    .BYTE  'TYA'           ; 168 $A8
03086  209C              ;*********************************
03087  209C              ; QUASI-OPCODES






DISASSEMBLER64......PAGE 0061

LINE# LOC   CODE        LINE


03088  209C              ;*********************************
03089  209C  41 53 4F    .BYTE  'ASO'           ; 171 $AB
03090  209F  52 4C 41    .BYTE  'RLA'           ; 174 $AE
03091  20A2  4C 53 45    .BYTE  'LSE'           ; 177 $B1
03092  20A5  52 52 41    .BYTE  'RRA'           ; 180 $B4
03093  20A8  41 58 53    .BYTE  'AXS'           ; 183 $B7
03094  20AB  4C 41 58    .BYTE  'LAX'           ; 186 $BA
03095  20AE  44 43 4D    .BYTE  'DCM'           ; 189 $BD
03096  20B1  49 4E 53    .BYTE  'INS'           ; 192 $C0
03097  20B4  41 4C 52    .BYTE  'ALR'           ; 195 $C3
03098  20B7  41 52 52    .BYTE  'ARR'           ; 198 $C6
03099  20BA  4F 41 4C    .BYTE  'OAL'           ; 201 $C9
03100  20BD  53 41 58    .BYTE  'SAX'           ; 204 $CC
03101  20C0  4E 4F 50    .BYTE  'NOP'           ; 207 $CF
03102  20C3  53 4B 42    .BYTE  'SKB'           ; 210 $D2
03103  20C6  53 4B 57    .BYTE  'SKW'           ; 213 $D5
03104  20C9              ;*********************************
03105  20C9              ; TABLE OF MNEMONIC CODES
03106  20C9              ;*********************************
03107  20C9              ;
03108  20C9              ;A MNEMONIC'S CODE IS ITS OFFSET
03109  20C9              ;    INTO MNAMES, THE LIST OF
03110  20C9              ;         MNEONIC NAMES.
03111  20C9              ;
03112  20C9              ;*********************************
03113  20C9              MCODES = *
03114  20C9              ;     0X  1X  2X  3X  4X  5X  6X  7X
03115  20C9              ; 0X  BRK ORA KIL SLO NOP ORA ASL SLO
03116  20C9  21          .BYTE  $21,$69,$00,$00,$00,$69,$09,$00
03116  20CA  69 
03116  20CB  00 
03116  20CC  00 
03116  20CD  00 
03116  20CE  69 
03116  20CF  09 
03116  20D0  00 
03117  20D1              ;     8X  9X  AX  BX  CX  DX  EX  FX
03118  20D1                                     ;PHP ORA ASL ANC NOP ORA A
SL SLO
03119  20D1  6F          .BYTE  $6F,$69,$09,$00,$00,$69,$09,$00
03119  20D2  69 
03119  20D3  09 
03119  20D4  00 
03119  20D5  00 
03119  20D6  69 
03119  20D7  09 
03119  20D8  00 
03120  20D9              ; 1X  BPL ORA KIL SLO NOP ORA ASL SLO
03121  20D9  1E          .BYTE  $1E,$69,$00,$00,$00,$69,$09,$00
03121  20DA  69 
03121  20DB  00 
03121  20DC  00 
03121  20DD  00 
03121  20DE  69 
03121  20DF  09 
03121  20E0  00 






DISASSEMBLER64......PAGE 0062

LINE# LOC   CODE        LINE


03122  20E1                                     ;CLC ORA NOP SLO NOP ORA A
SL SLO
03123  20E1  2A          .BYTE  $2A,$69,$00,$00,$00,$69,$09,$00
03123  20E2  69 
03123  20E3  00 
03123  20E4  00 
03123  20E5  00 
03123  20E6  69 
03123  20E7  09 
03123  20E8  00 
03124  20E9              ; 2X  JSR AND KIL RLA BIT AND ROL RLA
03125  20E9  57          .BYTE  $57,$06,$00,$00,$15,$06,$78,$00
03125  20EA  06 
03125  20EB  00 
03125  20EC  00 
03125  20ED  15 
03125  20EE  06 
03125  20EF  78 
03125  20F0  00 
03126  20F1                                     ;PLP ABD ROL ANC BIT AND R
OL RLA
03127  20F1  75          .BYTE  $75,$06,$78,$00,$15,$06,$78,$00
03127  20F2  06 
03127  20F3  78 
03127  20F4  00 
03127  20F5  15 
03127  20F6  06 
03127  20F7  78 
03127  20F8  00 
03128  20F9              ; 3X  BMI AND KIL RLA NOP AND ROL RLA
03129  20F9  18          .BYTE  $18,$06,$00,$00,$00,$06,$78,$00
03129  20FA  06 
03129  20FB  00 
03129  20FC  00 
03129  20FD  00 
03129  20FE  06 
03129  20FF  78 
03129  2100  00 
03130  2101              ;     SEC AND NOP RLA NOP AND ROL RLA
03131  2101  87          .BYTE  $87,$06,$00,$00,$00,$06,$78,$00
03131  2102  06 
03131  2103  00 
03131  2104  00 
03131  2105  00 
03131  2106  06 
03131  2107  78 
03131  2108  00 
03132  2109              ; 4X  RTI EOR KIL SRE NOP EOR LSR SRE
03133  2109  7E          .BYTE  $7E,$48,$00,$00,$00,$48,$63,$00
03133  210A  48 
03133  210B  00 
03133  210C  00 
03133  210D  00 
03133  210E  48 
03133  210F  63 
03133  2110  00 
03134  2111              ;     PHA EOR LSR ALR JMP EOR LSR SRE






DISASSEMBLER64......PAGE 0063

LINE# LOC   CODE        LINE


03135  2111  6C          .BYTE  $6C,$48,$63,$00,$54,$48,$63,$00
03135  2112  48 
03135  2113  63 
03135  2114  00 
03135  2115  54 
03135  2116  48 
03135  2117  63 
03135  2118  00 
03136  2119              ; 5X  BVC EOR KIL SRE NOP EOR LSR SRE
03137  2119  24          .BYTE  $24,$48,$00,$00,$00,$48,$63,$00
03137  211A  48 
03137  211B  00 
03137  211C  00 
03137  211D  00 
03137  211E  48 
03137  211F  63 
03137  2120  00 
03138  2121              ;     CLI EOR NOP SRE NOP EOR LSR SRE
03139  2121  30          .BYTE  $30,$48,$00,$00,$00,$48,$63,$00
03139  2122  48 
03139  2123  00 
03139  2124  00 
03139  2125  00 
03139  2126  48 
03139  2127  63 
03139  2128  00 
03140  2129              ; 6X  RTS ADC KIL RRA NOP ADC ROR RRA
03141  2129  81          .BYTE  $81,$03,$00,$00,$00,$03,$7B,$00
03141  212A  03 
03141  212B  00 
03141  212C  00 
03141  212D  00 
03141  212E  03 
03141  212F  7B 
03141  2130  00 
03142  2131              ;     PLA ADC ROR ARR JMP ADC ROR RRA
03143  2131  72          .BYTE  $72,$03,$7B,$00,$54,$03,$7B,$00
03143  2132  03 
03143  2133  7B 
03143  2134  00 
03143  2135  54 
03143  2136  03 
03143  2137  7B 
03143  2138  00 
03144  2139              ; 7X  BVS ADC KIL RRA NOP ADC ROR RRA
03145  2139  27          .BYTE  $27,$03,$00,$00,$00,$03,$7B,$00
03145  213A  03 
03145  213B  00 
03145  213C  00 
03145  213D  00 
03145  213E  03 
03145  213F  7B 
03145  2140  00 
03146  2141              ;     SEI ADC NOP RRA NOP ADC ROR RRA
03147  2141  8D          .BYTE  $8D,$03,$00,$00,$00,$03,$7B,$00






DISASSEMBLER64......PAGE 0064

LINE# LOC   CODE        LINE


03147  2142  03 
03147  2143  00 
03147  2144  00 
03147  2145  00 
03147  2146  03 
03147  2147  7B 
03147  2148  00 
03148  2149              ; 8X  NOP STA NOP SAX STY STA STX SAX
03149  2149  00          .BYTE  $00,$90,$00,$00,$96,$90,$93,$00
03149  214A  90 
03149  214B  00 
03149  214C  00 
03149  214D  96 
03149  214E  90 
03149  214F  93 
03149  2150  00 
03150  2151              ;     DEY NOP TXA XXA STY STA STX SAX
03151  2151  45          .BYTE  $45,$00,$A2,$00,$96,$90,$93,$00
03151  2152  00 
03151  2153  A2 
03151  2154  00 
03151  2155  96 
03151  2156  90 
03151  2157  93 
03151  2158  00 
03152  2159              ; 9X  BCC STA KIL AHX STY STA STX SAX 
03153  2159  0C          .BYTE  $0C,$90,$00,$00,$96,$90,$93,$00
03153  215A  90 
03153  215B  00 
03153  215C  00 
03153  215D  96 
03153  215E  90 
03153  215F  93 
03153  2160  00 
03154  2161              ;     TYA STA TXS TAS SHY STA SHX AHX
03155  2161  A8          .BYTE  $A8,$90,$A5,$00,$00,$90,$00,$00
03155  2162  90 
03155  2163  A5 
03155  2164  00 
03155  2165  00 
03155  2166  90 
03155  2167  00 
03155  2168  00 
03156  2169              ; AX  LDY LDA LDX LAX LDY LDA LDX LAX
03157  2169  60          .BYTE  $60,$5A,$5D,$00,$60,$5A,$5D,$00
03157  216A  5A 
03157  216B  5D 
03157  216C  00 
03157  216D  60 
03157  216E  5A 
03157  216F  5D 
03157  2170  00 
03158  2171              ;     TAY LDA TAX LAX LDY LDA LDX LAX
03159  2171  9C          .BYTE  $9C,$5A,$99,$00,$60,$5A,$5D,$00
03159  2172  5A 






DISASSEMBLER64......PAGE 0065

LINE# LOC   CODE        LINE


03159  2173  99 
03159  2174  00 
03159  2175  60 
03159  2176  5A 
03159  2177  5D 
03159  2178  00 
03160  2179              ; BX  BCS LDA KIL LAX LDY LDA LDX LAX
03161  2179  0F          .BYTE  $0F,$5A,$00,$00,$60,$5A,$5D,$00
03161  217A  5A 
03161  217B  00 
03161  217C  00 
03161  217D  60 
03161  217E  5A 
03161  217F  5D 
03161  2180  00 
03162  2181              ;     CLV LDA TSX LAS LDY LDA LDX LAX
03163  2181  33          .BYTE  $33,$5A,$9F,$00,$60,$5A,$5D,$00
03163  2182  5A 
03163  2183  9F 
03163  2184  00 
03163  2185  60 
03163  2186  5A 
03163  2187  5D 
03163  2188  00 
03164  2189              ; CX  CPY CMP NOP DCP CPY CMP DEC DCP
03165  2189  3C          .BYTE  $3C,$36,$00,$00,$3C,$36,$3F,$00
03165  218A  36 
03165  218B  00 
03165  218C  00 
03165  218D  3C 
03165  218E  36 
03165  218F  3F 
03165  2190  00 
03166  2191              ;     INY CMP DEX AXS CPY CMP DEC DCP
03167  2191  51          .BYTE  $51,$36,$42,$00,$3C,$36,$3F,$00
03167  2192  36 
03167  2193  42 
03167  2194  00 
03167  2195  3C 
03167  2196  36 
03167  2197  3F 
03167  2198  00 
03168  2199              ; DX  BNE CMP KIL DCP NOP CMP DEC DCP
03169  2199  1B          .BYTE  $1B,$36,$00,$00,$00,$36,$3F,$00
03169  219A  36 
03169  219B  00 
03169  219C  00 
03169  219D  00 
03169  219E  36 
03169  219F  3F 
03169  21A0  00 
03170  21A1              ;     CLD CMP NOP DCP NOP CMP DEC DCP
03171  21A1  2D          .BYTE  $2D,$36,$00,$00,$00,$36,$3F,$00
03171  21A2  36 
03171  21A3  00 






DISASSEMBLER64......PAGE 0066

LINE# LOC   CODE        LINE


03171  21A4  00 
03171  21A5  00 
03171  21A6  36 
03171  21A7  3F 
03171  21A8  00 
03172  21A9              ; EX  CPX SBC NOP ISC CPX SBC INC ISC
03173  21A9  39          .BYTE  $39,$84,$00,$00,$39,$84,$4B,$00
03173  21AA  84 
03173  21AB  00 
03173  21AC  00 
03173  21AD  39 
03173  21AE  84 
03173  21AF  4B 
03173  21B0  00 
03174  21B1              ;     INX SBC NOP SBC CPX SBC INC ISC
03175  21B1  4E          .BYTE  $4E,$84,$66,$00,$39,$84,$4B,$00
03175  21B2  84 
03175  21B3  66 
03175  21B4  00 
03175  21B5  39 
03175  21B6  84 
03175  21B7  4B 
03175  21B8  00 
03176  21B9              ; FX  BEQ SBC KIL ISC NOP SBC INC ISC
03177  21B9  12          .BYTE  $12,$84,$00,$00,$00,$84,$4B,$00
03177  21BA  84 
03177  21BB  00 
03177  21BC  00 
03177  21BD  00 
03177  21BE  84 
03177  21BF  4B 
03177  21C0  00 
03178  21C1              ;     SED SBC NOP ISC NOP SBC INC ISC
03179  21C1  8A          .BYTE  $8A,$84,$00,$00,$00,$84,$4B,$00
03179  21C2  84 
03179  21C3  00 
03179  21C4  00 
03179  21C5  00 
03179  21C6  84 
03179  21C7  4B 
03179  21C8  00 
03180  21C9              ;*********************************
03181  21C9              ; TABLE OF ADDRESSING MODE CODES
03182  21C9              ;*********************************
03183  21C9              ;
03184  21C9              ; AN ADDRESSING MODE'S CODE IS
03185  21C9              ; ITS OFFSET INTO SUBS, THE TABLE
03186  21C9              ; OF ADDRESSING MODE SUBROUTINES
03187  21C9              ;
03188  21C9              ; ILLEGL ; 0  $00
03189  21C9              ; ACC    ; 2  $02
03190  21C9              ; IMMEDT ; 4  $04
03191  21C9              ; ZEROPG ; 6  $06
03192  21C9              ; ZEROX  ; 8  $08
03193  21C9              ; ZEROY  ; 10 $0A






DISASSEMBLER64......PAGE 0067

LINE# LOC   CODE        LINE


03194  21C9              ; ABSLUT ; 12 $0C
03195  21C9              ; ABSX   ; 14 $0E
03196  21C9              ; ABSY   ; 16 $10
03197  21C9              ; IMPLID ; 18 $12
03198  21C9              ; RELATV ; 20 $14
03199  21C9              ; INDX   ; 22 $16
03200  21C9              ; INDY   ; 24 $18
03201  21C9              ; INDRCT ; 26 $1A
03202  21C9              ;*********************************
03203  21C9              MODES  = * 
03204  21C9              ; 0X   0  1 2 3 4 5 6 7
03205  21C9  12          .BYTE  18,22,0,0,0,6,6,0
03205  21CA  16 
03205  21CB  00 
03205  21CC  00 
03205  21CD  00 
03205  21CE  06 
03205  21CF  06 
03205  21D0  00 
03206  21D1              ;      8  9 A B C D E F
03207  21D1  12          .BYTE  18,4,2,0,0,12,12,0
03207  21D2  04 
03207  21D3  02 
03207  21D4  00 
03207  21D5  00 
03207  21D6  0C 
03207  21D7  0C 
03207  21D8  00 
03208  21D9              ; 1X   0  1 2 3 4 5 6 7
03209  21D9  14          .BYTE  20,24,0,0,0,8,8,0
03209  21DA  18 
03209  21DB  00 
03209  21DC  00 
03209  21DD  00 
03209  21DE  08 
03209  21DF  08 
03209  21E0  00 
03210  21E1              ;      8  9 A B C D E F
03211  21E1  12          .BYTE  18,16,0,0,0,14,14,0
03211  21E2  10 
03211  21E3  00 
03211  21E4  00 
03211  21E5  00 
03211  21E6  0E 
03211  21E7  0E 
03211  21E8  00 
03212  21E9              ; 2X   0  1 2 3 4 5 6 7
03213  21E9  0C          .BYTE  12,22,0,0,6,6,6,0
03213  21EA  16 
03213  21EB  00 
03213  21EC  00 
03213  21ED  06 
03213  21EE  06 
03213  21EF  06 
03213  21F0  00 






DISASSEMBLER64......PAGE 0068

LINE# LOC   CODE        LINE


03214  21F1              ;.BYTE 12,22,0,0,28,6,6,0
03215  21F1              ;      8  9 A B C D E F
03216  21F1  12          .BYTE  18,4,2,0,12,12,12,0
03216  21F2  04 
03216  21F3  02 
03216  21F4  00 
03216  21F5  0C 
03216  21F6  0C 
03216  21F7  0C 
03216  21F8  00 
03217  21F9              ;.BYTE 18,4,2,0,30,12,12,0
03218  21F9              ; 3X   0  1 2 3 4 5 6 7
03219  21F9  14          .BYTE  20,24,0,0,0,8,8,0
03219  21FA  18 
03219  21FB  00 
03219  21FC  00 
03219  21FD  00 
03219  21FE  08 
03219  21FF  08 
03219  2200  00 
03220  2201              ;      8  9 A B C D E F
03221  2201  12          .BYTE  18,16,0,0,0,14,14,0
03221  2202  10 
03221  2203  00 
03221  2204  00 
03221  2205  00 
03221  2206  0E 
03221  2207  0E 
03221  2208  00 
03222  2209              ; 4X   0  1 2 3 4 5 6 7
03223  2209  12          .BYTE  18,22,0,0,0,6,6,0
03223  220A  16 
03223  220B  00 
03223  220C  00 
03223  220D  00 
03223  220E  06 
03223  220F  06 
03223  2210  00 
03224  2211              ;      8  9 A B C D E F
03225  2211  12          .BYTE  18,4,2,0,12,12,12,0
03225  2212  04 
03225  2213  02 
03225  2214  00 
03225  2215  0C 
03225  2216  0C 
03225  2217  0C 
03225  2218  00 
03226  2219              ; 5X   0  1 2 3 4 5 6 7
03227  2219  14          .BYTE  20,24,0,0,0,8,8,0
03227  221A  18 
03227  221B  00 
03227  221C  00 
03227  221D  00 
03227  221E  08 
03227  221F  08 






DISASSEMBLER64......PAGE 0069

LINE# LOC   CODE        LINE


03227  2220  00 
03228  2221              ;      8  9 A B C D E F
03229  2221  12          .BYTE  18,16,0,0,0,14,14,0
03229  2222  10 
03229  2223  00 
03229  2224  00 
03229  2225  00 
03229  2226  0E 
03229  2227  0E 
03229  2228  00 
03230  2229              ; 6X   0  1 2 3 4 5 6 7
03231  2229  12          .BYTE  18,22,0,0,0,6,6,0
03231  222A  16 
03231  222B  00 
03231  222C  00 
03231  222D  00 
03231  222E  06 
03231  222F  06 
03231  2230  00 
03232  2231              ;      8  9 A B C D E F
03233  2231  12          .BYTE  18,4,2,0,26,12,12,0
03233  2232  04 
03233  2233  02 
03233  2234  00 
03233  2235  1A 
03233  2236  0C 
03233  2237  0C 
03233  2238  00 
03234  2239              ; 7X   0  1 2 3 4 5 6 7
03235  2239  14          .BYTE  20,24,0,0,0,8,8,0
03235  223A  18 
03235  223B  00 
03235  223C  00 
03235  223D  00 
03235  223E  08 
03235  223F  08 
03235  2240  00 
03236  2241              ;      8  9 A B C D E F
03237  2241  12          .BYTE  18,16,0,0,0,14,14,0
03237  2242  10 
03237  2243  00 
03237  2244  00 
03237  2245  00 
03237  2246  0E 
03237  2247  0E 
03237  2248  00 
03238  2249              ; 8X   0  1 2 3 4 5 6 7
03239  2249  00          .BYTE  0,22,0,0,6,6,6,0
03239  224A  16 
03239  224B  00 
03239  224C  00 
03239  224D  06 
03239  224E  06 
03239  224F  06 
03239  2250  00 






DISASSEMBLER64......PAGE 0070

LINE# LOC   CODE        LINE


03240  2251              ;      8  9 A B C D E F
03241  2251  12          .BYTE  18,0,18,0,12,12,12,0
03241  2252  00 
03241  2253  12 
03241  2254  00 
03241  2255  0C 
03241  2256  0C 
03241  2257  0C 
03241  2258  00 
03242  2259              ; 9X   0  1 2 3 4 5 6 7
03243  2259  14          .BYTE  20,24,0,0,8,8,10,0
03243  225A  18 
03243  225B  00 
03243  225C  00 
03243  225D  08 
03243  225E  08 
03243  225F  0A 
03243  2260  00 
03244  2261              ;      8  9 A B C D E F
03245  2261  12          .BYTE  18,16,18,0,0,14,0,0
03245  2262  10 
03245  2263  12 
03245  2264  00 
03245  2265  00 
03245  2266  0E 
03245  2267  00 
03245  2268  00 
03246  2269              ; AX   0  1 2 3 4 5 6 7
03247  2269  04          .BYTE  4,22,4,0,6,6,6,0
03247  226A  16 
03247  226B  04 
03247  226C  00 
03247  226D  06 
03247  226E  06 
03247  226F  06 
03247  2270  00 
03248  2271              ;      8  9 A B C D E F
03249  2271  12          .BYTE  18,4,18,0,12,12,12,0
03249  2272  04 
03249  2273  12 
03249  2274  00 
03249  2275  0C 
03249  2276  0C 
03249  2277  0C 
03249  2278  00 
03250  2279              ; BX   0  1 2 3 4 5 6 7
03251  2279  14          .BYTE  20,24,0,0,8,8,10,0
03251  227A  18 
03251  227B  00 
03251  227C  00 
03251  227D  08 
03251  227E  08 
03251  227F  0A 
03251  2280  00 
03252  2281              ;      8  9 A B C D E F






DISASSEMBLER64......PAGE 0071

LINE# LOC   CODE        LINE


03253  2281  12          .BYTE  18,16,18,0,14,14,16,0
03253  2282  10 
03253  2283  12 
03253  2284  00 
03253  2285  0E 
03253  2286  0E 
03253  2287  10 
03253  2288  00 
03254  2289              ; CX   0  1 2 3 4 5 6 7
03255  2289  04          .BYTE  4,22,0,0,6,6,6,0
03255  228A  16 
03255  228B  00 
03255  228C  00 
03255  228D  06 
03255  228E  06 
03255  228F  06 
03255  2290  00 
03256  2291              ;      8  9 A B C D E F
03257  2291  12          .BYTE  18,4,18,0,12,12,12,0
03257  2292  04 
03257  2293  12 
03257  2294  00 
03257  2295  0C 
03257  2296  0C 
03257  2297  0C 
03257  2298  00 
03258  2299              ; DX   0  1 2 3 4 5 6 7
03259  2299  14          .BYTE  20,24,0,0,0,8,8,0
03259  229A  18 
03259  229B  00 
03259  229C  00 
03259  229D  00 
03259  229E  08 
03259  229F  08 
03259  22A0  00 
03260  22A1              ;      8  9 A B C D E F
03261  22A1  12          .BYTE  18,16,0,0,0,14,14,0
03261  22A2  10 
03261  22A3  00 
03261  22A4  00 
03261  22A5  00 
03261  22A6  0E 
03261  22A7  0E 
03261  22A8  00 
03262  22A9              ; EX   0  1 2 3 4 5 6 7
03263  22A9  04          .BYTE  4,22,0,0,6,6,6,0
03263  22AA  16 
03263  22AB  00 
03263  22AC  00 
03263  22AD  06 
03263  22AE  06 
03263  22AF  06 
03263  22B0  00 
03264  22B1              ;      8  9 A B C D E F
03265  22B1  12          .BYTE  18,4,18,0,12,12,12,0






DISASSEMBLER64......PAGE 0072

LINE# LOC   CODE        LINE


03265  22B2  04 
03265  22B3  12 
03265  22B4  00 
03265  22B5  0C 
03265  22B6  0C 
03265  22B7  0C 
03265  22B8  00 
03266  22B9              ; FX   0  1 2 3 4 5 6 7
03267  22B9  14          .BYTE  20,24,0,0,0,8,8,0
03267  22BA  18 
03267  22BB  00 
03267  22BC  00 
03267  22BD  00 
03267  22BE  08 
03267  22BF  08 
03267  22C0  00 
03268  22C1              ;      8  9 A B C D E F
03269  22C1  12          .BYTE  18,16,0,0,0,14,14,0
03269  22C2  10 
03269  22C3  00 
03269  22C4  00 
03269  22C5  00 
03269  22C6  0E 
03269  22C7  0E 
03269  22C8  00 
03270  22C9              ;*********************************
03271  22C9              ;.FIL 0:SYM.ASM
03272  22C9              ;*********************************
03273  22C9              ;.END
03274  22C9              ;*********************************
03275  22C9              ; FILE SYMBOL.ASM
03276  22C9              ;*********************************
03277  22C9              ;
03278  22C9              ;        DISASSEMBLER64
03279  22C9              ;    SYMBOLIC DISASSEMBLER
03280  22C9              ;       BY DENTON MARLOWE
03281  22C9              ;
03282  22C9              ;  (C)1986 BY DENTON MARLOWE
03283  22C9              ;
03284  22C9              ;*********************************
03285  22C9              ; SYMBOLIC ROUTINES
03286  22C9              ;*********************************
03287  22C9              ; SYMBOLIC DISASSEMBLY OPTION
03288  22C9              ;*********************************
03289  22C9  A9 36       SOP    LDA #<MSS1      ;LOW BYTE MESSAGE
03290  22CB  A0 26              LDY #>MSS1      ;HIGH BYTE MESSAGE
03291  22CD  20 C4 13           JSR STRPNT      ;OUTPUT MESSAGE
03292  22D0              ;      JSR CRNO    ;GET KEY PRESS
03293  22D0  20 8C 13           JSR CRYS
03294  22D3  90 08              BCC SOP1        ;C=0 YES
03295  22D5              ;*********************************
03296  22D5              ; ABSOLUTE DISASSEMBLY SELECTED
03297  22D5              ;*********************************
03298  22D5  A9 00              LDA #$00        ;SET SYMBLOIC FLAG
03299  22D7  8D 38 08           STA SYMBOL      ;STORE FLAG






DISASSEMBLER64......PAGE 0073

LINE# LOC   CODE        LINE


03300  22DA  4C 26 23           JMP SY          ;FOR INTERNAL
03301  22DD              ;*********************************
03302  22DD              ; SYMBOLIC DISASSEMBLY SELECTED
03303  22DD              ;*********************************
03304  22DD  A9 01       SOP1   LDA #$01        ;SET SYMBOLIC FLAG
03305  22DF  8D 38 08           STA SYMBOL      ;STORE FLAG
03306  22E2              ;*********************************
03307  22E2              ; SETUP START OF TABLE POINTER
03308  22E2              ;*********************************
03309  22E2  A9 55              LDA #<STABLE
03310  22E4  8D 3B 08           STA SYMBOS
03311  22E7  8D 39 08           STA SYMBOP
03312  22EA  A9 30              LDA #>STABLE
03313  22EC  8D 3C 08           STA SYMBOS+1
03314  22EF  8D 3A 08           STA SYMBOP+1
03315  22F2              ;*********************************
03316  22F2              ; CHECK FOR SYMBOL TABLE OPTION
03317  22F2              ;*********************************
03318  22F2  A9 5A       SYTAB  LDA #<MSS2      ;LOW BYTE MESSAGE
03319  22F4  A0 26              LDY #>MSS2      ;HIGH BYTE MESSAGE
03320  22F6  20 C4 13           JSR STRPNT      ;OUTPUT MESSAGE
03321  22F9  20 99 13           JSR CRNO        ;GET KEY PRESS
03322  22FC  B0 28              BCS SY          ;C=1 NO
03323  22FE              ;*********************************
03324  22FE              ; APPEND SYMBOL TABLE
03325  22FE              ;*********************************
03326  22FE  A9 9E              LDA #<MSS4
03327  2300  A0 26              LDY #>MSS4
03328  2302  20 C4 13           JSR STRPNT
03329  2305  20 99 13           JSR CRNO
03330  2308  B0 0A              BCS SOP4
03331  230A  A9 D8              LDA #<UTABLE
03332  230C  8D 39 08           STA SYMBOP
03333  230F  A9 31              LDA #>UTABLE
03334  2311  8D 3A 08           STA SYMBOP+1
03335  2314              ;*********************************
03336  2314              ; GO AND LOAD TABLE
03337  2314              ;*********************************
03338  2314  20 B9 24    SOP4   JSR READXX      ;READ FILE
03339  2317  B0 0D              BCS SY          ;C=1 ERROR
03340  2319              ;*********************************
03341  2319              ; SETUP END OF TABLE POINTER
03342  2319              ;*********************************
03343  2319  AD 39 08           LDA SYMBOP      ;XREF POINTER
03344  231C  8D 3D 08           STA SYMBOE
03345  231F  AD 3A 08           LDA SYMBOP+1
03346  2322  8D 3E 08           STA SYMBOE+1
03347  2325  60                 RTS
03348  2326              ;*********************************
03349  2326              ; DEFAULT SYMBOL TABLE END
03350  2326              ;*********************************
03351  2326  A9 D8       SY     LDA #<UTABLE
03352  2328  8D 3D 08           STA SYMBOE
03353  232B  A9 31              LDA #>UTABLE
03354  232D  8D 3E 08           STA SYMBOE+1






DISASSEMBLER64......PAGE 0074

LINE# LOC   CODE        LINE


03355  2330  60                 RTS
03356  2331              ;*********************************
03357  2331              ; SET OR RESET SYMBOL TABLE
03358  2331              ;*********************************
03359  2331  AD 3B 08    SSET   LDA SYMBOS
03360  2334  8D 39 08           STA SYMBOP
03361  2337  AD 3C 08           LDA SYMBOS+1
03362  233A  8D 3A 08           STA SYMBOP+1
03363  233D  60                 RTS
03364  233E              ;*********************************
03365  233E              ; EQUATE TABLE SETUP
03366  233E              ;*********************************
03367  233E  AD 32 08    EQUINT LDA TABINE
03368  2341  8D 2E 08           STA TABINP
03369  2344  8D 30 08           STA TABINS
03370  2347  AD 33 08           LDA TABINE+1
03371  234A  8D 2F 08           STA TABINP+1
03372  234D  8D 31 08           STA TABINS+1
03373  2350  60                 RTS
03374  2351              ;*********************************
03375  2351              ; ENTRY POINT FOR ADDRESS
03376  2351              ;*********************************
03377  2351  AD 38 08    SYM    LDA SYMBOL
03378  2354  F0 43              BEQ SYMEND
03379  2356  AD 22 08           LDA SELECT      ;COPY SELECT
03380  2359  8D 45 08           STA WORKED      ;ADDRESS INTO
03381  235C  AD 23 08           LDA SELECT+1    ;WORKED
03382  235F  8D 46 08           STA WORKED+1
03383  2362  4C 6A 23           JMP SYM1        ;CHECK FOR MATCH
03384  2365              ;*********************************
03385  2365              ; ENTRY POINT FOR OPCODES
03386  2365              ;*********************************
03387  2365  AD 38 08    SYMOP  LDA SYMBOL
03388  2368  F0 2F              BEQ SYMEND
03389  236A              ;*********************************
03390  236A              ; COMPARE ADDRESS TO SYMBOL TABLE
03391  236A              ;*********************************
03392  236A  20 31 23    SYM1   JSR SSET
03393  236D  20 3A 24    SYM2   JSR GETC
03394  2370  8D 48 08           STA WORKER+1
03395  2373  20 31 24           JSR INCC
03396  2376  20 3A 24           JSR GETC
03397  2379  8D 47 08           STA WORKER
03398  237C              ;*********************************
03399  237C  38                 SEC             ;SET CARRY
03400  237D  AD 47 08           LDA WORKER
03401  2380  ED 45 08           SBC WORKED      ;SUB FROM LOW
03402  2383  8D 51 08           STA TEMP        ;STORE RESULT
03403  2386  AD 48 08           LDA WORKER+1
03404  2389  ED 46 08           SBC WORKED+1    ;SUB FROM HIGH
03405  238C  0D 51 08           ORA TEMP        ;OR RESULTS
03406  238F  F0 0A              BEQ MATCH       ;CHECK FOR MATCH
03407  2391  20 0D 24           JSR NEXTC       ;IF NOT NEXT
03408  2394  B0 03              BCS SYMEND      ;END OF TABLE?
03409  2396  4C 6D 23           JMP SYM2        ;NO CHECK NEXT






DISASSEMBLER64......PAGE 0075

LINE# LOC   CODE        LINE


03410  2399  18          SYMEND CLC             ;NO MATCHES CLEAR
03411  239A  60                 RTS             ;RETURN
03412  239B              ;*********************************
03413  239B              ; FOUND MATCH
03414  239B              ;*********************************
03415  239B  AD 12 08    MATCH  LDA PASS        ;CHECK PASS
03416  239E  CD 15 08           CMP CPASS       ;IS IT LAST
03417  23A1  F0 18              BEQ MATCHS      ;IF SO PRINT
03418  23A3  CD 16 08           CMP SPASS
03419  23A6  F0 3A              BEQ MATCHT
03420  23A8  20 45 1A           JSR RANGE       ;SYMBOL IN RANGE
03421  23AB  90 3F              BCC MATEXT      ;NO INTERNAL EQ
03422  23AD  20 31 24           JSR INCC        ;INC TO SYMBOL
03423  23B0  20 3A 24           JSR GETC        ;GET FIRST CHAR
03424  23B3  C9 20              CMP #$20        ;SPACE
03425  23B5  F0 03              BEQ MATONE      ;NOT EQUATE
03426  23B7  4C BC 1A           JMP PUTI        ;PUT IN EQUATE
03427  23BA  60          MATONE RTS             ;RETURN
03428  23BB              ;*********************************
03429  23BB              ; CHECK FOR SYMBOL+1
03430  23BB              ;*********************************
03431  23BB  20 31 24    MATCHS JSR INCC        ;INC TO LABEL
03432  23BE  20 3A 24           JSR GETC        ;GET CHARARCTER
03433  23C1  C9 20              CMP #$20        ;IS IT SPACE
03434  23C3  D0 1D              BNE MATCHT      ;IF NOT GO ON
03435  23C5  38                 SEC             ;SET CARRY
03436  23C6  AD 39 08           LDA SYMBOP      ;GET LOW POINT
03437  23C9  E9 09              SBC #$09        ;LAST SYMBOL
03438  23CB  48                 PHA             ;PUSH ON STACK
03439  23CC  AD 3A 08           LDA SYMBOP+1    ;GET HIGH POINT
03440  23CF  E9 00              SBC #$00        ;LAST SYMBOL
03441  23D1  A8                 TAY             ;PUT IN Y
03442  23D2  68                 PLA             ;GET LO POINT
03443  23D3  20 ED 23           JSR STRSYM      ;PRINT SYMBOL
03444  23D6  A9 2B              LDA #'+'         ;ASCII +
03445  23D8  20 1A 14           JSR PCHAR       ;PRINT IT
03446  23DB  A9 31              LDA #'1'         ;ASCII 1
03447  23DD  20 1A 14           JSR PCHAR       ;PRINT IT
03448  23E0  38                 SEC             ;C=1 SYMBOL
03449  23E1  60                 RTS             ;RETURN
03450  23E2              ;*********************************
03451  23E2  AD 39 08    MATCHT LDA SYMBOP      ;LOW BYTE LABEL
03452  23E5  AC 3A 08           LDY SYMBOP+1    ;HIGH BYTE LABEL
03453  23E8  20 ED 23           JSR STRSYM      ;PRINT LABEL
03454  23EB              ;*********************************
03455  23EB  38                 SEC             ;MATCH SET CARRY
03456  23EC  60          MATEXT RTS             ;RETURN
03457  23ED              ;*********************************
03458  23ED              ; PRINT SYMBOL
03459  23ED              ;*********************************
03460  23ED  85 02       STRSYM STA ZEROUR
03461  23EF  84 03              STY ZEROUR+1
03462  23F1  A0 00              LDY #$00
03463  23F3  B1 02       STRSY1 LDA (ZEROUR),Y
03464  23F5  F0 0A              BEQ SYEXIT






DISASSEMBLER64......PAGE 0076

LINE# LOC   CODE        LINE


03465  23F7  C9 20              CMP #$20
03466  23F9  F0 06              BEQ SYEXIT
03467  23FB  20 1A 14           JSR PCHAR
03468  23FE  C8                 INY
03469  23FF  D0 F2              BNE STRSY1
03470  2401  60          SYEXIT RTS
03471  2402  B1 02       FIXSYM LDA (ZEROUR),Y
03472  2404  F0 FB              BEQ SYEXIT
03473  2406  20 1A 14           JSR PCHAR
03474  2409  C8                 INY
03475  240A  4C 02 24           JMP FIXSYM
03476  240D              ;*********************************
03477  240D              ; INC SYMBOL ADDRESS TABLE POINTER
03478  240D              ;*********************************
03479  240D  18          NEXTC  CLC
03480  240E  AD 39 08           LDA SYMBOP
03481  2411  69 08              ADC #$08
03482  2413  8D 39 08           STA SYMBOP
03483  2416  AD 3A 08           LDA SYMBOP+1
03484  2419  69 00              ADC #$00
03485  241B  8D 3A 08           STA SYMBOP+1
03486  241E  CD 3E 08           CMP SYMBOE+1
03487  2421  90 0A              BCC COK
03488  2423  D0 0A              BNE NCOK
03489  2425  AD 39 08           LDA SYMBOP
03490  2428  CD 3D 08           CMP SYMBOE
03491  242B  B0 02              BCS NCOK
03492  242D  18          COK    CLC
03493  242E  60                 RTS
03494  242F  38          NCOK   SEC
03495  2430  60                 RTS
03496  2431              ;*********************************
03497  2431  EE 39 08    INCC   INC SYMBOP
03498  2434  D0 03              BNE *+5
03499  2436  EE 3A 08           INC SYMBOP+1
03500  2439  60                 RTS
03501  243A              ;*********************************
03502  243A              ; GET BYTE FROM ADDRESS TABLE
03503  243A              ;*********************************
03504  243A  AD 39 08    GETC   LDA SYMBOP
03505  243D  85 02              STA ZEROUR
03506  243F  AD 3A 08           LDA SYMBOP+1
03507  2442  85 03              STA ZEROUR+1
03508  2444  A0 00              LDY #$00
03509  2446  B1 02              LDA (ZEROUR),Y
03510  2448  60                 RTS
03511  2449              ;*********************************
03512  2449              ; PRINT EQUATE TABLE
03513  2449              ;*********************************
03514  2449  38          EQUPRT SEC
03515  244A  AD 30 08           LDA TABINS
03516  244D  ED 32 08           SBC TABINE
03517  2450  8D 51 08           STA TEMP
03518  2453  AD 31 08           LDA TABINS+1
03519  2456  ED 33 08           SBC TABINE+1






DISASSEMBLER64......PAGE 0077

LINE# LOC   CODE        LINE


03520  2459  0D 51 08           ORA TEMP
03521  245C  F0 55              BEQ EQUEND
03522  245E  20 67 1B           JSR SORT
03523  2461  20 6A 18           JSR COMENT
03524  2464  20 32 1A           JSR PRTOTH
03525  2467  A9 30              LDA #<EQUATE
03526  2469  A0 27              LDY #>EQUATE
03527  246B  20 C4 13           JSR STRPNT
03528  246E  20 07 13           JSR NEWLIN
03529  2471  20 6A 18           JSR COMENT
03530  2474  20 0C 1B    EQUOP  JSR GETI
03531  2477  8D 45 08           STA WORKED
03532  247A  20 03 1B           JSR INCI
03533  247D  20 0C 1B           JSR GETI
03534  2480  8D 46 08           STA WORKED+1
03535  2483  20 32 1A           JSR PRTOTH
03536  2486  20 65 23           JSR SYMOP
03537  2489  B0 03              BCS EQUOP1
03538  248B  20 C8 18           JSR PWORK
03539  248E  A9 3D       EQUOP1 LDA #'='
03540  2490  20 1A 14           JSR PCHAR
03541  2493  A9 24              LDA #'$'
03542  2495  20 1A 14           JSR PCHAR
03543  2498  20 CB 18           JSR PWORKD
03544  249B  20 07 13           JSR NEWLIN
03545  249E              ;*********************************
03546  249E  20 03 1B           JSR INCI
03547  24A1  AD 2F 08           LDA TABINP+1
03548  24A4  CD 33 08           CMP TABINE+1
03549  24A7  90 CB              BCC EQUOP
03550  24A9  D0 08              BNE EQUEND
03551  24AB  AD 2E 08           LDA TABINP
03552  24AE  CD 32 08           CMP TABINE
03553  24B1  90 C1              BCC EQUOP
03554  24B3              ;*********************************
03555  24B3  20 6A 18    EQUEND JSR COMENT
03556  24B6  4C A3 1A           JMP RESINT
03557  24B9              ;*********************************
03558  24B9              ; READ CROSS REFERENCE SEQ FILE
03559  24B9              ;      INTO SYMBOL TABLE
03560  24B9              ;*********************************
03561  24B9              ; READ FILE NAME DEFAULT ON CR
03562  24B9              ;*********************************
03563  24B9  A9 80       READXX LDA #<MSS3
03564  24BB  A0 26              LDY #>MSS3
03565  24BD  20 C4 13           JSR STRPNT
03566  24C0  20 E4 FF    SOP2   JSR GETIN
03567  24C3  F0 FB              BEQ SOP2
03568  24C5  C9 30              CMP #'0'
03569  24C7  F0 04              BEQ SOP3
03570  24C9  C9 31              CMP #'1'
03571  24CB  D0 F3              BNE SOP2
03572  24CD  20 D2 FF    SOP3   JSR CHROUT
03573  24D0  8D E6 08           STA TEXTER
03574  24D3              ;*********************************






DISASSEMBLER64......PAGE 0078

LINE# LOC   CODE        LINE


03575  24D3  A9 C2              LDA #<LOADF
03576  24D5  A0 26              LDY #>LOADF
03577  24D7  20 C4 13           JSR STRPNT
03578  24DA              ;*********************************
03579  24DA  20 25 13           JSR INSTNG
03580  24DD  F0 20              BEQ READXF
03581  24DF  98                 TYA
03582  24E0  48                 PHA
03583  24E1  20 B4 0C           JSR INITD
03584  24E4  68                 PLA
03585  24E5  A8                 TAY
03586  24E6  A2 00              LDX #$00
03587  24E8  BD 32 26    XFILE1 LDA NAMS,X
03588  24EB  99 5C 08           STA BUF,Y
03589  24EE  C8                 INY
03590  24EF  E8                 INX
03591  24F0  E0 04              CPX #$04
03592  24F2  D0 F4              BNE XFILE1
03593  24F4  98                 TYA
03594  24F5  A0 08              LDY #>BUF
03595  24F7  A2 5C              LDX #<BUF
03596  24F9  20 BD FF           JSR SETNAM
03597  24FC  4C 08 25           JMP REOPEN
03598  24FF              ;*********************************
03599  24FF              ; DEFAULT FILENAME XRFF0000
03600  24FF              ;********************************
03601  24FF  A9 0E       READXF LDA #$0E
03602  2501  A0 26              LDY #>NAME
03603  2503  A2 28              LDX #<NAME
03604  2505  20 BD FF           JSR SETNAM
03605  2508              ;*********************************
03606  2508              ; OPEN FILE
03607  2508              ;********************************
03608  2508  A9 03       REOPEN LDA #$03
03609  250A  A2 08              LDX #$08
03610  250C  A0 03              LDY #$03
03611  250E  20 BA FF           JSR SETLFS
03612  2511  20 C0 FF           JSR OPEN
03613  2514              ;********************************
03614  2514              ; CHECK FOR DISK ERROR
03615  2514              ;*********************************
03616  2514  20 CD 12           JSR DISERR
03617  2517  B0 3F              BCS QUITXX
03618  2519              ;*********************************
03619  2519              ; OUTPUT LOADING MESSAGE
03620  2519              ;*********************************
03621  2519  A9 E0              LDA #<LOADM     ;MSG LOW
03622  251B  A0 26              LDY #>LOADM     ;MSG HIGH
03623  251D  20 C4 13           JSR STRPNT      ;OUTPUT MSG
03624  2520              ;*********************************
03625  2520  A9 00              LDA #$00        ;COL COUNTER
03626  2522  8D 51 08           STA TEMP
03627  2525              ;*********************************
03628  2525              ; INPUT AND LOAD SYMBOL TABLE
03629  2525              ;*********************************






DISASSEMBLER64......PAGE 0079

LINE# LOC   CODE        LINE


03630  2525  20 69 25    READX  JSR READS       ;INPUT SYMBOL
03631  2528  20 E7 25           JSR PUTC
03632  252B  20 0F 26           JSR LINES       ;SCREEN OUT
03633  252E  20 E1 FF           JSR STOP
03634  2531  F0 05              BEQ QUITX
03635  2533  20 B7 FF           JSR READST
03636  2536  F0 ED              BEQ READX
03637  2538              ;*********************************
03638  2538              ;    CLOSE OPEN FILE
03639  2538              ;*********************************
03640  2538  A9 03       QUITX  LDA #$03
03641  253A  20 C3 FF           JSR CLOSE
03642  253D  20 CC FF           JSR CLRCHN
03643  2540  20 FC 18           JSR CRLF
03644  2543              ;*********************************
03645  2543              ; SET END OF TABLE
03646  2543              ;*********************************
03647  2543  AD 39 08           LDA SYMBOP
03648  2546  8D 3D 08           STA SYMBOE
03649  2549  AD 3A 08           LDA SYMBOP+1
03650  254C  8D 3E 08           STA SYMBOE+1
03651  254F              ;*********************************
03652  254F              ; OUTPUT LOADED MESSAGE
03653  254F              ;*********************************
03654  254F  A9 FE              LDA #<LOADC
03655  2551  A0 26              LDY #>LOADC
03656  2553  20 C4 13           JSR STRPNT
03657  2556  18                 CLC
03658  2557  60                 RTS
03659  2558              ;*********************************
03660  2558              ; OUTPUT ERROR MESSAGE
03661  2558              ;*********************************
03662  2558  A9 03       QUITXX LDA #$03
03663  255A  20 C3 FF           JSR CLOSE
03664  255D  20 CC FF           JSR CLRCHN
03665  2560  A9 15              LDA #<LOADE
03666  2562  A0 27              LDY #>LOADE
03667  2564  20 C4 13           JSR STRPNT
03668  2567  38                 SEC
03669  2568  60                 RTS
03670  2569              ;*********************************
03671  2569              ; READ SYMBOL FROM FILE
03672  2569              ;*********************************
03673  2569  A2 03       READS  LDX #$03        ;FILE NUMBER
03674  256B  20 C6 FF           JSR CHKIN       ;FILE IS INPUT
03675  256E  A0 02              LDY #$02        ;COUNTER
03676  2570  20 CF FF           JSR CHRIN       ;INPUT CHAR
03677  2573  99 DA 08           STA SYMBUF,Y    ;1ST CHAR
03678  2576  20 D2 FF           JSR CHROUT      ;PRITN IT
03679  2579  C8                 INY             ;INC POINTER
03680  257A  20 CF FF    READY  JSR CHRIN       ;NEXT CHAR
03681  257D  99 DA 08           STA SYMBUF,Y    ;STORE
03682  2580  20 D2 FF           JSR CHROUT      ;PRINT IT
03683  2583  C8                 INY             ;INC OFFSET
03684  2584  C0 08              CPY #$08        ;8 IS FOR NULL






DISASSEMBLER64......PAGE 0080

LINE# LOC   CODE        LINE


03685  2586  D0 F2              BNE READY       ;BRANCH IF NOT
03686  2588  A9 00              LDA #$00        ;NULL MARKER
03687  258A  99 DA 08           STA SYMBUF,Y    ;STORE AT END
03688  258D              ;*********************************
03689  258D  20 0E 19           JSR SPACE       ;PRINT SPACE
03690  2590  20 D9 18           JSR DOLLAR      ;PRINT $ SIGN
03691  2593              ;*********************************
03692  2593  AD E6 08           LDA TEXTER
03693  2596  C9 30              CMP #'0'
03694  2598  F0 2F              BEQ STDREF
03695  259A              ;*********************************
03696  259A  A0 00              LDY #$00
03697  259C  20 A9 25           JSR XGET
03698  259F  C8                 INY
03699  25A0  20 A9 25           JSR XGET
03700  25A3  20 CF FF           JSR CHRIN       ;GET $0D
03701  25A6  4C CC FF           JMP CLRCHN
03702  25A9              ;*********************************
03703  25A9  20 CF FF    XGET   JSR CHRIN
03704  25AC  20 D2 FF           JSR CHROUT
03705  25AF  20 75 13           JSR BINARY
03706  25B2  0A                 ASL A
03707  25B3  0A                 ASL A
03708  25B4  0A                 ASL A
03709  25B5  0A                 ASL A
03710  25B6  99 DA 08           STA SYMBUF,Y
03711  25B9  20 CF FF           JSR CHRIN
03712  25BC  20 D2 FF           JSR CHROUT
03713  25BF  20 75 13           JSR BINARY
03714  25C2  19 DA 08           ORA SYMBUF,Y
03715  25C5  99 DA 08           STA SYMBUF,Y
03716  25C8  60                 RTS
03717  25C9              ;*********************************
03718  25C9  A0 00       STDREF LDY #$00        ;ZERO OFFSET
03719  25CB  20 CF FF           JSR CHRIN       ;HIGH BYTES
03720  25CE  99 DA 08           STA SYMBUF,Y    ;
03721  25D1  8C 54 08           STY SAVY        ;
03722  25D4  20 AE 13           JSR PRBYT       ;
03723  25D7  AC 54 08           LDY SAVY        ;
03724  25DA  C8                 INY             ;
03725  25DB  20 CF FF           JSR CHRIN       ;LOW BYTE
03726  25DE  99 DA 08           STA SYMBUF,Y    ;
03727  25E1  20 AE 13           JSR PRBYT       ;
03728  25E4  4C CC FF           JMP CLRCHN      ;KEYBOARD INPUT
03729  25E7              ;*********************************
03730  25E7              ; MOVE SYMBOL FROM BUFFER TO TABLE
03731  25E7              ;*********************************
03732  25E7  A0 00       PUTC   LDY #$00
03733  25E9  AD 39 08           LDA SYMBOP
03734  25EC  85 02              STA ZEROUR
03735  25EE  AD 3A 08           LDA SYMBOP+1
03736  25F1  85 03              STA ZEROUR+1
03737  25F3  B9 DA 08    PUT    LDA SYMBUF,Y
03738  25F6  91 02              STA (ZEROUR),Y
03739  25F8  C8                 INY






DISASSEMBLER64......PAGE 0081

LINE# LOC   CODE        LINE


03740  25F9  C0 09              CPY #$09
03741  25FB  D0 F6              BNE PUT
03742  25FD  18                 CLC
03743  25FE  AD 39 08           LDA SYMBOP
03744  2601  69 09              ADC #$09
03745  2603  8D 39 08           STA SYMBOP
03746  2606  AD 3A 08           LDA SYMBOP+1
03747  2609  69 00              ADC #$00
03748  260B  8D 3A 08           STA SYMBOP+1
03749  260E  60                 RTS
03750  260F              ;*********************************
03751  260F              ; OUTPUT SYMBOL IN 4 COLUMNS
03752  260F              ;*********************************
03753  260F  EE 51 08    LINES  INC TEMP
03754  2612  A9 03              LDA #$03
03755  2614  CD 51 08           CMP TEMP
03756  2617  F0 05              BEQ RESET
03757  2619  A9 2E              LDA #'.'
03758  261B  4C D2 FF           JMP CHROUT
03759  261E  A9 00       RESET  LDA #$00
03760  2620  8D 51 08           STA TEMP
03761  2623  A9 0D              LDA #$0D
03762  2625  4C D2 FF           JMP CHROUT
03763  2628              ;*********************************
03764  2628              ;   COMMAND MESSAGES
03765  2628              ;*********************************
03766  2628  30 3A       NAME   .BYTE '0:XRLL0000'
03767  2632  2C 53       NAMS   .BYTE ',S,R'
03768  2636              ;*********************************
03769  2636  0D          MSS1   .BYTE $0D
03770  2637              ; .BYTE 'SYMBOLIC DISASSEMBLY (Y OR N/CR)? '
03771  2637  53 59              .BYTE 'SYMBOLIC DISASSEMBLY (Y/CR OR N)? '

03772  2659  00                 .BYTE 0
03773  265A  0D          MSS2   .BYTE $0D
03774  265B  4C 4F              .BYTE 'LOAD USER SYMBOL TABLE (Y OR N/CR)?
 '
03775  267F  00                 .BYTE 0
03776  2680  0D          MSS3   .BYTE $0D
03777  2681  46 4F              .BYTE 'FORMAT 0=STANDARD 1=ASCII : '
03778  269D  00                 .BYTE 0
03779  269E  0D          MSS4   .BYTE $0D
03780  269F  41 50              .BYTE 'APPEND DEFAULT TABLE (Y OR N/CR)? '

03781  26C1  00                 .BYTE 0
03782  26C2  0D          LOADF  .BYTE $0D
03783  26C3  53 59       .BYTE  'SYMBOL TABLE(CR OR D:NAME): '
03784  26DF  00          .BYTE  0
03785  26E0  0D          LOADM  .BYTE $0D,$0D
03785  26E1  0D 
03786  26E2  52 45       .BYTE  'READING SYMBOL TABLE FILE'
03787  26FB  0D          .BYTE  $0D,$0D
03787  26FC  0D 
03788  26FD  00          .BYTE  0
03789  26FE  0D          LOADC  .BYTE $0D
03790  26FF  53 59       .BYTE  'SYMBOL TABLE LOADED'
03791  2712  0D          .BYTE  $0D,$0D
03791  2713  0D 






DISASSEMBLER64......PAGE 0082

LINE# LOC   CODE        LINE


03792  2714  00          .BYTE  0
03793  2715  0D          LOADE  .BYTE $0D
03794  2716  53 59       .BYTE  'SYMBOL TABLE NOT LOADED'
03795  272D  0D          .BYTE  $0D,$0D
03795  272E  0D 
03796  272F  00          .BYTE  0
03797  2730              ;*********************************
03798  2730  3B 20       EQUATE .BYTE '; EXTERNAL ADDRESS EQUATES'
03799  274A  00                 .BYTE 0
03800  274B              ;*********************************
03801  274B              ; PATCH CODE AREA
03802  274B              ;*********************************
03803  274B              *=*+$0800
03804  2F4B              ;*********************************
03805  2F4B              ; BIT INSTRUCTION CODING
03806  2F4B              ;*********************************
03807  2F4B              BITOPT = *
03808  2F4B  A9 0D              LDA #<MSB1      ;TABLE TYPE
03809  2F4D  A0 11              LDY #>MSB1
03810  2F4F  20 C4 13           JSR STRPNT
03811  2F52  20 E4 FF    BOP0   JSR GETIN
03812  2F55  F0 FB              BEQ BOP0
03813  2F57  C9 30              CMP #'0'        ;STANDARD
03814  2F59  F0 12              BEQ BSC
03815  2F5B  C9 31              CMP #'1'        ;$2C ABS
03816  2F5D  F0 0E              BEQ BSC 
03817  2F5F  C9 32              CMP #'2'        ;$24 ZP
03818  2F61  F0 0A              BEQ BSC
03819  2F63  C9 33              CMP #'3'        ;$2C AND $24
03820  2F65  F0 06              BEQ BSC
03821  2F67  C9 0D              CMP #$0D        ;STANDARD
03822  2F69  D0 E7              BNE BOP0
03823  2F6B  A9 30              LDA #'0'
03824  2F6D              BSC    = *
03825  2F6D  48                 PHA             ;STASH INPUT
03826  2F6E  20 D2 FF           JSR CHROUT      ;OUTPUT FEEDBACK
03827  2F71  68                 PLA             ;POP INPUT
03828  2F72  49 30              EOR #$30        ;MAKE A NUMBER
03829  2F74  8D 78 2F           STA BITFLG      ;SET FLAG
03830  2F77  60                 RTS
03831  2F78              ;*********************************
03832  2F78              ; BIT INSTRUCTION CODING FLAG
03833  2F78              ;*********************************
03834  2F78              BITFLG = *
03835  2F78  AA                 .BYTE $AA
03836  2F79              ;*********************************
03837  2F79              
03838  2F79              ;*********************************
03839  2F79              ; .FIL DIRECTIVE FILE NAME BUFFER
03840  2F79              ;*********************************
03841  2F79  AA          FVERON .BYTE $AA
03842  2F7A  AA          FCHARS .BYTE $AA
03843  2F7B              FILBUF = *
03844  2F7B  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
03844  2F7C  AA 






DISASSEMBLER64......PAGE 0083

LINE# LOC   CODE        LINE


03844  2F7D  AA 
03844  2F7E  AA 
03844  2F7F  AA 
03844  2F80  AA 
03844  2F81  AA 
03844  2F82  AA 
03845  2F83  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
03845  2F84  AA 
03845  2F85  AA 
03845  2F86  AA 
03845  2F87  AA 
03845  2F88  AA 
03845  2F89  AA 
03845  2F8A  AA 
03846  2F8B  AA                 .BYTE $AA,$AA,$AA,$AA
03846  2F8C  AA 
03846  2F8D  AA 
03846  2F8E  AA 
03847  2F8F              ;
03848  2F8F  2E 46       FILDIR .BYTE '.FIL ',$00
03848  2F94  00 
03849  2F95              ;*********************************
03850  2F95              ; OUTPUT:
03851  2F95              ;
03852  2F95              ; COMMENT LINE
03853  2F95              ; .FIL FILENAME OF NEXT VERSION
03854  2F95              ; COMMENT LINE
03855  2F95              ;
03856  2F95              ;*********************************
03857  2F95              OUTFIL = *
03858  2F95              ;*********************************
03859  2F95              ; INCREMENET FILE VERSON PETASCII
03860  2F95              ; $30,$31,$32 ETC
03861  2F95              ;*********************************
03862  2F95  AD C2 08           LDA VERSON
03863  2F98  8D 79 2F           STA FVERON
03864  2F9B              ;*********************************
03865  2F9B              ; COPY NUMBER CHARACTERS IN FILENAME
03866  2F9B              ;*********************************
03867  2F9B  AD C3 08           LDA NCHARS
03868  2F9E  8D 7A 2F           STA FCHARS
03869  2FA1              ;*********************************
03870  2FA1              ; COPY FILE NAME TO FILBUF
03871  2FA1              ;*********************************
03872  2FA1  A2 00              LDX #$00
03873  2FA3              FLOOP  = *
03874  2FA3  BD C4 08           LDA NBUF,X
03875  2FA6  C9 2C              CMP #','
03876  2FA8  F0 06              BEQ FLOOQ
03877  2FAA  9D 7B 2F           STA FILBUF,X
03878  2FAD  E8                 INX
03879  2FAE  D0 F3              BNE FLOOP
03880  2FB0              ;
03881  2FB0              FLOOQ  = *
03882  2FB0  AD 79 2F           LDA FVERON






DISASSEMBLER64......PAGE 0084

LINE# LOC   CODE        LINE


03883  2FB3  C9 31              CMP #'1'
03884  2FB5  F0 01              BEQ FLOOW
03885  2FB7  CA                 DEX
03886  2FB8              ;
03887  2FB8              FLOOW  = *
03888  2FB8  AD 79 2F           LDA FVERON
03889  2FBB  9D 7B 2F           STA FILBUF,X
03890  2FBE  E8                 INX
03891  2FBF  A9 00              LDA #$00
03892  2FC1  9D 7B 2F           STA FILBUF,X
03893  2FC4              ;*********************************
03894  2FC4              ; OUTPUT COMMENT LINE
03895  2FC4              ;*********************************
03896  2FC4              ; JSR NEWLIN   ;PRINT BYTE
03897  2FC4  20 70 18           JSR COMET       ;COMENT LINE
03898  2FC7  20 07 13           JSR NEWLIN      ;PRINT BYTE
03899  2FCA              ;*********************************
03900  2FCA              ; OUTPUT .FIL DIRECTIVE
03901  2FCA              ;*********************************
03902  2FCA  20 32 1A           JSR PRTOTH      ;PRINT LINE DATA
03903  2FCD  A9 8F              LDA #<FILDIR    ;.FIL
03904  2FCF  A0 2F              LDY #>FILDIR    ;
03905  2FD1  20 C4 13           JSR STRPNT
03906  2FD4  A9 7B              LDA #<FILBUF
03907  2FD6  A0 2F              LDY #>FILBUF
03908  2FD8  20 C4 13           JSR STRPNT
03909  2FDB              ;*********************************
03910  2FDB              ; FINAL NEWLINE
03911  2FDB              ;*********************************
03912  2FDB  20 07 13           JSR NEWLIN
03913  2FDE  60                 RTS
03914  2FDF              ;*********************************
03915  2FDF              ; SAVE A COPY OF PROGRAM FILE NAME
03916  2FDF              ;*********************************
03917  2FDF              NUMPFL = $AA
03918  2FDF              BUFPFL = *
03919  2FDF  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
03919  2FE0  AA 
03919  2FE1  AA 
03919  2FE2  AA 
03919  2FE3  AA 
03919  2FE4  AA 
03919  2FE5  AA 
03919  2FE6  AA 
03920  2FE7  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
03920  2FE8  AA 
03920  2FE9  AA 
03920  2FEA  AA 
03920  2FEB  AA 
03920  2FEC  AA 
03920  2FED  AA 
03920  2FEE  AA 
03921  2FEF  AA                 .BYTE $AA,$AA,$AA,$AA
03921  2FF0  AA 
03921  2FF1  AA 






DISASSEMBLER64......PAGE 0085

LINE# LOC   CODE        LINE


03921  2FF2  AA 
03922  2FF3              ;*********************************
03923  2FF3              ;SAVE A COPY OF PROGRAM FILE NAME
03924  2FF3              ;*********************************
03925  2FF3              PFILEH = *
03926  2FF3  84 AA              STY NUMPFL
03927  2FF5  A2 00              LDX #$00
03928  2FF7              PFILEI = *
03929  2FF7  BD 5C 08           LDA BUF,X
03930  2FFA  9D DF 2F           STA BUFPFL,X
03931  2FFD  E8                 INX
03932  2FFE  E4 AA              CPX NUMPFL
03933  3000  D0 F5              BNE PFILEI
03934  3002  A9 00              LDA #$00
03935  3004  9D DF 2F           STA BUFPFL,X
03936  3007  60                 RTS
03937  3008              ;*********************************
03938  3008              ; OUTPUT .OPT LIST DIRECTIVE
03939  3008              ;*********************************
03940  3008  2E 50       MSGPGE .BYTE '.PAGE ',$00
03940  300E  00 
03941  300F              ;*********************************
03942  300F              ; OUTPUT .OPT LIST DIRECTIVE
03943  300F              ;*********************************
03944  300F              OPTPAG = *
03945  300F              ;*********************************
03946  300F              ; OUTPUT COMMENT LINE
03947  300F              ;*********************************
03948  300F  20 07 13           JSR NEWLIN      ;PRINT BYTE
03949  3012  20 70 18           JSR COMET       ;COMENT LINE
03950  3015  20 07 13           JSR NEWLIN      ;PRINT BYTE
03951  3018              ;*********************************
03952  3018              ; OUTPUT .PAGE DIRECTIVE
03953  3018              ;*********************************
03954  3018  20 32 1A           JSR PRTOTH      ;PRINT LINE DATA
03955  301B  A9 08              LDA #<MSGPGE    ;.PAGE
03956  301D  A0 30              LDY #>MSGPGE    ;
03957  301F  20 C4 13           JSR STRPNT
03958  3022  A9 27              LDA #'''
03959  3024  20 1A 14           JSR PCHAR
03960  3027              ;
03961  3027  A9 DF              LDA #<BUFPFL    ;FILE NAME
03962  3029  A0 2F              LDY #>BUFPFL    ;
03963  302B  20 C4 13           JSR STRPNT
03964  302E              ;
03965  302E  A9 27              LDA #'''
03966  3030  20 1A 14           JSR PCHAR
03967  3033              ;*********************************
03968  3033              ; FINAL NEWLINE
03969  3033              ;*********************************
03970  3033  20 07 13           JSR NEWLIN
03971  3036  60                 RTS
03972  3037              ;*********************************
03973  3037              ; OUTPUT .OPT LIST DIRECTIVE
03974  3037              ;*********************************






DISASSEMBLER64......PAGE 0086

LINE# LOC   CODE        LINE


03975  3037  2E 4F       MSGOPT .BYTE '.OPT LIST',$00
03975  3040  00 
03976  3041              ;*********************************
03977  3041              ; OUTPUT .OPT LIST DIRECTIVE
03978  3041              ;*********************************
03979  3041              OPTDIR = *
03980  3041              ;*********************************
03981  3041              ; OUTPUT .FIL DIRECTIVE
03982  3041              ;*********************************
03983  3041  20 32 1A           JSR PRTOTH      ;PRINT LINE DATA
03984  3044  A9 37              LDA #<MSGOPT    ;.FIL
03985  3046  A0 30              LDY #>MSGOPT    ;
03986  3048  20 C4 13           JSR STRPNT
03987  304B              ;*********************************
03988  304B              ; OUTPUT COMMENT LINE
03989  304B              ;*********************************
03990  304B  20 07 13           JSR NEWLIN      ;PRINT BYTE
03991  304E  20 70 18           JSR COMET       ;COMENT LINE
03992  3051              ;*********************************
03993  3051              ; FINAL NEWLINE
03994  3051              ;*********************************
03995  3051  20 07 13           JSR NEWLIN
03996  3054  60                 RTS
03997  3055              ;*********************************
03998  3055              ; SYMBOL TABLE
03999  3055              ;*********************************
04000  3055              ;  KERNAL JUMP TABLE
04001  3055              ;*********************************
04002  3055              STABLE = *
04003  3055  FF                 .BYTE $FF,$80,'IDBYTE',0
04003  3056  80 
04003  3057  49 44 
04003  305D  00 
04004  305E  FF                 .BYTE $FF,$81,'CINT  ',0
04004  305F  81 
04004  3060  43 49 
04004  3066  00 
04005  3067  FF                 .BYTE $FF,$84,'IOINIT',0
04005  3068  84 
04005  3069  49 4F 
04005  306F  00 
04006  3070  FF                 .BYTE $FF,$87,'RAMTAS',0
04006  3071  87 
04006  3072  52 41 
04006  3078  00 
04007  3079  FF                 .BYTE $FF,$8A,'RESTOR',0
04007  307A  8A 
04007  307B  52 45 
04007  3081  00 
04008  3082  FF                 .BYTE $FF,$8D,'VECTOR',0
04008  3083  8D 
04008  3084  56 45 
04008  308A  00 
04009  308B  FF                 .BYTE $FF,$90,'SETMSG',0
04009  308C  90 






DISASSEMBLER64......PAGE 0087

LINE# LOC   CODE        LINE


04009  308D  53 45 
04009  3093  00 
04010  3094  FF                 .BYTE $FF,$93,'SECOND',0
04010  3095  93 
04010  3096  53 45 
04010  309C  00 
04011  309D  FF                 .BYTE $FF,$96,'TKSA  ',0
04011  309E  96 
04011  309F  54 4B 
04011  30A5  00 
04012  30A6  FF                 .BYTE $FF,$99,'MEMTOP',0
04012  30A7  99 
04012  30A8  4D 45 
04012  30AE  00 
04013  30AF  FF                 .BYTE $FF,$9C,'MEMBOT',0
04013  30B0  9C 
04013  30B1  4D 45 
04013  30B7  00 
04014  30B8  FF                 .BYTE $FF,$9F,'SCNKEY',0
04014  30B9  9F 
04014  30BA  53 43 
04014  30C0  00 
04015  30C1  FF                 .BYTE $FF,$A2,'SETTMO',0
04015  30C2  A2 
04015  30C3  53 45 
04015  30C9  00 
04016  30CA  FF                 .BYTE $FF,$A5,'ACPTR ',0
04016  30CB  A5 
04016  30CC  41 43 
04016  30D2  00 
04017  30D3  FF                 .BYTE $FF,$A8,'CIOUT ',0
04017  30D4  A8 
04017  30D5  43 49 
04017  30DB  00 
04018  30DC  FF                 .BYTE $FF,$AB,'UNTLK ',0
04018  30DD  AB 
04018  30DE  55 4E 
04018  30E4  00 
04019  30E5  FF                 .BYTE $FF,$AE,'UNLSN ',0
04019  30E6  AE 
04019  30E7  55 4E 
04019  30ED  00 
04020  30EE  FF                 .BYTE $FF,$B1,'LISTEN',0
04020  30EF  B1 
04020  30F0  4C 49 
04020  30F6  00 
04021  30F7  FF                 .BYTE $FF,$B4,'TALK  ',0
04021  30F8  B4 
04021  30F9  54 41 
04021  30FF  00 
04022  3100  FF                 .BYTE $FF,$B7,'READST',0
04022  3101  B7 
04022  3102  52 45 
04022  3108  00 
04023  3109  FF                 .BYTE $FF,$BA,'SETLFS',0






DISASSEMBLER64......PAGE 0088

LINE# LOC   CODE        LINE


04023  310A  BA 
04023  310B  53 45 
04023  3111  00 
04024  3112  FF                 .BYTE $FF,$BD,'SETNAM',0
04024  3113  BD 
04024  3114  53 45 
04024  311A  00 
04025  311B  FF                 .BYTE $FF,$C0,'OPEN  ',0
04025  311C  C0 
04025  311D  4F 50 
04025  3123  00 
04026  3124  FF                 .BYTE $FF,$C3,'CLOSE ',0
04026  3125  C3 
04026  3126  43 4C 
04026  312C  00 
04027  312D  FF                 .BYTE $FF,$C6,'CHKIN ',0
04027  312E  C6 
04027  312F  43 48 
04027  3135  00 
04028  3136  FF                 .BYTE $FF,$C9,'CHKOUT',0
04028  3137  C9 
04028  3138  43 48 
04028  313E  00 
04029  313F  FF                 .BYTE $FF,$CC,'CLRCHN',0
04029  3140  CC 
04029  3141  43 4C 
04029  3147  00 
04030  3148  FF                 .BYTE $FF,$CF,'CHRIN ',0
04030  3149  CF 
04030  314A  43 48 
04030  3150  00 
04031  3151  FF                 .BYTE $FF,$D2,'CHROUT',0
04031  3152  D2 
04031  3153  43 48 
04031  3159  00 
04032  315A  FF                 .BYTE $FF,$D5,'LOAD  ',0
04032  315B  D5 
04032  315C  4C 4F 
04032  3162  00 
04033  3163  FF                 .BYTE $FF,$D8,'SAVE  ',0
04033  3164  D8 
04033  3165  53 41 
04033  316B  00 
04034  316C  FF                 .BYTE $FF,$DB,'SETTIM',0
04034  316D  DB 
04034  316E  53 45 
04034  3174  00 
04035  3175  FF                 .BYTE $FF,$DE,'RDTIM ',0
04035  3176  DE 
04035  3177  52 44 
04035  317D  00 
04036  317E  FF                 .BYTE $FF,$E1,'STOP  ',0
04036  317F  E1 
04036  3180  53 54 
04036  3186  00 






DISASSEMBLER64......PAGE 0089

LINE# LOC   CODE        LINE


04037  3187  FF                 .BYTE $FF,$E4,'GETIN ',0
04037  3188  E4 
04037  3189  47 45 
04037  318F  00 
04038  3190  FF                 .BYTE $FF,$E7,'CLALL ',0
04038  3191  E7 
04038  3192  43 4C 
04038  3198  00 
04039  3199  FF                 .BYTE $FF,$EA,'UDTIM ',0
04039  319A  EA 
04039  319B  55 44 
04039  31A1  00 
04040  31A2  FF                 .BYTE $FF,$ED,'SCREEN',0
04040  31A3  ED 
04040  31A4  53 43 
04040  31AA  00 
04041  31AB  FF                 .BYTE $FF,$F0,'PLOT  ',0
04041  31AC  F0 
04041  31AD  50 4C 
04041  31B3  00 
04042  31B4  FF                 .BYTE $FF,$F3,'IOBASE',0
04042  31B5  F3 
04042  31B6  49 4F 
04042  31BC  00 
04043  31BD              ;*********************************
04044  31BD  FF                 .BYTE $FF,$FA,'NMIVEC',0
04044  31BE  FA 
04044  31BF  4E 4D 
04044  31C5  00 
04045  31C6  FF                 .BYTE $FF,$FC,'RESVEC',0
04045  31C7  FC 
04045  31C8  52 45 
04045  31CE  00 
04046  31CF  FF                 .BYTE $FF,$FE,'IRQVEC',0
04046  31D0  FE 
04046  31D1  49 52 
04046  31D7  00 
04047  31D8              ;*********************************
04048  31D8  00          UTABLE .BYTE 0
04049  31D9              ;*********************************
04050  31D9              .END


ERRORS = 00000


SYMBOL TABLE

SYMBOL VALUE
 ABSBIT   1753    ABSEXT   1778    ABSLUT   1754    ABSX     1779
 ABSY     177F    AC0      1DB7    AC1      1DBA    ACC      1708
 ACHECK   1DA5    ADRS     084F    AFILE    0E7E    AGET     0EB2
 AGET1    0EBE    ALINE    1DE8    ALOP     1DFA    AOP      0E4A
 AOP1     0F0F    AOP2     0F39    AOP3     0F5E    AOPX     0F0A








SYMBOL TABLE

SYMBOL VALUE
 ASC      0F7B    ASCCCC   1D33    ASCI1    1D60    ASCII    1D55
 ASCIIQ   1D8E    ASCKK    1D4A    B0000    1621    BASIC    080D
 BINARY   1375    BITFLG   2F78    BITOPT   2F4B    BOP      0E75
 BOP0     2F52    BSC      2F6D    BSTUB    0001    BUF      085C
 BUFPFL   2FDF    BYABIT   15F0    BYTES    1DBD    BYTESX   1DE5
 BYTT     15C8    BYZBIT   15CB    CASCII   1E3D    CDATA    08E7
 CHKIN    FFC6    CHKOUT   FFC9    CHRIN    FFCF    CHROUT   FFD2
 CLOSE    FFC3    CLRCHN   FFCC    COK      242D    COMENT   186A
 COMET    1870    COMOPT   081D    COMPT    1880    CONST0   152A
 CONST1   152F    CPASS    0815    CRLF     18FC    CRLFPR   1464
 CRNO     1399    CRNO1    13A6    CRYS     138C    CRYS1    13A4
 CSHORT   187E    DATABE   08EF    DATABP   08EB    DATABS   08ED
 DATAO1   1CC1    DATAO2   1CF7    DATAOP   1CB2    DATUT    1D9F
 DBYTES   1E49    DBYTEX   1E76    DECSL    194B    DEVICE   0819
 DISA     0A30    DISASS   0A21    DISB     0A5E    DISC     0AF3
 DISERR   12CD    DISFUL   0AF0    DISL     159D    DISL1    15AE
 DLOOA    12F8    DLOOC    12EE    DLOOE    12E2    DLOOP    0A95
 DOLLAR   18D9    DONE     0B6A    DONED    0B4B    DOP      0B73
 DOP2     0E42    DOP3     0E44    DSLINE   1586    EA       0820
 EAGOL    0828    EAOUT    082C    EAS      08E4    EASCI1   1E21
 EASCII   1E26    EFILE    185A    ENDAX    1CBE    ENDDAT   1DA2
 EPASS    0814    EQUATE   2730    EQUEND   24B3    EQUINT   233E
 EQUOP    2474    EQUOP1   248E    EQUPRT   2449    ERRCT    085A
 FCHARS   2F7A    FILBUF   2F7B    FILDIR   2F8F    FILE     0D96
 FILEOK   0D90    FINAL    15C5    FINISH   1451    FIXSYM   2402
 FLOOP    2FA3    FLOOQ    2FB0    FLOOW    2FB8    FOP1     0FB7
 FOP2     0FB9    FOROPT   081C    FORWRD   17F2    FVERON   2F79
 GETBYT   1358    GETC     243A    GETI     1B0C    GETIN    FFE4
 GETOPE   1F87    GETSL    1935    GETWRD   1334    GFILE0   0D84
 HEADER   1483    HEADES   14D6    HEADFX   14FE    HEADOK   14F0
 HEADSY   14F1    HEXA     151A    ILLEGL   16C7    ILLMSG   1987
 ILLOP    1F66    IMEXIT   1742    IMMEDT   170D    IMPLI1   1793
 IMPLID   1785    IMPONE   1792    INCC     2431    INCI     1B03
 INCIE    1AFB    INCSL    192C    INDRCT   179F    INDX     17B4
 INDY     17BD    INEND    1357    INENX    1374    INIT     105F
 INITD    0CB4    INITIN   1A6B    INSTN1   1327    INSTNG   1325
 INTCH    1B2A    INTCHA   1B1B    INTCHK   1B27    INTEND   1B63
 INTEXT   1AF9    INTMAT   1B65    INTOUT   1C52    INTPR    1C5D
 INTPRM   1C84    INTPRS   1C7F    INTPRT   1C3C    INTSA    1957
 INTSET   1A7D    IPASS    0813    ISKIP    1701    LARGE    1BCD
 LINECK   128E    LINECO   12CC    LINECT   0858    LINEFL   08C0
 LINEOK   14C5    LINES    260F    LISTCT   0857    LOADC    26FE
 LOADE    2715    LOADF    26C2    LOADM    26E0    LOOP1    1C58
 LOOP2    1CAC    LPAREN   18DE    LTITLE   154F    LTITLS   1579
 MATCH    239B    MATCHS   23BB    MATCHT   23E2    MATEXT   23EC
 MATONE   23BA    MBYTE    1F35    MCODES   20C9    MDBYTE   1F45
 MEMSIZ   0037    MNAMES   1FF1    MNEMON   1F4E    MNLOOP   1F58
 MODES    21C9    MPASS    09F2    MSA1     1192    MSA2     11B4
 MSA3     11CC    MSAOP    1173    MSB1     110D    MSB4     124E
 MSB5     126E    MSD1     107A    MSD2     108C    MSD4     109C
 MSD4A    10B6    MSD5     10C9    MSF1     100A    MSF2     1026
 MSG      0FBD    MSG1     103A    MSG2     1061    MSG5     11E2
 MSGBIT   1964    MSGBZP   196C    MSGDIS   0A0E    MSGEND   1982
 MSGERR   0A04    MSGOPT   3037    MSGPGE   3008    MSR1     10E5
 MSS1     2636    MSS2     265A    MSS3     2680    MSS4     269E








SYMBOL TABLE

SYMBOL VALUE
 MWORD    1F3D    NAME     2628    NAMS     2632    NASCII   1E2E
 NBUF     08C4    NCHARS   08C3    NCOK     242F    NDATA    08E9
 NEGREL   197E    NEWEXT   1324    NEWLIN   1307    NEXLIN   1476
 NEXPTR   1473    NEXPTS   14C6    NEXTBY   1F1C    NEXTC    240D
 NEXTP    0AC6    NEXTSL   1913    NOASC    1E47    NOBINC   1F33
 NOFILE   0D94    NOHEX    1388    NOID     0DA7    NOINC    192A
 NOPRT    0E27    NOTABS   0EF5    NPRAD    18B6    NPRAD1   18B7
 NUMPFL   00AA    OFFSET   0824    OFILE    0DAA    OFILE1   0DBD
 OFILE2   0DC2    OFILE3   0DE5    OFILE4   0DF4    OFILED   0D9F
 ONEBIT   1655    ONEBX    1684    ONEBY    1681    ONEBYT   1656
 OPCPUT   16C0    OPCSYM   16C3    OPEN     FFC0    OPERN1   1F7A
 OPERND   1F82    OPTDIR   3041    OPTPAG   300F    ORGIN    1844
 OUFILE   0D69    OUTFIL   2F95    OUTPUT   081A    P1       18AD
 PAGECT   0855    PAGER1   14BF    PASS     0812    PAUS1    1D87
 PAUSE    0ABF    PCHAR    141A    PEXIT    144F    PFILE0   0B93
 PFILE1   0B98    PFILEH   2FF3    PFILEI   2FF7    PMSG     09F8
 POSREL   197A    POVER    18AA    PRAD     1893    PRBYT    13AE
 PRBYTS   13A8    PREND    1CA9    PRFILE   0C8E    PRIN     142F
 PRINT    0E29    PRLA     1889    PRO2RD   0C6A    PROGED   0BDE
 PROGM    105B    PROGOK   0CB3    PROGRD   0BC9    PRTASS   1F6D
 PRTDAF   1A2A    PRTDAL   0ED9    PRTDAS   0EC6    PRTDAT   1A0E
 PRTEST   1A07    PRTGET   0DF5    PRTNEX   0ED1    PRTNU1   13E9
 PRTNU2   13F0    PRTNU3   13F1    PRTNUM   13E0    PRTOK    1C9C
 PRTON1   19A9    PRTONE   199B    PRTOT1   1A3D    PRTOTH   1A32
 PRTPAG   13D5    PRTTH1   19FC    PRTTHE   19D6    PRTTW1   19CB
 PRTTWO   19B1    PSELEC   18BF    PUIT     1AD6    PUT      25F3
 PUTC     25E7    PUTI     1ABC    PWORK    18C8    PWORKD   18CB
 Q00000   1E0F    QUITS    0AF9    QUITX    2538    QUITXX   2558
 QUTERR   0B10    RANG     1A57    RANGE    1A45    READS    2569
 READST   FFB7    READX    2525    READXF   24FF    READXX   24B9
 READY    257A    RELATV   17C9    RELND    17FB    RELNEG   1826
 RELP     1838    RELPC    1819    RELPM    182A    RELPUT   1815
 RELSYM   1818    REOPEN   2508    RESET    261E    RESINT   1AA3
 ROPT     0818    ROUT     1A69    RPAREN   18E3    S3       1BB5
 SA       081E    SAGOL    0826    SAOUT    082A    SAVA     0852
 SAVEE    084D    SAVEP    0849    SAVES    084B    SAVINT   1A8A
 SAVX     0853    SAVY     0854    SBLOK    1F2E    SCREN    1443
 SCRNO1   1510    SCROFF   1501    SCRON    1511    SELECT   0822
 SEMIC    18D4    SETLFS   FFBA    SETNAM   FFBD    SEXIT    13D4
 SKIPER   1D3B    SLOK     1925    SMALL    1BD0    SMALLP   0836
 SMALLS   0834    SOP      22C9    SOP1     22DD    SOP2     24C0
 SOP3     24CD    SOP4     2314    SORT     1B67    SORT1    1B7C
 SORT2    1B8B    SORT3    1C0D    SORT4    1C39    SORTOK   1C36
 SOUT     13CA    SPAC     1906    SPAC6    1901    SPACE    190E
 SPACM    1903    SPASS    0816    SSET     2331    STABLE   3055
 STARTD   080F    STARTS   0CCE    STDREF   25C9    STOP     FFE1
 STRPNT   13C4    STRSY1   23F3    STRSYM   23ED    SUBP     1F9D
 SUBS     1FD5    SUBS1    1FB9    SY       2326    SYEXIT   2401
 SYM      2351    SYM1     236A    SYM2     236D    SYMBOE   083D
 SYMBOL   0838    SYMBOP   0839    SYMBOS   083B    SYMBUF   08DA
 SYMEND   2399    SYMOP    2365    SYTAB    22F2    T2       1BB8
 TABINE   0832    TABINP   082E    TABINS   0830    TDATA    08F1
 TEMP     0851    TEXTER   08E6    TWOB     16C6    TWOBIT   168A
 TWOBX    16BD    TWOBY    16BA    TWOBYT   168B    UTABLE   31D8
 UYMBOE   0843    UYMBOP   083F    UYMBOS   0841    VERSON   08C2








SYMBOL TABLE

SYMBOL VALUE
 VICREG   D011    WIND1    0D4C    WIND2    0D4E    WINDOP   0D10
 WINDOW   081B    WORD1    1E8E    WORDM    1ED4    WORDPT   1EC8
 WORDS    1E79    WORDS2   1F04    WORDS3   1F16    WORDSX   1EC5
 WORDSY   1ECE    WORDXX   1F19    WORKED   0845    WORKER   0847
 WREADY   E391    WRITE    1057    XFILE1   24E8    XGET     25A9
 XINDEX   18E8    XOP0     0F92    XOP1     0FA2    XOP2     0FA4
 XOPT     0817    XTITLE   1534    XTITLS   156C    YINDEX   18F2
 YSHEX    138A    ZERBIT   1743    ZEROPG   1744    ZEROUR   0002
 ZEROX    1747    ZEROY    174D   

END OF ASSEMBLY

CROSS REFERENCE......PAGE    1


* ABSBIT $1753  1808
  ABSEXT $1778  1821  1826
  ABSLUT $1754  1812  3017
  ABSX   $1779  1830  3018
  ABSY   $177F  1835  3019
  AC0    $1DB7  2686  2690  2692
  AC1    $1DBA  2688  2693
  ACC    $1708  1759  3012
  ACHECK $1DA5  2646  2684
  ADRS   $084F   152   433   434   439   441   480   483   568   570   579

                 581   590   592   606   608   614   616   844   865   868

                 880   883  1156  1157  1166  1171  2964  2967  2968
  AFILE  $0E7E   782   787
  AGET   $0EB2   808   812
  AGET1  $0EBE   798   807   813
  ALINE  $1DE8  2707  2716
  ALOP   $1DFA  2727  2745
* AOP    $0E4A   758
  AOP1   $0F0F   853   915
* AOP2   $0F39   875
  AOP3   $0F5E   893   894   906
  AOPX   $0F0A   846   848
  ASC    $0F7B   896   898   900   902   904   907
  ASCCCC $1D33  2608  2614  2627
  ASCI1  $1D60  2640  2644  2646
  ASCII  $1D55  2642  2652  2654  2666
  ASCIIQ $1D8E  2647  2650  2668
  ASCKK  $1D4A  2629  2638
  B0000  $1621  1559  1561  1563  1565  1585  1587  1589  1592  1595  1598

                1601  1607
  BASIC  $080D    31    36
  BINARY $1375  1177  1182  1193  3705  3713
  BITFLG $2F78  1496  1546  1572  3829  3834
  BITOPT $2F4B   754  3807
  BOP    $0E75   773   776
  BOP0   $2F52  3811  3812  3822
  BSC    $2F6D  3814  3816  3818  3820  3824
  BSTUB  $0001     9    29
  BUF    $085C   167   413   528   529   648   783   789   790  1146  1176

                1181  3588  3594  3595  3929
  BUFPFL $2FDF  3918  3930  3935  3961  3962
  BYABIT $15F0  1503  1571
  BYTES  $1DBD  2691  2697
  BYTESX $1DE5  2699  2712
  BYTT   $15C8  1492  1518  1535  1610
  BYZBIT $15CB  1501  1545
  CASCII $1E3D  1738  1775  2722  2728  2763
  CDATA  $08E7   199   230   820   833   849   853   857   911   912  2568

                2572  2578  2593
  CHKIN  $FFC6    72   425   507   800  3674
  CHKOUT $FFC9    81   723  1314  1323
  CHRIN  $FFCF    73   426   428   435   508   509   510   805   808  1145

                1210  1219  3676  3680  3700  3703  3711  3719  3725
  CHROUT $FFD2    71   907  1114  1116  1118  1317  1326  1333  3572  3678

                3682  3704  3712  3758  3762  3826
  CLOSE  $FFC3    82   323   365   449   521   539   560   699   814  1083








CROSS REFERENCE......PAGE    2


                3641  3663
  CLRCHN $FFCC    75   367   450   522   700   727   815  1318  1327  3642

                3664  3701  3728
  COK    $242D  3487  3492
  COMENT $186A  1089  1614  1954  1963  2622  2641  2672  3523  3529  3555

  COMET  $1870  1633  1824  1849  1859  1963  1966  3897  3949  3991
* COMOPT $081D   105
  COMPT  $1880  1973  1976
  CONST0 $152A  1289  1296  1458
  CONST1 $152F  1292  1299  1459
  CPASS  $0815    96   239   298  1060  1515  1609  1766  2613  2639  2643

                2669  2698  2775  2795  3416
  CRLF   $18FC   236   469   501   823  1133  1354  2064  3643
  CRLFPR $1464  1341  1352  1361  1407
  CRNO   $1399   600  1219  3321  3329
  CRNO1  $13A6  1215  1221  1223  1226
  CRYS   $138C   713   745   922   934  1210  3293
  CRYS1  $13A4  1212  1214  1224
  CSHORT $187E  1969  1972
  DATABE $08EF   203   761   766  2263  2266
  DATABP $08EB   201   759   764
  DATABS $08ED   202   760   765
  DATAO1 $1CC1  2569  2572  2594
  DATAO2 $1CF7  2592  2598
  DATAOP $1CB2  1491  2565
  DATUT  $1D9F  2623  2634  2670  2677
  DBYTES $1E49  2693  2774
  DBYTEX $1E76  2776  2790
  DECSL  $194B   477  1555  1581  1813  1814  1825  1850  1860  2117  2166

                2187  2188  2621  2673
  DEVICE $0819   101   259   283   286   291   319   327   334   344   349

                 352   360   388  1062  1134  1310  1319  1328  1353  1356

                1370  1375  1388  1439  2193  2198  2200  2655  2658  2663

  DISA   $0A30   228   315
  DISASS $0A21    89   218
  DISB   $0A5E   240   247
  DISC   $0AF3   300   316
  DISERR $12CD   536   693   797  1094  3616
  DISFUL $0AF0   299   302   315
  DISL   $159D  1497  1504  1512  1548  1567  1574  1603
  DISL1  $15AE  1516  1522
  DLOOA  $12F8  1117  1120
  DLOOC  $12EE  1102  1112
  DLOOE  $12E2  1103  1105
  DLOOP  $0A95   242   245   271   277   279   294
  DOLLAR $18D9   467  1671  1701  1728  1770  1948  2035  2708  2755  2787

                2828  2865  3690
  DONE   $0B6A   362   367
  DONED  $0B4B   346   354
  DOP    $0B73   221   387
  DOP2   $0E42   746   749
  DOP3   $0E44   748   750
  DSLINE $1586   271  1491
  EA     $0820   110   311   313   444   446   580   582   629   631  2083

                2087
  EAGOL  $0828   114   630   632  2242  2246







CROSS REFERENCE......PAGE    3


  EAOUT  $082C   116   310   312   615   617
  EAS    $08E4   197  2600  2603  2615  2617  2630  2632  2877  2881
  EASCI1 $1E21  2740  2747
  EASCII $1E26  2729  2744  2747  2751
  EFILE  $185A   317  1081  1954
  ENDAX  $1CBE  2566  2570  2574
  ENDDAT $1DA2  2570  2679
  EPASS  $0814    95   241  1662  1692  1879  2628  2821  2852
  EQUATE $2730  3525  3526  3798
  EQUEND $24B3  3521  3550  3555
  EQUINT $233E   244  3367
  EQUOP  $2474  3530  3549  3553
  EQUOP1 $248E  3537  3539
  EQUPRT $2449   269  3514
  ERRCT  $085A   163   254   255   340   341  1722  1724
  FCHARS $2F7A  3842  3868
  FILBUF $2F7B  3843  3877  3889  3892  3906  3907
  FILDIR $2F8F  3848  3903  3904
  FILE   $0D96   655   657
* FILEOK $0D90   654
  FINAL  $15C5  1534  1635
  FINISH $1451   363  1341  1345  1366  1412  1435
  FIXSYM $2402  2010  2525  3471  3475
  FLOOP  $2FA3  3873  3879
  FLOOQ  $2FB0  3876  3881
  FLOOW  $2FB8  3884  3887
  FOP1   $0FB7   935   938
  FOP2   $0FB9   937   939
  FOROPT $081C   104   939  1968  1994  2008  2144  2160  2181  2201  2215

  FORWRD $17F2  1892  1894
  FVERON $2F79  3841  3863  3882  3888
  GETBYT $1358  1164  1169  1176
  GETC   $243A  3393  3396  3423  3432  3504
  GETI   $1B0C  2352  2368  2371  2408  2411  2422  2433  2517  2520  3530

                3533
  GETIN  $FFE4    74   276   292   893  2651  2664  3566  3811
  GETOPE $1F87  2946  2951  2959
  GETSL  $1935  1499  1513  1528  1553  1579  1624  1655  1684  1687  1729

                1771  1815  1840  1890  1920  2104  2142  2154  2158  2171

                2175  2179  2709  2721  2727  2733  2756  2782  2785  2805

                2809
  GETWRD $1334   567   578   589   605   613   843   863   878  1155
  GFILE0 $0D84   648   652
  HEADER $1483   261  1370
* HEADES $14D6  1416
  HEADFX $14FE  1432  1435
  HEADOK $14F0  1411  1426
  HEADSY $14F1  1430  2512
  HEXA   $151A  1246  1251  1454
  ILLEGL $16C7  1722  3011
  ILLMSG $1987  1753  1754  2138
  ILLOP  $1F66  2925  2931
  IMEXIT $1742  1767  1776  1786
  IMMEDT $170D  1764  2995  3013
  IMPLI1 $1793  1841  1843  1845  1847
  IMPLID $1785  1840  3020







CROSS REFERENCE......PAGE    4


  IMPONE $1792  1846  2993  2994  3002
  INCC   $2431  3395  3422  3431  3497
  INCI   $1B03  2345  2370  2382  2410  2417  2424  2519  2532  3532  3546

  INCIE  $1AFB  2330  2331  2339
  INCSL  $192C   316   438   517  1552  1578  1654  1683  1686  1764  1817

                1818  1823  1848  1858  1877  2089  2097  2157  2174  2178

                2619  2671  2784  2808  2883
  INDRCT $179F  1854  3024
  INDX   $17B4  1864  3022
  INDY   $17BD  1870  3023
  INEND  $1357  1160  1168  1172
  INENX  $1374  1180  1189
  INIT   $105F   551   552   967
  INITD  $0CB4   419   550   665   778  3583
  INITIN $1A6B   222  2263
  INSTN1 $1327  1145  1149
  INSTNG $1325   400   642   772  1144  1158  3579
  INTCH  $1B2A  2368  2385  2389
  INTCHA $1B1B  1992  2362
  INTCHK $1B27  2313  2367
  INTEND $1B63  2386  2391
  INTEXT $1AF9  2314  2333
  INTMAT $1B65  2380  2393
  INTOUT $1C52  2509  2512
  INTPR  $1C5D  2517  2544
  INTPRM $1C84  2528  2531
  INTPRS $1C7F  2524  2529
  INTPRT $1C3C   350  2502
  INTSA  $1957   228   430  2125
  INTSET $1A7D  2272  2367  2398  2498
  IPASS  $0813    94  1660  1690  1901  2819  2850
  ISKIP  $1701  1739  1751
  LARGE  $1BCD  2437  2441
  LINECK $128E   273  1059
  LINECO $12CC  1061  1064  1075  1090
  LINECT $0858   162   248   251  1127  1129  2203  2204
  LINEFL $08C0   181   256   257  1069  1072  1086  1087  1130  1132
  LINEOK $14C5  1365  1372  1401
  LINES  $260F  3632  3753
  LISTCT $0857   161   253  1342  1343  1347  1362  1363  1408  1409  1430

  LOADC  $26FE  3654  3655  3789
  LOADE  $2715  3665  3666  3793
  LOADF  $26C2  3575  3576  3782
  LOADM  $26E0  3621  3622  3785
  LOOP1  $1C58  2515  2547
  LOOP2  $1CAC  2541  2546
  LPAREN $18DE  1854  1864  1870  2040
  LTITLE $154F  1389  1390  1465
  LTITLS $1579  1422  1423  1471
  MATCH  $239B  3406  3415
  MATCHS $23BB  3417  3431
  MATCHT $23E2  3419  3434  3451
  MATEXT $23EC  3421  3456
  MATONE $23BA  3425  3427
  MBYTE  $1F35  1725  1726  2702  2703  2889
  MCODES $20C9  2921  3113







CROSS REFERENCE......PAGE    5


  MDBYTE $1F45  2779  2780  2891
  MEMSIZ $0037    85   473   475
  MNAMES $1FF1  2923  3028
  MNEMON $1F4E  1530  2918
  MNLOOP $1F58  2923  2935
  MODES  $21C9  2961  3203
  MPASS  $09F2   211   231   232
  MSA1   $1192   840   841  1012
  MSA2   $11B4   860   861  1015
  MSA3   $11CC   875   876  1018
  MSAOP  $1173   769   770  1009
  MSB1   $110D   998  3808  3809
  MSB4   $124E   919   920  1033
  MSB5   $126E   931   932  1037
  MSD1   $107A   564   565   602   603   973
  MSD2   $108C   575   576   610   611   977
  MSD4   $109C   586   587   981
  MSD4A  $10B6   497   498   985
  MSD5   $10C9   597   598   989
  MSF1   $100A   397   398   954
  MSF2   $1026   455   456   957
  MSG    $0FBD   391   392   945
  MSG1   $103A   636   637   961
  MSG2   $1061   710   711   969
  MSG5   $11E2   890   891  1021
  MSGBIT $1964  1620  1621  2133
  MSGBZP $196C  1627  1628  2134
  MSGDIS $0A0E   214   356   357
  MSGEND $1982  1956  1957  2137
  MSGERR $0A04   213   337   338
  MSGOPT $3037  3975  3984  3985
  MSGPGE $3008  3940  3955  3956
  MSR1   $10E5   742   743   993
  MSS1   $2636  3289  3290  3769
  MSS2   $265A  3318  3319  3773
  MSS3   $2680  3563  3564  3776
  MSS4   $269E  3326  3327  3779
  MWORD  $1F3D  2799  2800  2890
  NAME   $2628  3602  3603  3766
  NAMS   $2632   782  3587  3767
  NASCII $1E2E  2723  2755
  NBUF   $08C4   184   649   674   679   685   686  3874
  NCHARS $08C3   183   641   646   651   663   668  3867
  NCOK   $242F  3488  3491  3494
  NDATA  $08E9   200   806   819   845   913  2565  2573
  NEGREL $197E  1926  1927  2136
  NEWEXT $1324  1136  1138
  NEWLIN $1307   335   336   354   355   359  1127  1534  1631  1822  1847

                1857  1950  1959  1964  2711  2753  2758  2789  2830  2871

                3528  3544  3898  3912  3948  3950  3970  3990  3995
  NEXLIN $1476  1137  1362
  NEXPTR $1473  1361  1373  1385  1386  1392  1399  1400
  NEXPTS $14C6  1407  1416  1420  1421  1425  1433  1434  2545  2546
  NEXTBY $1F1C  2712  2739  2759  2790  2831  2833  2835  2872  2876
  NEXTC  $240D  3407  3479
  NEXTP  $0AC6   272   296







CROSS REFERENCE......PAGE    6


  NEXTSL $1913  1535  2082
  NOASC  $1E47  2764  2766  2769
  NOBINC $1F33  2879  2882  2886
  NOFILE $0D94   643   656
  NOHEX  $1388  1195  1200  1203
  NOID   $0DA7   664   666
  NOINC  $192A  2085  2088  2092
  NOPRT  $0E27   714   729   732
  NOTABS $0EF5   774   840
  NPRAD  $18B6  2006  2009
  NPRAD1 $18B7  1989  2008
  NUMPFL $00AA  3917  3926  3932
  OFFSET $0824   112   491   495   591   593  2106  2109
  OFILE  $0DAA   668  1084
  OFILE1 $0DBD   672   676
  OFILE2 $0DC2   678   683
* OFILE3 $0DE5   698
  OFILE4 $0DF4   669   694   706
  OFILED $0D9F   262   663
* ONEBIT $1655  1650
  ONEBX  $1684  1672  1674
  ONEBY  $1681  1670  1673
  ONEBYT $1656  1654  1794  1798  1803  1871  2996  2997  2998  3004  3005

  OPCPUT $16C0  1661  1691  1710
  OPCSYM $16C3  1663  1693  1712
  OPEN   $FFC0    80   535   558   692   721   796  3612
  OPERN1 $1F7A  1517  2948
  OPERND $1F82  1533  2953
  OPTDIR $3041   266  3979
  OPTPAG $300F   264  3944
  ORGIN  $1844   268  1088  1943  2620
* OUFILE $0D69   636
  OUTFIL $2F95  1079  3857
  OUTPUT $081A   102   258   324   326   331   333   348   353   390   657

                 658   733   734  1355  2192
  P1     $18AD  1991  1993  2001
  PAGECT $0855   160   249   252  1382  1383  1396  1398
  PAGER1 $14BF  1397  1399
  PASS   $0812    93   224   234   238   296   297  1059  1514  1608  1659

                1689  1765  1878  1900  2612  2627  2638  2642  2668  2697

                2774  2794  2818  2849  3415
  PAUS1  $1D87  2664  2665
  PAUSE  $0ABF   292   293
  PCHAR  $141A   235   466  1247  1252  1261  1302  1309  1744  1746  1748

                1760  1769  1781  1783  1785  1945  1947  1974  1982  1984

                2031  2036  2041  2046  2051  2053  2058  2060  2065  2078

                2725  2730  2736  2752  2860  2862  2928  3445  3447  3467

                3473  3540  3542  3959  3966
  PEXIT  $144F  1330  1334
  PFILE0 $0B93   401   406
  PFILE1 $0B98   412   417
  PFILEH $2FF3   407  3925
  PFILEI $2FF7  3928  3933
  PMSG   $09F8   212   287   288  2659  2660
  POSREL $197A  1923  1924  2135
  POVER  $18AA  1995  1997







CROSS REFERENCE......PAGE    7


  PRAD   $1893  1523  1618  1988  2701  2778  2798
  PRBYT  $13AE   828  1235  1240  1625  1675  1734  1773  1936  2143  2155

                2159  2172  2176  2180  2710  2757  3722  3727
  PRBYTS $13A8  1233  2016  2026
  PREND  $1CA9  2536  2539  2545
  PRFILE $0C8E   420   505   527
  PRIN   $142F  1312  1319
  PRINT  $0E29   731   733
  PRLA   $1889  1673  1707  1981  2001  2020
  PRO2RD $0C6A   510   519
  PROGED $0BDE   437   443
  PROGM  $105B   412   966
  PROGOK $0CB3   537   546
  PROGRD $0BC9   435   442
  PRTASS $1F6D  1522  2940
  PRTDAF $1A2A  2202  2208
  PRTDAL $0ED9   826   832
* PRTDAS $0EC6   819
  PRTDAT $1A0E  1616  2198  2214  2645  2941
  PRTEST $1A07  2150  2167  2192  2221
  PRTGET $0DF5   659   710
  PRTNEX $0ED1   823   834
  PRTNU1 $13E9  1272  1283  1304
  PRTNU2 $13F0  1286  1294
  PRTNU3 $13F1  1285  1287
  PRTNUM $13E0   342  1276  2205
  PRTOK  $1C9C  2535  2540
  PRTON1 $19A9  2145  2148
  PRTONE $199B  1617  2142  2700  2975  2976  2984
  PRTOT1 $1A3D  2216  2219
  PRTOTH $1A32  1943  1955  1966  2214  3524  3535  3902  3954  3983
  PRTPAG $13D5  1268  1384
  PRTTH1 $19FC  2182  2185
  PRTTHE $19D6  2171  2981  2982  2983  2988
  PRTTW1 $19CB  2161  2164
  PRTTWO $19B1  2154  2777  2797  2977  2978  2979  2980  2985  2986  2987

  PSELEC $18BF   468  1949  2002  2014  2208
  PUIT   $1AD6  2311  2316
  PUT    $25F3  3737  3741
  PUTC   $25E7  3631  3732
  PUTI   $1ABC  1711  1914  2304  2832  3426
  PWORK  $18C8  1911  1939  2020  3538
  PWORKD $18CB   462   500  1709  2024  2328  2531  2788  2829  2870  3543

  Q00000 $1E0F  2735  2737
  QUITS  $0AF9   275   319
  QUITX  $2538  3634  3640
  QUITXX $2558  3617  3662
  QUTERR $0B10   321   331
  RANG   $1A57  2243  2249
  RANGE  $1A45  1669  1699  2241  3420
  READS  $2569  3630  3673
  READST $FFB7    77   436   518   724   811  3635
  READX  $2525  3630  3636
  READXF $24FF  3580  3601
  READXX $24B9  3338  3563
  READY  $257A  3680  3685







CROSS REFERENCE......PAGE    8


  RELATV $17C9  1877  3003  3021
  RELND  $17FB  1896  1898
  RELNEG $1826  1922  1926
  RELP   $1838  1932  1936
  RELPC  $1819  1909  1920
  RELPM  $182A  1925  1928
  RELPUT $1815  1902  1913
  RELSYM $1818  1880  1905  1916
  REOPEN $2508  3597  3608
  RESET  $261E  3756  3759
  RESINT $1AA3  2292  3556
  ROPT   $0818   100   750  1907
  ROUT   $1A69  2244  2247  2251  2254  2258
  RPAREN $18E3  1856  1866  1872  2045
  S3     $1BB5  2428  2432
  SA     $081E   109   307   309   427   429   458   460   490   494   569

                 571   625   627  2125  2127
  SAGOL  $0826   113   626   628  2250  2253
  SAOUT  $082A   115   306   308   607   609
  SAVA   $0852   154   418   527  2516  2540
  SAVEE  $084D   148  2285  2287  2296  2298
* SAVEP  $0849   146
  SAVES  $084B   147  2281  2283  2292  2294
  SAVINT $1A8A   243  2280
  SAVX   $0853   155   825   831  1271  1279  1283  1303  2927  2929
  SAVY   $0854   156   822   826   830   858   864   871   879   886   908

                3721  3723
  SBLOK  $1F2E  2878  2883
  SCREN  $1443  1321  1328
  SCRNO1 $1510  1441  1445
  SCROFF $1501   666  1439
  SCRON  $1511   368  1447
  SELECT $0822   111   443   445   474   476   479   481   482   484   489

                 493   511   513  1882  1884  2014  2015  2082  2086  2097

                2099  2105  2108  2117  2119  2120  2126  2128  2362  2364

                2587  2590  2616  2618  2631  2633  2876  2880  3379  3381

  SEMIC  $18D4  1742  1779  1938  1967  2030  2327
  SETLFS $FFBA    79   534   557   691   720   795  3611
  SETNAM $FFBD    78   530   553   687   716   791  3596  3604
  SEXIT  $13D4  1260  1264
* SKIPER $1D3B  2630
  SLOK   $1925  2084  2089
  SMALL  $1BD0  2436  2440  2446
  SMALLP $0836   127  2401  2404  2419  2421  2460  2462  2807  2811  2866

                2868
  SMALLS $0834   126  2400  2403  2446  2448  2471  2473  2481  2483  2485

                2487  2489  2493
  SOP    $22C9   738  3289
  SOP1   $22DD  3294  3304
  SOP2   $24C0  3566  3567  3571
  SOP3   $24CD  3569  3572
  SOP4   $2314  3330  3338
  SORT   $1B67  2398  2513  3522
  SORT1  $1B7C  2408  2475  2496
  SORT2  $1B8B  2417  2441
  SORT3  $1C0D  2432  2480







CROSS REFERENCE......PAGE    9


  SORT4  $1C39  2492  2495  2498
  SORTOK $1C36  2491  2496
  SOUT   $13CA  1259  1263
  SPAC   $1906  2071  2073
  SPAC6  $1901  1778  1937  1997  2069
  SPACE  $190E   829  1524  1531  1619  1735  1741  1749  1996  2071  2077

                2156  2173  2177  2206  2207  2522  3689
  SPACM  $1903  2070  2149  2165  2186  2210  2220  2527  2530  2543
  SPASS  $0816    97  3418
  SSET   $2331  3359  3392
  STABLE $3055  3309  3312  4002
* STARTD $080F    89
  STARTS $0CCE   402   564
  STDREF $25C9  3694  3718
  STOP   $FFE1    76   274  2649  3633
  STRPNT $13C4   233   289   339   358   393   399   457   499   566   577

                 588   599   604   612   638   712   744   771   842   862

                 877   892   921   933  1256  1378  1391  1419  1424  1622

                1629  1727  1755  1928  1958  2661  2704  2781  2801  3291

                3320  3328  3527  3565  3577  3623  3656  3667  3810  3905

                3908  3957  3963  3986
  STRSY1 $23F3  3463  3469
  STRSYM $23ED  3443  3453  3460
  SUBP   $1F9D  2944  2945  2974
  SUBS   $1FD5  2954  2955  3010
  SUBS1  $1FB9  2949  2950  2992
  SY     $2326  3300  3322  3339  3351
  SYEXIT $2401  3464  3466  3470  3472
  SYM    $2351  1988  3377
  SYM1   $236A  3383  3392
  SYM2   $236D  3393  3409
  SYMBOE $083D   134   758   763  3344  3346  3352  3354  3486  3490  3648

                3650
  SYMBOL $0838   131  3299  3305  3377  3387
  SYMBOP $0839   132  3311  3314  3332  3334  3343  3345  3360  3362  3436

                3439  3451  3452  3480  3482  3483  3485  3489  3497  3499

                3504  3506  3647  3649  3733  3735  3743  3745  3746  3748

  SYMBOS $083B   133  3310  3313  3359  3361
  SYMBUF $08DA   192  3677  3681  3687  3710  3714  3715  3720  3726  3737

  SYMEND $2399  3378  3388  3408  3410
  SYMOP  $2365  1667  1697  1713  1904  2523  2826  2834  2857  3387  3536

* SYTAB  $22F2  3318
  T2     $1BB8  2427  2431  2433
  TABINE $0832   122  2265  2268  2284  2286  2297  2299  2306  2309  2316

                2318  2339  2341  2384  2388  2426  2430  2490  2494  2504

                2507  2534  2538  3367  3370  3516  3519  3548  3552
  TABINP $082E   120  2273  2275  2345  2347  2352  2354  2383  2387  2418

                2420  2425  2429  2472  2474  2484  2488  2533  2537  3368

                3371  3547  3551
  TABINS $0830   121  2264  2267  2272  2274  2280  2282  2293  2295  2305

                2308  2399  2402  2503  2506  3369  3372  3515  3518
  TDATA  $08F1   207   809   827   866   869   881   884   909  2580  2583

                2599  2602  2605
  TEMP   $0851   153  1071  1074  1165  1170  1178  1187  1188  2070  2072

                2307  2310  2376  2379  2409  2412  2435  2439  2465  2468

                2505  2508  2588  2591  2717  2741  2742  2919  2934  3402








CROSS REFERENCE......PAGE   10


                3405  3517  3520  3626  3753  3755  3760
  TEXTER $08E6   198  2606  2684  2705  2812  3573  3692
  TWOB   $16C6  1668  1698  1714
* TWOBIT $168A  1679
  TWOBX  $16BD  1702  1708
  TWOBY  $16BA  1700  1706
  TWOBYT $168B  1683  1812  1830  1835  1855  2999  3000  3001  3006
  UTABLE $31D8  3331  3333  3351  3353  4048
* UYMBOE $0843   140
* UYMBOP $083F   138
* UYMBOS $0841   139
  VERSON $08C2   182   645   670   673   676  3862
  VICREG $D011    70  1442  1444  1447  1449
  WIND1  $0D4C   601   620
  WIND2  $0D4E   619   621
  WINDOP $0D10   523   597
  WINDOW $081B   103   301   621
  WORD1  $1E8E  2796  2805
  WORDM  $1ED4  2814  2839
  WORDPT $1EC8  2820  2832  2851
  WORDS  $1E79  2692  2794
  WORDS2 $1F04  2858  2865
  WORDS3 $1F16  2827  2863  2871
* WORDSX $1EC5  2831
  WORDSY $1ECE  2822  2834  2853
* WORDXX $1F19  2872
  WORKED $0845   144   459   461   492   496  1656  1658  1674  1685  1688

                1883  1885  1886  1888  1893  1895  1897  1898  2024  2025

                2241  2245  2249  2252  2321  2324  2363  2365  2374  2377

                2423  2434  2438  2451  2454  2518  2521  2783  2786  2806

                2810  2840  2842  2843  2845  2867  2869  3380  3382  3401

                3404  3531  3534
  WORKER $0847   145  2369  2372  2375  2378  2581  2584  2586  2589  3394

                3397  3400  3403
  WREADY $E391    83   369   544   705
  WRITE  $1057   678   965
  XFILE1 $24E8  3587  3592
  XGET   $25A9  3697  3699  3703
  XINDEX $18E8  1799  1831  2050
  XOP0   $0F92   836   847   914   919
  XOP1   $0FA2   923   926
  XOP2   $0FA4   925   927
  XOPT   $0817    99   927  1990
  XTITLE $1534  1376  1377  1463
  XTITLS $156C  1417  1418  1470
  YINDEX $18F2  1804  1836  1873  2057
  YSHEX  $138A  1197  1202  1205
* ZERBIT $1743  1790
  ZEROPG $1744  1794  3014
  ZEROUR $0002    84   512   514   516   762   767  1256  1257  1259  1268

                1269  1276  1277  1288  1290  1291  1293  1295  1297  1298

                1300  2107  2110  2112  2317  2319  2322  2325  2353  2355

                2357  2447  2449  2452  2455  2461  2463  2466  2469  2959

                2960  2963  2966  3460  3461  3463  3471  3505  3507  3509

                3734  3736  3738
  ZEROX  $1747  1798  1865  3015







CROSS REFERENCE......PAGE   11


  ZEROY  $174D  1803  3016































































































































