;*********************************; DBYTE DIRECTIVE;*********************************CURDBY .WORD $0000 ;CURRENT DBYTE;*********************************; DBYTE DIRECTIVE;*********************************DODBY=*;      JMP FOOTD;*********************************; BEGIN BUILDING DBYTE STATEMENTS;*********************************       LDX #$03    ;RESET TO SCREEN       JSR CHKIN   ;INPUT FILE       JSR STOP    ;CHECK STOP       BNE DLOOD   ;IF NOT GO ON.       JMP BREAK   ;BREAK ERROR;*********************************; ZERO DATA COUNTER;*********************************DLOOD  LDA #$00       STA DATCNT;*********************************; LOOP;*********************************RLOOD  NOP       LDX #$08    ;FILE #8       JSR CHKIN   ;INPUT FILE;*********************************; READ IN DBYTE DATA;*********************************       JSR CHRIN   ;DATA BYTE       STA CURDBY  ;STASH DATA BYTE       JSR READST   ;READ STATUS       STA DSKSTA   ;STASH DISK STATUS       JSR CHRIN    ;DATA BYTE       STA CURDBY+1 ;STASH DATA BYTE       JSR READST   ;READ STATUS       STA DSKSTB   ;STASH DISK STATUS;*********************************; CHECK DATA DBYTE COUNT IF ZERO; THEN PRINT .DBYTE DIRECTIVE;*********************************       LDA DATCNT       BNE SUBDYT;*********************************; PRINT DBYTE DIRECTIVE AND FIRST DBYTE;*********************************; CHECK SCREEN OUTPUT OPTIONS; 0 = NO SCREEN; 1 = SCREEN OUTPUT;*********************************       LDA SCROPT       BNE PRTFI8;*********************************; SET OUTPUT CHANNEL TO SCREEN;*********************************       LDX #$03      ;FILE #Y       JSR CHKOUT    ;SET TO OUTPUT       JSR PRTDFD    ;PRINT DIRECTIVE;*********************************; SET OUTPUT CHANNEL TO ASM FILE;*********************************PRTFI8 LDX #$07      ;FILE #Y       JSR CHKOUT    ;SET TO OUTPUT       JSR PRTDFD    ;PRINT DIRECTIVE;*********************************; SET OUTPUT CHANNEL TO SCREEN;*********************************       LDX #$03      ;FILE #Y       JSR CHKOUT    ;SET TO OUTPUT       CLV       BVC CHKDSD;*********************************; SUBSEQUENT DBYTES;*********************************;*********************************       ; CHECK SCREEN OUTPUT OPTIONS; 0 = NO SCREEN; 1 = SCREEN OUTPUT;*********************************SUBDYT LDA SCROPT       BNE PRTFI9;*********************************; SET OUTPUT CHANNEL TO SCREEN;*********************************       LDX #$03      ;FILE #Y       JSR CHKOUT    ;SET TO OUTPUT       JSR PRTSD     ;PRINT DBYTE;*********************************; SET OUTPUT CHANNEL TO ASM FILE;*********************************PRTFI9 LDX #$07      ;FILE #Y       JSR CHKOUT    ;SET TO OUTPUT       JSR PRTSD     ;PRINT DBYTE;*********************************; SET OUTPUT CHANNEL TO SCREEN;*********************************       LDX #$03      ;FILE #Y       JSR CHKOUT    ;SET TO OUTPUT;*********************************; CHECK FOR DISK ERROR - LIKE END OF FILE;*********************************CHKDSD=*       LDA DSKSTA   ;CHECK DISK STATUS       ORA DSKSTB   ;CHECK DISK STATUS       BEQ CUROD    ;NEXT BYTE       JMP FOOTD    ;DONE PRINT FOOTER;*********************************; INCREMENT RECORD COUNT;*********************************CUROD  LDX DATCNT       INX       STX DATCNT;*********************************; INCREMENT ADDRESS;*********************************       CLC       LDA CUADD       ADC #$02       STA CUADD       BCC IN5       LDA CUADD+1       ADC #$00       STA CUADD+1;*********************************; CHECK FOR MAXIMUM $08 DBYTES;*********************************IN5    LDX DATCNT       CPX DATLIM       BEQ SRLOD       JMP RLOOD;*********************************; PRINT NEWLINE;*********************************; CHECK SCREEN OUTPUT OPTIONS; 0 = NO SCREEN; 1 = SCREEN OUTPUT;*********************************SRLOD  LDA SCROPT       BNE PRTFIA;*********************************; SET OUTPUT CHANNEL TO SCREEN;*********************************       LDX #$03      ;FILE #Y       JSR CHKOUT    ;SET TO OUTPUT       JSR PRTCR     ;PRINT CR;*********************************; SET OUTPUT CHANNEL TO ASM FILE;*********************************PRTFIA LDX #$07      ;FILE #Y       JSR CHKOUT    ;SET TO OUTPUT       JSR PRTCR     ;PRINT CR;*********************************; SET OUTPUT CHANNEL TO SCREEN;*********************************       LDX #$03      ;FILE #Y       JSR CHKOUT    ;SET TO OUTPUT;*********************************; NEXT DIRECTIVE LINE;*********************************       JMP DLOOD;*********************************;*********************************;;*********************************FOOTD=*;*********************************; INCREMENT ADDRESS BY 1 PAST LAST WORD;*********************************       CLC       LDA CUADD       ADC #$01       STA CUADD       BCC IN6       LDA CUADD+1       ADC #$00       STA CUADD+1;*********************************;;*********************************IN6    RTS;*********************************;;*********************************;*********************************; PRINT DBYTE DIRECTIVE AND FIRST DBYTE;*********************************PRTDFD JSR PRTDBY   ;PRINT ' .DBYTE '       JSR PRTDOL   ;PRINT '$'       LDA CURDBY   ;RETERIVE BYTE       JSR CVTBYT   ;CONVERT BYTE       JSR PRTBYE   ;PRINT BYTE       LDA CURDBY+1 ;RETERIVE BYTE       JSR CVTBYT   ;CONVERT BYTE       JSR PRTBYE   ;PRINT BYTE       RTS;*********************************; SUBSEQUENT BYTES;*********************************PRTSD  JSR PRTCOM   ;PRINT ','       JSR PRTDOL   ;PRINT '$'       LDA CURDBY   ;RETERIVE BYTE       JSR CVTBYT   ;CONVERT BYTE       JSR PRTBYE   ;PRINT BYTE       LDA CURDBY+1 ;RETERIVE BYTE       JSR CVTBYT   ;CONVERT BYTE       JSR PRTBYE   ;PRINT BYTE       RTS;*********************************; PRINT ' .DBYTE ';*********************************MSDY .BYTE ' .DBYTE '     .BYTE 0;*********************************; PRINT " .DBYTE ";*********************************PRTDBY LDA #<MSDY  ;LOW BYTE MESSAGE       LDY #>MSDY  ;HIGH BYTE MESSAGE       JMP STRPNT  ;OUTPUT MESSAGE;*********************************; DBYTE DIRECTIVE;*********************************